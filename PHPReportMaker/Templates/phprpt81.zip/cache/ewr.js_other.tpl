function ewExewr_js() {
 try {
var ewAr = new Array();
var ewSB = new StringBuilder();
ew_SetLocale();
ew_LoadCurrent();
ewAr[1] = ""+"\r\n"+""+"\r\n"+"/**"+"\r\n"+" * JavaScript for PHP Report Maker 8"+"\r\n"+" * @license (C)2007-2014 e.World Technology Ltd."+"\r\n"+" */"+"\r\n"+"var ewrEmailDialog, ewrExportDialog, ewrPopups = {}, $rowindex$ = null;"+"\r\n"+"var ewrDrillCharts = [], ewrExporting = false, ewrExportCharts = [];"+"\r\n"+"var EWR_TABLE_CLASSNAME = \"ewTable\";"+"\r\n"+"var EWR_GRID_CLASSNAME = \"ewGrid\";"+"\r\n"+"var EWR_TABLE_ROW_CLASSNAME = \"ewTableRow\";"+"\r\n"+"var EWR_TABLE_ALT_ROW_CLASSNAME = \"ewTableAltRow\";"+"\r\n"+"var EWR_ITEM_TEMPLATE_CLASSNAME = \"ewTemplate\";"+"\r\n"+"var EWR_ITEM_TABLE_CLASSNAME = \"ewItemTable\";"+"\r\n"+"var EWR_TABLE_LAST_ROW_CLASSNAME = \"ewTableLastRow\";"+"\r\n"+"var EWR_TABLE_LAST_COL_CLASSNAME = \"ewTableLastCol\";"+"\r\n"+"var EWR_TABLE_BORDER_BOTTOM_CLASSNAME = \"ewTableBorderBottom\";"+"\r\n"+"var EWR_UNFORMAT_YEAR = 50;"+"\r\n"+"var EWR_POPUP_MINWIDTH = 200;"+"\r\n"+"var EWR_POPUP_MINHEIGHT = 150;"+"\r\n"+"var EWR_POPUP_DEFAULTHEIGHT = 200;"+"\r\n"+"var EWR_EMPTY_VALUE = \"##empty##\";"+"\r\n"+"var EWR_NULL_VALUE = \"##null##\";"+"\r\n"+"var ewr_ClientScriptInclude = jQuery.getScript;"+"\r\n"+"var ewrLightboxSettings = { transition: \"none\", photo: true, opacity: 0.5 };"+"\r\n"+""+"\r\n"+"// Forms object"+"\r\n"+"var ewrForms = {};"+"\r\n"+""+"\r\n"+"// Init icon tooltip"+"\r\n"+"function ewr_InitIcons() {"+"\r\n"+"	var $ = jQuery;"+"\r\n"+"	$(\".ewIcon, .ewTableHeaderPopup .icon-filter\").closest(\"a, button\").add(\".ewLightbox, .ewDrillLink\").tooltip({"+"\r\n"+"		container: \"body\","+"\r\n"+"		trigger: (EWR_IS_MOBILE) ? \"manual\" : \"hover\","+"\r\n"+"		placement: \"bottom\""+"\r\n"+"	});"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Init page"+"\r\n"+"jQuery(function($) {"+"\r\n"+"	$(\"div.ewTableHeaderBtn\").each(function() {"+"\r\n"+"		var $this = $(this), padding = 0;"+"\r\n"+"		$this.find(\".ewTableHeaderSort:has(.caret), .ewTableHeaderPopup\").each(function() {"+"\r\n"+"			padding += $(this).width();"+"\r\n"+"		});"+"\r\n"+"		if (padding)"+"\r\n"+"			$this.css(EWR_CSS_FLIP ? \"padding-left\" : \"padding-right\", padding + 4);"+"\r\n"+"	});"+"\r\n"+"	ewr_InitIcons();"+"\r\n"+"	$.extend(ewrLightboxSettings, {"+"\r\n"+"		title: ewLanguage.Phrase(\"LightboxTitle\"),"+"\r\n"+"		current: ewLanguage.Phrase(\"LightboxCurrent\"),"+"\r\n"+"		previous: ewLanguage.Phrase(\"LightboxPrevious\"),"+"\r\n"+"		next: ewLanguage.Phrase(\"LightboxNext\"),"+"\r\n"+"		close: ewLanguage.Phrase(\"LightboxClose\"),"+"\r\n"+"		xhrError: ewLanguage.Phrase(\"LightboxXhrError\"),"+"\r\n"+"		imgError: ewLanguage.Phrase(\"LightboxImgError\")"+"\r\n"+"	});"+"\r\n"+"	$(\".ewLightbox\").each(function() {"+"\r\n"+"		var $this = $(this);"+"\r\n"+"		if ($this.colorbox)"+"\r\n"+"			$this.colorbox($.extend({rel: $this.data(\"rel\")}, ewrLightboxSettings));"+"\r\n"+"	});"+"\r\n"+"	$(\"table.\" + EWR_TABLE_CLASSNAME).each(ewr_SetupTable); // Init tables"+"\r\n"+"	$(\"table.\" + EWR_GRID_CLASSNAME).each(ewr_SetupGrid); // Init grids"+"\r\n"+"	$.later($(\".ewChart\").length * 100, null, function() { // Adjust footer"+"\r\n"+"		var $window = $(window), $content = $(\"#ewContentTable\"), bh = $(\"body\").height();"+"\r\n"+"		$content.css(\"min-height\", $content.outerHeight());"+"\r\n"+"		$window.resize(function() {"+"\r\n"+"			if ($window.height() > bh)"+"\r\n"+"				$content.css(\"height\", $window.height() - (!$(\"#ewHeaderRow\").is(\":hidden\") ? $(\"#ewHeaderRow\").height() : 0) - (!$(\"#ewMobileMenu\").is(\":hidden\") ? $(\"#ewMobileMenu\").height() : 0) - (!$(\"#ewMenuRow\").is(\":hidden\") ? $(\"#ewMenuRow\").height() : 0) - (!$(\"#ewFooterRow\").is(\":hidden\") ? $(\"#ewFooterRow\").height() : 0));"+"\r\n"+"		}).triggerHandler(\"resize\");"+"\r\n"+"	});"+"\r\n"+"	$(\"input[name=pageno]\").keypress(function(e) {"+"\r\n"+"		if (e.which == 13) {"+"\r\n"+"			var url = window.location.href, p = url.lastIndexOf(window.location.search);"+"\r\n"+"			window.location = url.substr(0, p) + \"?\" + this.name + \"=\" + parseInt(this.value);"+"\r\n"+"			return false;"+"\r\n"+"		}"+"\r\n"+"	});"+"\r\n"+"	$(\"input[data-calendar]\").each(ewr_CreateCalendar); // Init calendars"+"\r\n"+"	$(window).keydown(function(e) {"+"\r\n"+"		window._ctrlKey = e.ctrlKey;"+"\r\n"+"	}).keyup(function(e){"+"\r\n"+"		window._ctrlKey = 0;"+"\r\n"+"	});"+"\r\n"+"	$(\".ewIframe\").iframeAutoHeight();"+"\r\n"+"	if ((typeof EW_USE_JAVASCRIPT_MESSAGE == \"undefined\" || !EW_USE_JAVASCRIPT_MESSAGE) && EWR_USE_JAVASCRIPT_MESSAGE)"+"\r\n"+"		ewr_ShowMessage(); // Show message"+"\r\n"+"});"+"\r\n"+""+"\r\n"+"// Attach event by element id or name"+"\r\n"+"function ewr_On(el, sType, fn) {"+"\r\n"+"	var $ = jQuery, $el;"+"\r\n"+"	if ($.isString(el)) { // String, if not \"xxx([])\" => selector"+"\r\n"+"		$el = (!/^\\w+(\\[\\])?$/.test(el)) ? $(el) : $(\"[id='\" + el + \"'],[name='\" + el + \"']\");"+"\r\n"+"	} else {"+"\r\n"+"		$el = $(el);"+"\r\n"+"	}"+"\r\n"+"	$el.on(sType, fn);"+"\r\n"+"}"+"\r\n"+"var ewrEvent = { on: ewr_On }; // Backward compatibility for ewEvent.on"+"\r\n"+""+"\r\n"+"// Batch"+"\r\n"+"function ewr_Batch(el, method, o, overrides) {"+"\r\n"+"	var $ = jQuery, collection = [], scope = (overrides) ? o : null;			"+"\r\n"+"	el = (el && (el.tagName || el.item)) ? el : $(el).get(); // Skip $(el) when possible"+"\r\n"+"	if (el && method) {"+"\r\n"+"		if (el.tagName || el.length === undefined) // Element or not array-like "+"\r\n"+"			return method.call(scope, el, o);"+"\r\n"+"		for (var i = 0; i < el.length; ++i)"+"\r\n"+"			collection[collection.length] = method.call(scope || el[i], el[i], o);"+"\r\n"+"	} else			"+"\r\n"+"		return false;"+"\r\n"+"	return collection;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Select elements by selector"+"\r\n"+"// Pass in a selector and an optional context (if no context is provided the root \"document\" is used). Runs the specified selector and returns an array of matched DOMElements."+"\r\n"+"function ewr_Select(selector, context, fn) {"+"\r\n"+"	var $ = jQuery, $root = $(context);"+"\r\n"+"	var els = $root.find(selector).get();"+"\r\n"+"	if ($.isFunction(fn)) {"+"\r\n"+"		els = ewr_Batch(els, fn);"+"\r\n"+"	} else if ($.isString(fn)) {"+"\r\n"+"		els = ewr_Batch(els, new Function(fn));"+"\r\n"+"	}"+"\r\n"+"	return els;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Filter elements by selector"+"\r\n"+"// Takes in a set of DOMElements, filters them against the specified selector, and returns the results. The selector can be a full selector (e.g. \"div > span.foo\") and not just a fragment."+"\r\n"+"function ewr_Matches(selector, set, fn) {"+"\r\n"+"	var $ = jQuery, els = $(set).filter(selector).get();"+"\r\n"+"	if ($.isFunction(fn)) {"+"\r\n"+"		els = ewr_Batch(els, fn);"+"\r\n"+"	} else if ($.isString(fn)) {"+"\r\n"+"		els = ewr_Batch(els, new Function(fn));"+"\r\n"+"	}"+"\r\n"+"	return els;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Export charts"+"\r\n"+"function ewr_ExportCharts(el, url, exportid, f) {"+"\r\n"+""+"\r\n"+"	if (ewrExporting)"+"\r\n"+"		return;"+"\r\n"+""+"\r\n"+"	exportid += \"_\" + (new Date()).getTime();"+"\r\n"+"	url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"exportid=\" + exportid;"+"\r\n"+""+"\r\n"+"	var $ = jQuery, $el = $(el), method = (f) ? \"post\" : \"get\";"+"\r\n"+"	if ($el.is(\".dropdown-menu a\"))"+"\r\n"+"		$el = $el.closest(\".btn-group\");"+"\r\n"+""+"\r\n"+"	function _export() {"+"\r\n"+"		if (f && !/&(amp;)?custom=1/.test(url)) {"+"\r\n"+"			data = $(f).serialize();"+"\r\n"+"			data += \"&token=\" + EWR_TOKEN; // Add token"+"\r\n"+"			$.post(url, data, function(result) {"+"\r\n"+"				ewr_ShowMessage(result);"+"\r\n"+"			});"+"\r\n"+"		} else {"+"\r\n"+"			if (/export=(word|excel|pdf|email)&(amp;)?custom=1/.test(url)) {"+"\r\n"+"				if (/export=email/.test(url)) {"+"\r\n"+"					url = url.replace(/export=email&(amp;)?/i, \"\"); // Remove duplicate export=email (exists in form)"+"\r\n"+"					url += \"&\" + $(f).serialize();"+"\r\n"+"				}"+"\r\n"+"				$(\"iframe.ewExport\").remove();"+"\r\n"+"				$(\"<iframe>\").attr(\"src\", url).addClass(\"ewExport\").hide().appendTo($(\"body\").css(\"cursor\", \"wait\"));"+"\r\n"+"				$.later(5000, null, function() { $(\"body\").css(\"cursor\", \"default\"); });"+"\r\n"+"			} else {"+"\r\n"+"				ewr_Redirect(url, f, method);"+"\r\n"+"			}			"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	if (ewrExportCharts.length == 0) // No charts, just submit the form"+"\r\n"+"		return _export();"+"\r\n"+""+"\r\n"+"	var chartcnt = 0; // Reset"+"\r\n"+"	"+"\r\n"+"	// Export chart"+"\r\n"+"	function chartExport(id) {"+"\r\n"+"		var cht = FusionCharts(id), chartid = \"cht_\" + id.substr(6), divid = \"div_export_\" + id.substr(6), $svg = $(\"#\" + divid + \" svg\");"+"\r\n"+"		var data = { \"stream_type\": \"svg\", \"stream\": cht.getSVGString(), \"token\": EWR_TOKEN, // Add token			"+"\r\n"+"			\"meta_bgColor\": \"#ffffff\", \"meta_bgAlpha\": \"1\", // Do not change"+"\r\n"+"			\"meta_DOMId\": id, \"meta_width\": $svg.attr(\"width\"), \"meta_height\": $svg.attr(\"height\"),"+"\r\n"+"			\"parameters\": \"exportfilename=\" + exportid + \"_\" + id  + \".png|exportformat=png|exportaction=download|exportparameters=undefined\"					"+"\r\n"+"		};"+"\r\n"+"		$.ajax({ \"url\": EWR_CHART_EXPORT_HANDLER, \"data\": data, \"cache\": false, \"type\": \"POST\", \"success\": function() {"+"\r\n"+"			chartcnt++;"+"\r\n"+"			if (chartcnt == ewrExportCharts.length) { // All charts exported"+"\r\n"+"				_export();"+"\r\n"+"				ewrExporting = false;"+"\r\n"+"				$(\"body\").css(\"cursor\", \"default\");"+"\r\n"+"			} else { // Next chart"+"\r\n"+"				chartExport(ewrExportCharts[chartcnt]);"+"\r\n"+"			}		"+"\r\n"+"		}}).fail(function(xhr, status, error) {"+"\r\n"+"			ewrExporting = false;"+"\r\n"+"			$(\"body\").css(\"cursor\", \"default\");"+"\r\n"+"			alert(error);"+"\r\n"+"		});"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Export charts"+"\r\n"+"	ewrExporting = true;"+"\r\n"+"	$(\"body\").css(\"cursor\", \"wait\");"+"\r\n"+"	chartExport(ewrExportCharts[0]); // Export first chart"+"\r\n"+""+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Create a popup filter"+"\r\n"+"function ewr_CreatePopup(name, db) {"+"\r\n"+"	ewrPopups[name] = db;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Show popup filter"+"\r\n"+"function ewr_ShowPopup(e, popupname, useRange, rangeFrom, rangeTo) {"+"\r\n"+""+"\r\n"+"	ewr_StopPropagation(e);"+"\r\n"+"	var $ = jQuery, $el = $(this).tooltip(\"hide\");		"+"\r\n"+"	"+"\r\n"+"	var _addOKBtn = function() { // OK button"+"\r\n"+"		var $tip = $el.data(\"bs.popover\").tip(), form = $tip.find(\"form\")[0];"+"\r\n"+"		var $btn = $('<button type=\"button\" class=\"btn btn-primary btn-sm ewPopupBtn\">' + ewLanguage.Phrase(\"OK\") + '</button>')"+"\r\n"+"			.click(function() {"+"\r\n"+"				if (form && !ewr_SelectedEntry(form, popupname)) {"+"\r\n"+"					alert(ewLanguage.Phrase(\"PopupNoValue\"));"+"\r\n"+"				} else {"+"\r\n"+"					if (form)"+"\r\n"+"						form.submit();"+"\r\n"+"					$el.popover(\"hide\");"+"\r\n"+"				}				"+"\r\n"+"			});"+"\r\n"+"		$tip.find(\".modal-footer\").append($btn).show();"+"\r\n"+"	}"+"\r\n"+"	"+"\r\n"+"	var _addCancelBtn = function() { // Cancel button		"+"\r\n"+"		var $tip = $el.data(\"bs.popover\").tip(), form = $tip.find(\"form\")[0];"+"\r\n"+"		var $btn = $('<button type=\"button\" class=\"btn btn-default btn-sm ewPopupBtn\">' + ewLanguage.Phrase(\"Cancel\") + '</button>')"+"\r\n"+"			.click(function() {"+"\r\n"+"				$el.popover(\"hide\");"+"\r\n"+"			});"+"\r\n"+"		$tip.find(\".modal-footer\").append($btn);"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	if (!$el.data(\"bs.popover\")) {"+"\r\n"+"		$el.popover({"+"\r\n"+"			html: true,"+"\r\n"+"			placement: \"bottom\","+"\r\n"+"			trigger: \"manual\","+"\r\n"+"			template: '<div class=\"popover\">' +"+"\r\n"+"				'<div class=\"popover-content\" style=\"overflow: auto;\"></div><div class=\"modal-footer\" style=\"display: none;\"></div><div class=\"ewResizeHandle\"></div></div>',"+"\r\n"+"			content: '<div class=\"ewrLoading\"><div class=\"ewSpinner\"><div></div></div> ' +"+"\r\n"+"				ewLanguage.Phrase(\"Loading\").replace(\"%s\", \"\") + '</div>',"+"\r\n"+"			container: $(\"#ewrPopupFilterDialog\")"+"\r\n"+"		}).on(\"shown.bs.popover\", function(e) {"+"\r\n"+"			if (ewrPopups[popupname]) { // Load popup if already loaded"+"\r\n"+"				ewr_SetPopupContent.call($el[0], popupname, ewrPopups[popupname], useRange, rangeFrom, rangeTo);"+"\r\n"+"				_addOKBtn();"+"\r\n"+"				_addCancelBtn();"+"\r\n"+"			} else { // Load popup by Ajax if not loaded yet"+"\r\n"+"				$.ajax({"+"\r\n"+"					cache: false,"+"\r\n"+"					dataType: \"json\","+"\r\n"+"					data: \"popup=\" + popupname,"+"\r\n"+"					url: window.location.href.split(\"?\")[0].split(\"#\")[0],"+"\r\n"+"					success: function(db) {"+"\r\n"+"						var args = $el.data(\"args\");"+"\r\n"+"						ewr_CreatePopup(args.popupname, db);"+"\r\n"+"						ewr_SetPopupContent.call($el[0], args.popupname, db, args.useRange, args.rangeFrom, args.rangeTo);"+"\r\n"+"						_addOKBtn();"+"\r\n"+"						_addCancelBtn();"+"\r\n"+"					},"+"\r\n"+"					error: function(o) {"+"\r\n"+"						if (o.responseText) {"+"\r\n"+"							var $tip = $el.data(\"bs.popover\").tip();"+"\r\n"+"							$tip.find(\".popover-content\").empty().append('<p class=\"text-error\">' + o.responseText + '</p>');"+"\r\n"+"							$tip.find(\".modal-footer\").empty();"+"\r\n"+"							_addOKBtn();"+"\r\n"+"						}"+"\r\n"+"					}"+"\r\n"+"				});"+"\r\n"+"			}	"+"\r\n"+"		});"+"\r\n"+"		var $tip = $el.data(\"bs.popover\").tip(), $bd = $tip.find(\".popover-content\"),"+"\r\n"+"			padding = $bd.innerHeight() - $bd.height(), fh; "+"\r\n"+"		$tip.drag(\"start\", function(ev, dd) {"+"\r\n"+"				var $this = $(this);"+"\r\n"+"				dd.width = $this.width();"+"\r\n"+"				dd.height = $this.height();"+"\r\n"+"				fh = $tip.find(\".modal-footer\").outerHeight();"+"\r\n"+"			}).drag(function(ev, dd) {				"+"\r\n"+"				var $this = $(this), w = Math.max(EWR_POPUP_MINWIDTH, dd.width + dd.deltaX),"+"\r\n"+"					h = Math.max(EWR_POPUP_MINHEIGHT, dd.height + dd.deltaY);"+"\r\n"+"				$this.css({ width: w, height: h });"+"\r\n"+"				$this.find(\".popover-content\").height(h - fh - padding);			"+"\r\n"+"			}, { handle: \".ewResizeHandle\" });		"+"\r\n"+"	}"+"\r\n"+"	$el.data(\"args\", {\"popupname\": popupname, \"useRange\": useRange, \"rangeFrom\": rangeFrom, \"rangeTo\": rangeTo}).popover(\"show\");"+"\r\n"+""+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Set popup fitler content"+"\r\n"+"function ewr_SetPopupContent(name, db, useRange, rangeFrom, rangeTo) {"+"\r\n"+"	var $ = jQuery, cnt = 0, $el = $(this);"+"\r\n"+"	$.map(db, function(record) {"+"\r\n"+"		if (record[\"s\"] === false)"+"\r\n"+"			cnt++;"+"\r\n"+"	});"+"\r\n"+"	var selectall = (cnt == 0), showdivider = false, checkedall = selectall ? \" checked=\\\"checked\\\"\" : \"\";"+"\r\n"+"	var $form = $(\"<form id=\\\"\" + name + \"_FilterForm\\\" class=\\\"form-horizontal\\\" method=\\\"post\\\">\" +"+"\r\n"+"		\"<input type=\\\"hidden\\\" name=\\\"token\\\" value=\\\"\" + EWR_TOKEN + \"\\\">\" +"+"\r\n"+"		\"<input type=\\\"hidden\\\" name=\\\"popup\\\" value=\\\"\" + name + \"\\\">\" +"+"\r\n"+"		\"<div class=\\\"ewPopupContainer\\\"></div></form>\");"+"\r\n"+"	var $container = $form.find(\"div\"); "+"\r\n"+"	if (useRange) {"+"\r\n"+"		$container.append(\"<div class=\\\"ewPopupItem\\\"><table class=\\\"ewPopupRange\\\">\" +"+"\r\n"+"			\"<tr><td>\" + ewLanguage.Phrase(\"PopupFrom\") + \"</td><td>\" +"+"\r\n"+"			\"<select class=\\\"form-control\\\" name=\\\"rf_\" + name + \"\\\" style=\\\"width: auto;\\\" onchange=\\\"ewr_SelectRange(this, '\" + name + \"');\\\">\" +"+"\r\n"+"			\"</select></td></tr>\" +"+"\r\n"+"			\"<tr><td>\" + ewLanguage.Phrase(\"PopupTo\") + \"</td><td>\" +"+"\r\n"+"			\"<select class=\\\"form-control\\\" name=\\\"rt_\" + name + \"\\\" style=\\\"width: auto;\\\" onchange=\\\"ewr_SelectRange(this, '\" + name + \"');\\\">\" +"+"\r\n"+"			\"</select></td></tr></table></div>\");"+"\r\n"+"		var $select = $container.find(\"select\").first();"+"\r\n"+"		$select.append(\"<option value=\\\"\\\">\" + ewLanguage.Phrase(\"PopupSelect\") + \"</option>\");"+"\r\n"+"		$.map(db, function(record) {"+"\r\n"+"			var key = record[\"k\"], val = record[\"v\"];"+"\r\n"+"			if (key.substring(0,2) != \"@@\" && key != EWR_NULL_VALUE && key != EWR_EMPTY_VALUE) {"+"\r\n"+"				var selected = (key == rangeFrom) ? \" selected=\\\"selected\\\"\" : \"\";"+"\r\n"+"				$select.append(\"<option value=\\\"\" + key + \"\\\"\" + selected + \">\" + val + \"</option>\");"+"\r\n"+"			}"+"\r\n"+"		});"+"\r\n"+"		var $select = $container.find(\"select\").last();		"+"\r\n"+"		$select.append(\"<option value=\\\"\\\">\" + ewLanguage.Phrase(\"PopupSelect\") + \"</option>\");"+"\r\n"+"		$.map(db, function(record) {"+"\r\n"+"			var key = record[\"k\"], val = record[\"v\"];"+"\r\n"+"			if (key.substring(0,2) != \"@@\" && key != EWR_NULL_VALUE && key != EWR_EMPTY_VALUE) {"+"\r\n"+"				selected = (key == rangeTo) ? \" selected=\\\"selected\\\"\" : \"\";"+"\r\n"+"				$select.append(\"<option value=\\\"\" + key + \"\\\"\" + selected + \">\" + val + \"</option>\");"+"\r\n"+"			}"+"\r\n"+"		});"+"\r\n"+"		$container.append(\"<div class=\\\"ewPopupDivider\\\"></div>\");		"+"\r\n"+"	}"+"\r\n"+"	$container.append(\"<div class=\\\"ewPopupItem checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"sel_\" + name + \"[]\\\" value=\\\"\\\" onclick=\\\"ewr_SelectAll(this);\\\"\" + checkedall + \">\" +"+"\r\n"+"		ewLanguage.Phrase(\"PopupAll\") + \"</label></div>\");"+"\r\n"+"	$.map(db, function(record) {"+"\r\n"+"		var key = record[\"k\"], val = record[\"v\"], checked = record[\"s\"] ? \" checked=\\\"checked\\\"\" : \"\";"+"\r\n"+"		if (key.substring(0,2) == \"@@\") {"+"\r\n"+"			showdivider = true;"+"\r\n"+"		} else if (showdivider) {"+"\r\n"+"			showdivider = false;"+"\r\n"+"			$container.append(\"<div class=\\\"ewPopupDivider\\\"></div>\");"+"\r\n"+"		}"+"\r\n"+"		$container.append(\"<div class=\\\"ewPopupItem checkbox\\\"><label><input type=\\\"checkbox\\\" name=\\\"sel_\" + name + \"[]\\\" value=\\\"\" + key + \"\\\" onclick=\\\"ewr_UpdateSelectAll(this);\\\"\" + checked + \">\" + val + \"</label></div>\");"+"\r\n"+"	});	"+"\r\n"+"	var $tip = $el.data(\"bs.popover\").tip();"+"\r\n"+"	$tip.find(\".popover-content\").empty().append($form);"+"\r\n"+"	$tip.find(\".modal-footer\").empty();"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if selected"+"\r\n"+"function ewr_SelectedEntry(f, name) {"+"\r\n"+"	var $ = jQuery, $els = $(f.elements[\"sel_\" + name + \"[]\"]);"+"\r\n"+"	return ($els.length > 0) ? $els.filter(\":not(:first):checked\").length > 0 : $els.prop(\"checked\");"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Select all"+"\r\n"+"function ewr_SelectAll(el) {"+"\r\n"+"	ewr_ClearRange(el); // Clear any range set"+"\r\n"+"	jQuery(el.form.elements).filter(\"input:checkbox[name='\" + el.name + \"']:not(:first)\").prop(\"checked\", el.checked);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Update select all"+"\r\n"+"function ewr_UpdateSelectAll(el) {"+"\r\n"+"	ewr_ClearRange(el); // Clear any range set"+"\r\n"+"	var f = el.form;"+"\r\n"+"	if (f) f.elements[el.name][0].checked = jQuery(el.form.elements).filter(\"input:checkbox[name='\" + el.name + \"']:not(:first):not(:checked)\").length == 0;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Select range"+"\r\n"+"function ewr_SelectRange(el) {"+"\r\n"+"	var from, to, f = el.form, name = el.name.replace(/^r[ft]_/, \"\"); "+"\r\n"+"	if (f.elements[\"rf_\" + name].selectedIndex > -1)"+"\r\n"+"		from = f.elements[\"rf_\" + name].options[f.elements[\"rf_\" + name].selectedIndex].value;"+"\r\n"+"	if (f.elements[\"rt_\" + name].selectedIndex > -1)"+"\r\n"+"		to = f.elements[\"rt_\" + name].options[f.elements[\"rt_\" + name].selectedIndex].value;"+"\r\n"+"	if (!$.isValue(from) || !$.isValue(to) || from === \"\" || to === \"\")"+"\r\n"+"		return;"+"\r\n"+"	ewr_SetRange(el, from, to, true);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Clear range"+"\r\n"+"function ewr_ClearRange(el) {"+"\r\n"+"	var f = el.form, name = el.name.replace(/^sel__/, \"\").replace(/\\[\\]$/, \"\");"+"\r\n"+"	var from = f.elements[\"rf_\" + name], to = f.elements[\"rt_\" + name];"+"\r\n"+"	if (from && to && from.selectedIndex > 0 && to.selectedIndex > 0) {"+"\r\n"+"		from.selectedIndex = 0;"+"\r\n"+"		to.selectedIndex = 0;"+"\r\n"+"		ewr_SetRange(el, from.options[from.selectedIndex].value, to.options[to.selectedIndex].value, false);"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Set range"+"\r\n"+"function ewr_SetRange(el, from, to, set) {"+"\r\n"+"	var $ = jQuery, f = el.form, name = el.name.replace(/^r[ft]_/, \"sel_\") + \"[]\", inRange;"+"\r\n"+"	$(f.elements).filter(\"input:checkbox[name='\" + name + \"']\").each(function() {"+"\r\n"+"		if (this.value == from)"+"\r\n"+"			inRange = true;"+"\r\n"+"		if (inRange)"+"\r\n"+"			this.checked = set;"+"\r\n"+"		else"+"\r\n"+"			if (set) this.checked = false;"+"\r\n"+"		if (this.value == to)"+"\r\n"+"			inRange = false;"+"\r\n"+"	});"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Page Object"+"\r\n"+"function ewr_Page(name) {"+"\r\n"+"	this.Name = name;"+"\r\n"+"	this.PageID = \"\";"+"\r\n"+""+"\r\n"+"	// Validate function"+"\r\n"+"	this.ValidateRequired = true;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Forms object/function"+"\r\n"+"var ewrForms = function(el) { // Id or element"+"\r\n"+"	if (el) {"+"\r\n"+"		var $ = jQuery, id;"+"\r\n"+"		if ($.isString(el)) { // Id"+"\r\n"+"			id = el;"+"\r\n"+"		} else { // Element"+"\r\n"+"			id = $(ewr_GetForm(el)).attr(\"id\");"+"\r\n"+"		}"+"\r\n"+"		if (id) {   "+"\r\n"+"			for (var i in this) {"+"\r\n"+"				if (i === id)"+"\r\n"+"					return this[i];"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"	return undefined;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Form class"+"\r\n"+"function ewr_Form(id) {"+"\r\n"+"	var $ = jQuery;	"+"\r\n"+"	this.ID = id; // Same ID as the form"+"\r\n"+"	this.$Element = null;"+"\r\n"+"	this.Form = null;"+"\r\n"+"	this.InitSearchPanel = false; // Expanded by default"+"\r\n"+""+"\r\n"+"	// Change search operator"+"\r\n"+"	this.SrchOprChanged = function(el) {"+"\r\n"+"		var form = this.GetForm(), $form = $(form), elem = $.isString(el) ? form.elements[el] : el;"+"\r\n"+"		if (!elem)"+"\r\n"+"			return;"+"\r\n"+"		var param = /^so2_/.test(elem.id) ? elem.id.substr(4) : elem.id.substr(3), val = $(elem).val(), isBetween = val == \"BETWEEN\","+"\r\n"+"			isNullOpr = val == \"IS NULL\" || val == \"IS NOT NULL\";"+"\r\n"+"		if (/^so_/.test(elem.id))"+"\r\n"+"			$form.find(\"[name^=sv_\" + param + \"],[name^=cal_sv_\" + param + \"]\").prop(\"disabled\", isNullOpr);"+"\r\n"+"		if (/^so2_/.test(elem.id))"+"\r\n"+"			$form.find(\"[name^=sv2_\" + param + \"],[name^=cal_sv2_\" + param + \"]\").prop(\"disabled\", isNullOpr);"+"\r\n"+"		$form.find(\"span.btw0_\" + param).toggle(!isBetween).end().find(\"span.btw1_\" + param).toggle(isBetween)"+"\r\n"+"			.find(\":input\").prop(\"disabled\", !isBetween);"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Validate"+"\r\n"+"	this.ValidateRequired = true;"+"\r\n"+"	this.Validate = null;"+"\r\n"+""+"\r\n"+"	// Disable form"+"\r\n"+"	this.DisableForm = function() {"+"\r\n"+"		if (!EWR_DISABLE_BUTTON_ON_SUBMIT)"+"\r\n"+"			return;"+"\r\n"+"		var form = this.GetForm();"+"\r\n"+"		$(form).find(\":submit, :reset\").prop(\"disabled\", true).addClass(\"disabled\"); "+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Enable form"+"\r\n"+"	this.EnableForm = function() {"+"\r\n"+"		if (!EWR_DISABLE_BUTTON_ON_SUBMIT)"+"\r\n"+"			return;"+"\r\n"+"		var form = this.GetForm();"+"\r\n"+"		$(form).find(\":submit, :reset\").prop(\"disabled\", false).removeClass(\"disabled\");"+"\r\n"+"	}"+"\r\n"+"	"+"\r\n"+"	// Before submit"+"\r\n"+"	this.PreSubmit = function() {"+"\r\n"+"		var form = this.GetForm(), $form = $(form);"+"\r\n"+"		$form.find(\"input[name^=s_],input[name^=sx_],input[name^=q_]\").prop(\"disabled\", true); // Do not submit these values"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Submit"+"\r\n"+"	this.Submit = function(action) {"+"\r\n"+"		var form = this.GetForm(), $form = $(form);"+"\r\n"+"		this.DisableForm();"+"\r\n"+"		//this.UpdateTextArea();"+"\r\n"+"		if (!this.Validate || this.Validate()) {"+"\r\n"+"			if (action)"+"\r\n"+"				form.action = action;"+"\r\n"+"			this.PreSubmit();"+"\r\n"+"			form.submit();"+"\r\n"+"		} else {"+"\r\n"+"			this.EnableForm();	"+"\r\n"+"		}		"+"\r\n"+"		return false;"+"\r\n"+"	}	"+"\r\n"+""+"\r\n"+"	// Check empty row"+"\r\n"+"	this.EmptyRow = null;"+"\r\n"+""+"\r\n"+"	// Multi-page"+"\r\n"+"	this.MultiPage = null;"+"\r\n"+""+"\r\n"+"	// Dynamic selection lists"+"\r\n"+"	this.Lists = {};"+"\r\n"+""+"\r\n"+"	// AutoSuggests"+"\r\n"+"	this.AutoSuggests = {};"+"\r\n"+""+"\r\n"+"	// Get the HTML form object"+"\r\n"+"	this.GetForm = function() {"+"\r\n"+"		if (!this.Form) {			"+"\r\n"+"			this.$Element = $(\"#\" + this.ID);"+"\r\n"+"			if (this.$Element.is(\"form\")) { // HTML form"+"\r\n"+"				this.Form = this.$Element[0];"+"\r\n"+"			} else if (this.$Element.is(\"div\")) { // DIV => Grid page"+"\r\n"+"				this.Form = this.$Element.closest(\"form\")[0];	"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"		return this.Form;"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Update dynamic selection lists"+"\r\n"+"	this.UpdateOpts = function(rowindex) {"+"\r\n"+"		if (rowindex === $rowindex$) // Null => return, undefined => update all"+"\r\n"+"			return;		"+"\r\n"+"		var lists = [], form = this.GetForm();"+"\r\n"+"		for (var id in this.Lists) {"+"\r\n"+"			var parents = this.Lists[id].ParentFields.slice(); // Clone"+"\r\n"+"			var ajax = this.Lists[id].Ajax;"+"\r\n"+"			if ($.isValue(rowindex)) {"+"\r\n"+"				id = id.replace(/^x_/, \"x\" + rowindex + \"_\");"+"\r\n"+"				for (var i = 0, len = parents.length; i < len; i++)						"+"\r\n"+"					parents[i] = parents[i].replace(/^x_/, \"x\" + rowindex + \"_\");"+"\r\n"+"			}"+"\r\n"+"			if (ajax) { // Ajax "+"\r\n"+"				var pvalues = [];"+"\r\n"+"				for (var i = 0, len = parents.length; i < len; i++)						"+"\r\n"+"					pvalues[pvalues.length] = ewr_GetOptValues(parents[i], form); // Save the initial values of the parent lists	"+"\r\n"+"				lists[lists.length] = [id, pvalues, true, false];"+"\r\n"+"			} else { // Non-Ajax"+"\r\n"+"				ewr_UpdateOpt.call(this, id, parents, null, false);	"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+""+"\r\n"+"		// Update the Ajax lists"+"\r\n"+"		for (var i = 0, cnt = lists.length; i < cnt; i++)"+"\r\n"+"			ewr_UpdateOpt.apply(this, lists[i]);"+"\r\n"+"	}"+"\r\n"+"	"+"\r\n"+"	// Create AutoSuggest"+"\r\n"+"	this.CreateAutoSuggest = function(id, forceselect) {"+"\r\n"+"		this.AutoSuggests[id] = new ewr_AutoSuggest(id, this, forceselect);"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Show error message"+"\r\n"+"	this.OnError = function(el, msg) {"+"\r\n"+"		return ewr_OnError(this, el, msg); "+"\r\n"+"	}"+"\r\n"+"	"+"\r\n"+"	// Get form data"+"\r\n"+"	this.GetFormData = function() {"+"\r\n"+"		var form = this.GetForm(), $form = $(form);"+"\r\n"+"		if (ewr_HasFormData(form)) {"+"\r\n"+"			this.PreSubmit();"+"\r\n"+"			return $form.serialize();"+"\r\n"+"		}"+"\r\n"+"		return \"\";			"+"\r\n"+"	}"+"\r\n"+"	"+"\r\n"+"	// Set up filters"+"\r\n"+"	this.SetupFilters = function(e, filters) {"+"\r\n"+"		var id = this.ID, data = this.FilterList, $sf = $(\".ewSaveFilter[data-form=\" + id + \"]\"),"+"\r\n"+"			$df = $(\".ewDeleteFilter[data-form=\" + id + \"]\"),"+"\r\n"+"			$delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu\", !!filters.length).toggleClass(\"disabled\", !filters.length), "+"\r\n"+"			$save = $sf.parent(\"li\").toggleClass(\"disabled\", !data),"+"\r\n"+"			$btn = $(e.target);"+"\r\n"+"		$save.off(\"click.ew\").on(\"click.ew\", function(e) { // Save filter"+"\r\n"+"			ewr_Prompt(ewLanguage.Phrase(\"EnterFilterName\"), function(name) {"+"\r\n"+"				filters[filters.length] = [name, data];	"+"\r\n"+"				$.localStorage.set(id + \"_filters\", filters);"+"\r\n"+"			}, true);"+"\r\n"+"			return false;"+"\r\n"+"		}).prevAll().remove();"+"\r\n"+"		$df.next(\"ul.dropdown-menu\").remove();		"+"\r\n"+"		if (filters.length) {			"+"\r\n"+"			$menu = $df.closest(\"ul.dropdown-menu\");"+"\r\n"+"			$submenu = $(\"<ul class='dropdown-menu'></ul>\");			"+"\r\n"+"			for (var i in filters) {"+"\r\n"+"				if (!$.isArray(filters[i]))"+"\r\n"+"					continue;"+"\r\n"+"				$(\"<li><a data-index='\" + i + \"' href='#'>\" + filters[i][0] + \"</a></li>\").on(\"click\", function(e) { // Delete"+"\r\n"+"					var i = $(this).find(\"a[data-index]\").data(\"index\");"+"\r\n"+"					ewr_Prompt(ewLanguage.Phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), function() {"+"\r\n"+"						delete(filters[i]);"+"\r\n"+"						$.localStorage.set(id + \"_filters\", filters);"+"\r\n"+"					});"+"\r\n"+"					return false;"+"\r\n"+"				}).appendTo($submenu);"+"\r\n"+"				$(\"<li><a class='ewFilterList' data-index='\" + i + \"' href='#'>\" + filters[i][0] + \"</a></li>\").insertBefore($save).on(\"click\", function(e) {"+"\r\n"+"					var i = $(this).find(\"a[data-index]\").data(\"index\");"+"\r\n"+"					$(\"<form>\").attr({method: \"post\", action: location.href.split(\"?\")[0]})"+"\r\n"+"						.append($(\"<input type='hidden'>\").attr({name: \"cmd\", value: \"resetfilter\"}), $(\"<input type='hidden'>\").attr({name: \"token\", value: EWR_TOKEN}), $(\"<input type='hidden'>\").attr({name: \"filter\", value: JSON.stringify(filters[i][1])}))"+"\r\n"+"						.appendTo(\"body\").submit();"+"\r\n"+"					return false;"+"\r\n"+"				});"+"\r\n"+""+"\r\n"+"			}"+"\r\n"+"			$(\"<li class='divider'></li>\").insertBefore($save);			"+"\r\n"+"			$delete.append($submenu);			"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Init form"+"\r\n"+"	this.Init = function() {"+"\r\n"+"		var self = this, form = this.GetForm(), $form = $(form);"+"\r\n"+"		if (!form)"+"\r\n"+"			return;		"+"\r\n"+""+"\r\n"+"		// Search panel"+"\r\n"+"		if (this.InitSearchPanel && !ewr_HasFormData(form))"+"\r\n"+"			$(\"#\" + this.ID + \"_SearchPanel\").removeClass(\"in\");"+"\r\n"+"			"+"\r\n"+"		// Search panel toggle"+"\r\n"+"		$(\".ewSearchToggle[data-form=\" + this.ID + \"]\").on(\"click.bs.button\", function() {"+"\r\n"+"			$(\"#\" + $(this).data(\"form\") + \"_SearchPanel\").collapse(\"toggle\");"+"\r\n"+"		});"+"\r\n"+""+"\r\n"+"		// Search operators"+"\r\n"+"		$form.find(\"select[id^=so_]\").each(function() {"+"\r\n"+"			var $this = $(this).change();"+"\r\n"+"			if ($this.val() != \"BETWEEN\")"+"\r\n"+"				$form.find(\"#so2_\" + this.id.substr(2)).change();"+"\r\n"+"		});"+"\r\n"+"		"+"\r\n"+"		// Filters button		"+"\r\n"+"		if (window.localStorage) {"+"\r\n"+"			$(\".ewFilterOption.\" + this.ID + \" .ewButtonDropdown\").on(\"show.bs.dropdown\", function(e) {"+"\r\n"+"				var filters = $.localStorage.get(self.ID + \"_filters\") || []; "+"\r\n"+"				var ar = $.grep(filters, function(val) {"+"\r\n"+"					if ($.isArray(val) && val.length == 2)"+"\r\n"+"						return val;"+"\r\n"+"				});"+"\r\n"+"				self.SetupFilters(e, ar);				"+"\r\n"+"			});					 "+"\r\n"+"		} else"+"\r\n"+"			$(\".ewFilterOption\").hide();"+"\r\n"+""+"\r\n"+"		// Dynamic selection lists"+"\r\n"+"		this.UpdateOpts();"+"\r\n"+""+"\r\n"+"		// Bind submit event"+"\r\n"+"		if (this.$Element.is(\"form\")) { // Not Grid page"+"\r\n"+"			$form.submit(function(e) {"+"\r\n"+"				return self.Submit();"+"\r\n"+"			});"+"\r\n"+"		}"+"\r\n"+""+"\r\n"+"		// Store form object as data"+"\r\n"+"		this.$Element.data(\"form\", this);"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Add to the global forms object	"+"\r\n"+"	ewrForms[this.ID] = this;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Prompt"+"\r\n"+"function ewr_Prompt(text, cb, input) {"+"\r\n"+"	var $ = jQuery, $dlg = $(\"#ewrPrompt\"), $body = $dlg.find(\".modal-body\").empty();"+"\r\n"+"	if (input) { // prompt"+"\r\n"+"		$body.append('<div class=\"form-group\">' +"+"\r\n"+"			'<label class=\"control-label\">' + text + '</label>' +"+"\r\n"+"			'<input type=\"text\" class=\"form-control\" style=\"display: block; width: 100%;\"></div>');"+"\r\n"+"		$input = $body.find(\"input\").click(function() {"+"\r\n"+"			$input.parent().removeClass(\"has-error\");"+"\r\n"+"		});"+"\r\n"+"		$dlg.find(\".modal-footer .btn-primary\").unbind().click(function(e) { // OK"+"\r\n"+"			var val = $.trim($input.val());"+"\r\n"+"			if (val == \"\") {"+"\r\n"+"				$input.parent().addClass(\"has-error\");"+"\r\n"+"				$input[0].focus();"+"\r\n"+"			} else {"+"\r\n"+"				$dlg.modal(\"hide\");"+"\r\n"+"				if ($.isFunction(cb))"+"\r\n"+"					cb(val);				"+"\r\n"+"			}"+"\r\n"+"		});"+"\r\n"+"		$dlg.on(\"shown.bs.modal\", function(e) {"+"\r\n"+"			$input[0].focus();	"+"\r\n"+"		});	"+"\r\n"+"	} else { // confirm"+"\r\n"+"		$body.append(\"<div>\" + text + \"</div>\");"+"\r\n"+"		$dlg.find(\".modal-footer .btn-primary\").unbind().click(function(e) { // OK"+"\r\n"+"			$dlg.modal(\"hide\");"+"\r\n"+"			if ($.isFunction(cb))"+"\r\n"+"				cb();	"+"\r\n"+"		});"+"\r\n"+"	}	"+"\r\n"+"	$dlg.modal(\"show\");"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Find form"+"\r\n"+"function ewr_GetForm(el) {"+"\r\n"+"	var $ = jQuery, $el = $(el), $f = $el.closest(\".ewForm\");"+"\r\n"+"	if (!$f[0]) // Element not inside form"+"\r\n"+"		$f = $el.closest(\".ewGrid\").find(\".ewForm\");	"+"\r\n"+"	return $f[0];"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check search form data"+"\r\n"+"function ewr_HasFormData(form) {"+"\r\n"+"	var $ = jQuery, els = $(form).find(\"[name^=sv_][value!=''][value!='{value}'],[name^=sv2_][value!=''][value!='{value}']\").get();"+"\r\n"+"	for (var i = 0, len = els.length; i < len; i++) {"+"\r\n"+"		var el = els[i];"+"\r\n"+"		if (/^(so|so2)_/.test(el.name)) {"+"\r\n"+"			if (/^IS/.test($(el).val()))"+"\r\n"+"				return true;"+"\r\n"+"		} else if (el.type == \"checkbox\" || el.type == \"radio\") {"+"\r\n"+"			if (el.checked)"+"\r\n"+"				return true;"+"\r\n"+"		} else if (el.type == \"select-one\" || el.type == \"select-multiple\") {"+"\r\n"+"			for (var j = 0, cnt = el.options.length; j < cnt; j++) {"+"\r\n"+"				if (el.options[j].selected && el.options[j].value != \"\" && el.options[j].value != \"##all##\")"+"\r\n"+"					return true;"+"\r\n"+"			}"+"\r\n"+"		} else if (el.type == \"text\" || el.type == \"hidden\" || el.type == \"textarea\") {"+"\r\n"+"			return true;"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"	return false;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Update a dynamic selection list"+"\r\n"+"// - obj {HTMLElement|array[HTMLElement]|string|array[string]} target HTML element(s) or the id of the element(s) "+"\r\n"+"// - parentId {array[string]|array[array]} parent field element names or data"+"\r\n"+"// - async {boolean|null} async(true) or sync(false) or non-Ajax(null)"+"\r\n"+"// - change {boolean} trigger onchange event"+"\r\n"+"function ewr_UpdateOpt(obj, parentId, async, change) {"+"\r\n"+"	var $ = jQuery, self = this, $this = $(this);"+"\r\n"+"	var exit = function() {"+"\r\n"+"		$this.dequeue();"+"\r\n"+"	};	"+"\r\n"+"	if (!obj || obj.length == 0)"+"\r\n"+"		return exit();"+"\r\n"+"	var f = (this.Form) ? this.Form : (this.form) ? this.form : null;"+"\r\n"+"	if (this.form && /^x\\d+_/.test(this.id)) // Has row index => grid"+"\r\n"+"		f = ewr_GetForm(this); // Detail grid or HTML form"+"\r\n"+"	if (!f)"+"\r\n"+"		return exit();"+"\r\n"+"	var frm = (this.Form) ? this : ewrForms[f.id];"+"\r\n"+"	if (!frm)"+"\r\n"+"		return exit();"+"\r\n"+"	var args = $.makeArray(arguments);	"+"\r\n"+"	if (this.form && $.isArray(obj) && $.isString(obj[0])) { // Array of id (onchange/onclick event)"+"\r\n"+"		for (var i = 0, len = obj.length; i < len; i++)"+"\r\n"+"			$this.queue($.proxy(ewr_UpdateOpt, self, obj[i], parentId, async, change));"+"\r\n"+"		var list = frm.Lists[this.id.replace(/^[xy]\\d*_/, \"x_\")];"+"\r\n"+"		return exit();"+"\r\n"+"	}"+"\r\n"+"	if ($.isString(obj))"+"\r\n"+"		obj = ewr_GetElements(obj, f);"+"\r\n"+"	var ar = ewr_GetOptValues(obj);"+"\r\n"+"	var oid = ewr_GetId(obj, false);"+"\r\n"+"	if (!oid)"+"\r\n"+"		return exit();"+"\r\n"+"	var nid = oid.replace(/^([xy])(\\d*)_/, \"x_\");"+"\r\n"+"	var prefix = RegExp.$1;	"+"\r\n"+"	var rowindex = RegExp.$2;"+"\r\n"+"	var arp = [];"+"\r\n"+"	if ($.isUndefined(parentId)) { // Parent IDs not specified, use default"+"\r\n"+"		parentId = frm.Lists[nid].ParentFields.slice(); // Clone"+"\r\n"+"		if (rowindex != \"\") {"+"\r\n"+"			for (var i = 0, len = parentId.length; i < len; i++)"+"\r\n"+"				parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");"+"\r\n"+"		} else if (prefix == \"y\") {"+"\r\n"+"//			for (var i = 0, len = parentId.length; i < len; i++) {"+"\r\n"+"//				var yid = parentId[i].replace(/^x_/, \"y_\");"+"\r\n"+"//				var yobj = ewr_GetElements(yid, f);"+"\r\n"+"//				if (yobj.type || yobj.length > 0) // Has y_* parent"+"\r\n"+"//					parentId[i] = yid; // Changes with y_* parent"+"\r\n"+"//			}"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"	if ($.isArray(parentId) && parentId.length > 0) {"+"\r\n"+"		if ($.isArray(parentId[0])) { // Array of array => data"+"\r\n"+"			arp = parentId;"+"\r\n"+"		} else if ($.isString(parentId[0])) { // Array of string => Parent IDs"+"\r\n"+"			for (var i = 0, len = parentId.length; i < len; i++)"+"\r\n"+"				arp[arp.length] = ewr_GetOptValues(parentId[i], f);				"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"	if (!ewr_IsAutoSuggest(obj)) // Do not clear Auto-Suggest"+"\r\n"+"		ewr_ClearOpt(obj);"+"\r\n"+"	var addOpt = function(aResults) {"+"\r\n"+"		for (var i = 0, cnt = aResults.length; i < cnt; i++) {"+"\r\n"+"			var args = {data: aResults[i], parents: arp, valid: true, name: ewr_GetId(obj), form: f};			"+"\r\n"+"			$(document).trigger(\"addoption\", [args]);			"+"\r\n"+"			if (args.valid)"+"\r\n"+"				ewr_NewOpt(obj, aResults[i], f);"+"\r\n"+"		}"+"\r\n"+"		if (!obj.options && obj.length) { // Radio/Checkbox list"+"\r\n"+"			ewr_RenderOpt(obj, f);"+"\r\n"+"			obj = ewr_GetElements(oid, f); // Update the list"+"\r\n"+"		}"+"\r\n"+"		ewr_SelectOpt(obj, ar);"+"\r\n"+"		if (change !== false)"+"\r\n"+"			$(obj).first().change();"+"\r\n"+"	}"+"\r\n"+"	if ($.isUndefined(async)) // Async not specified, use default"+"\r\n"+"		async = frm.Lists[nid].Ajax;"+"\r\n"+"	if (!$.isBoolean(async)) { // Non-Ajax"+"\r\n"+"		var ds = frm.Lists[nid].Options;"+"\r\n"+"		addOpt(ds);"+"\r\n"+"		if (/s(ea)?rch$/.test(f.id) && prefix == \"x\") { // Search form"+"\r\n"+"			args[0] = oid.replace(/^x_/, \"y_\");"+"\r\n"+"			ewr_UpdateOpt.apply(this, args); // Update the y_* element"+"\r\n"+"		}"+"\r\n"+"		return exit();"+"\r\n"+"	} else { // Ajax		"+"\r\n"+"		var name = ewr_GetId(obj), data = $(f).find(\"#s_\" + name).val();"+"\r\n"+"		if (!data)"+"\r\n"+"			return exit();"+"\r\n"+"		data += \"&type=updateopt&name=\" + name; // Name of the target element "+"\r\n"+"		if (ewr_IsAutoSuggest(obj) && this.Form) // Auto-Suggest (init form or auto-fill)"+"\r\n"+"			data += \"&v0=\" + encodeURIComponent(ar[0]); // Filter by the current value"+"\r\n"+"		for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields"+"\r\n"+"			data += \"&v\" + (i+1) + \"=\" + encodeURIComponent(arp[i].join(\",\"));"+"\r\n"+"		data += \"&token=\" + EWR_TOKEN; // Add token"+"\r\n"+"		$.post(EWR_LOOKUP_FILE_NAME, data, function(result) {"+"\r\n"+"			addOpt(result || []);"+"\r\n"+"		}, \"json\").always(function() {"+"\r\n"+"			$this.dequeue();"+"\r\n"+"		});"+"\r\n"+"		if (/s(ea)?rch$/.test(f.id) && prefix == \"x\") { // Search form"+"\r\n"+"			args[0] = oid.replace(/^x_/, \"y_\");"+"\r\n"+"			ewr_UpdateOpt.apply(this, args); // Update the y_* element"+"\r\n"+"		}		"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Clear existing options"+"\r\n"+"function ewr_ClearOpt(obj) {"+"\r\n"+"	if (obj.options) { // Selection list"+"\r\n"+"		var lo = 1;"+"\r\n"+"		for (var i = obj.length - 1; i >= lo; i--)"+"\r\n"+"			if (obj.options[i].value.substr(0,2) != \"@@\") // Do not clear custom filter"+"\r\n"+"				obj.options[i] = null;"+"\r\n"+"	} else if (obj.length) { // Radio/Checkbox list"+"\r\n"+"		var $ = jQuery, id = ewr_GetId(obj),"+"\r\n"+"			p = ewr_GetElement(\"dsl_\" + id, obj[0].form);"+"\r\n"+"		$(p).data(\"options\", []).find(\"table.\" + EWR_ITEM_TABLE_CLASSNAME).remove();"+"\r\n"+"		var els = ewr_GetElements(id, p);"+"\r\n"+"		for (var i = 0; i < els.length; i++) {"+"\r\n"+"			var el = els[i];"+"\r\n"+"			var val = el.value;"+"\r\n"+"			if (val.substr(0,2) == \"@@\") { // Add custom filter to array"+"\r\n"+"				var label = ewrDom.getAncestorBy(el, function(lbl) {return ewr_SameText(lbl.tagName, \"LABEL\");});"+"\r\n"+"				var txt = label ? label.innerHTML.replace(/<[^>]*>/g, '') : val;"+"\r\n"+"				ewr_NewOpt(obj, [val, txt], el.form);"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"	} else if (ewr_IsAutoSuggest(obj)) {"+"\r\n"+"		var o = ewr_GetAutoSuggest(obj);"+"\r\n"+"		o._options = [];"+"\r\n"+"		o.input.value = \"\";"+"\r\n"+"		obj.value = \"\";"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get the id or name of an element"+"\r\n"+"// - remove {boolean} remove square brackets, default: true"+"\r\n"+"function ewr_GetId(el, remove) {"+"\r\n"+"	var $ = jQuery, id = \"\";"+"\r\n"+"	if ($.isString(el)) {"+"\r\n"+"		id = el;"+"\r\n"+"	} else {"+"\r\n"+"		id = $(el).attr(\"name\") || $(el).attr(\"id\"); // Use name first (id may have suffix)"+"\r\n"+"	}"+"\r\n"+"	if (remove !== false && /\\[\\]$/.test(id)) // Ends with []"+"\r\n"+"		id = id.substr(0, id.length-2); 	"+"\r\n"+"	return id;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get existing selected values as an array"+"\r\n"+"function ewr_GetOptValues(el, form) {"+"\r\n"+"	var $ = jQuery, obj = ($.isString(el)) ? ewr_GetElements(el, form) : el;"+"\r\n"+"	if (obj.options) { // Selection list"+"\r\n"+"		return $(obj).find(\"option:selected[value!='']\").map(function() {"+"\r\n"+"			return this.value;"+"\r\n"+"		}).get();"+"\r\n"+"	} else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found"+"\r\n"+"		return $(obj).filter(\":checked[value!='{value}']\").map(function() {"+"\r\n"+"			return this.value;"+"\r\n"+"		}).get();"+"\r\n"+"	} else { // Text/Hidden"+"\r\n"+"		return [obj.value];	"+"\r\n"+"	}	"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get form element(s) as single element or array of radio/checkbox"+"\r\n"+"function ewr_GetElements(name, root) {"+"\r\n"+"	var $ = jQuery, root = $.isString(root) ? \"#\" + root : root, selector = \"[name='\" + name + \"']\";"+"\r\n"+"	selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;"+"\r\n"+"	var $els = (root) ? $(root).find(selector) : $(selector); // Exclude template element"+"\r\n"+"	if ($els.length == 1 && $els.is(\":not(:checkbox):not(:radio)\"))"+"\r\n"+"		return $els[0];"+"\r\n"+"	return $els.get();"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Create combobox option "+"\r\n"+"function ewr_NewOpt(obj, ar, f) {"+"\r\n"+"	var $ = jQuery, args = {data: ar, id: ewr_GetId(obj), form: f};"+"\r\n"+"	$(document).trigger(\"newoption\", [args]);	"+"\r\n"+"	ar = args.data;"+"\r\n"+"	var value = ar[0];"+"\r\n"+"	var text = ar[1];	"+"\r\n"+"	for (var i = 2; i <= 4; i++) {"+"\r\n"+"		if (ar[i] && ar[i] != \"\") {"+"\r\n"+"			if (text != \"\")"+"\r\n"+"				text += ewr_ValueSeparator(i-1, obj);"+"\r\n"+"			text += ar[i];"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"	if (obj.options) { // Selection list"+"\r\n"+"		obj.options[obj.length] = new Option(text, value, false, false);"+"\r\n"+"	} else if (obj.length) { // Radio/Checkbox list"+"\r\n"+"		var $ = jQuery, $p = $(ewr_GetElement(\"dsl_\" + ewr_GetId(obj), f)), opts = $p.data(\"options\"); // Parent element		"+"\r\n"+"		if ($p[0] && opts)"+"\r\n"+"			opts[opts.length] = {val:value, lbl:text};"+"\r\n"+"	} else if (ewr_IsAutoSuggest(obj)) { // Auto-Suggest"+"\r\n"+"		var o = ewr_GetAutoSuggest(obj);"+"\r\n"+"		o._options[o._options.length] = {val:value, lbl:text};"+"\r\n"+"	}"+"\r\n"+"	return text;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Render the options"+"\r\n"+"function ewr_RenderOpt(obj, f) {"+"\r\n"+"	var id = ewr_GetId(obj); "+"\r\n"+"	var $ = jQuery, p = ewr_GetElement(\"dsl_\" + id, f), $p = $(p); // Parent element	"+"\r\n"+"	if (!p || !$p.data(\"options\"))"+"\r\n"+"		return;"+"\r\n"+"	var t = ewr_GetElement(\"tp_\" + id, f); 	"+"\r\n"+"	if (!t)"+"\r\n"+"		return;"+"\r\n"+"	var cols = parseInt($p.data(\"repeatcolumn\"), 10) || 5;"+"\r\n"+"	if (EWR_IS_MOBILE)"+"\r\n"+"		cols = 1;"+"\r\n"+"	var $tpl = $(t).contents(), opts = $p.data(\"options\"), type = $tpl.attr(\"type\"),"+"\r\n"+"		$tbl = $(\"<table class=\\\"\" + EWR_ITEM_TABLE_CLASSNAME + \"\\\"></table>\"), $tr;"+"\r\n"+"	if (opts && opts.length) {"+"\r\n"+"		for (var i = 0, cnt = opts.length; i < cnt; i++) {"+"\r\n"+"			if (i % cols == 0)"+"\r\n"+"				$tr = $(\"<tr></tr>\");"+"\r\n"+"			var $el = $tpl.clone(true).val(opts[i].val);"+"\r\n"+"			var $lbl = $(\"<div>\" + opts[i].lbl + \"</div>\").prepend($el.attr(\"id\", $el.attr(\"id\") + \"_\" + i)).wrapInner(\"<label class=\\\"\" + type + \"-inline\\\"></label>\");"+"\r\n"+"			$(\"<td></td>\").append($lbl).appendTo($tr);"+"\r\n"+"			if (i % cols == cols - 1) {"+"\r\n"+"				$tbl.append($tr);"+"\r\n"+"			} else if (i == cnt - 1) { // Last"+"\r\n"+"				for (var j = (i % cols) + 1; j < cols; j++)"+"\r\n"+"					$tr.append(\"<td>&nbsp;</td>\");"+"\r\n"+"				$tbl.append($tr);"+"\r\n"+"			} 		"+"\r\n"+"		}"+"\r\n"+"		$p.append($tbl);		"+"\r\n"+"	}"+"\r\n"+"	$p.data(\"options\", []);		"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get display value separator"+"\r\n"+"function ewr_ValueSeparator(index, obj) {"+"\r\n"+"	return \", \";"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Select combobox option"+"\r\n"+"function ewr_SelectOpt(obj, value_array) {"+"\r\n"+"	if (!obj || !value_array)"+"\r\n"+"		return;"+"\r\n"+"	var $ = jQuery;"+"\r\n"+"	if (obj.options) { // Selection list"+"\r\n"+"		$(obj).val(value_array);"+"\r\n"+"		if (obj.type == \"select-one\" && obj.selectedIndex == -1)"+"\r\n"+"			obj.selectedIndex = 0; // Make sure an option is selected (IE)"+"\r\n"+"	} else if (obj.length) { // Radio/Checkbox list"+"\r\n"+"		if (obj.length == 1 && obj[0].type == \"checkbox\" && obj[0].value != \"{value}\") { // Assume boolean field // P802"+"\r\n"+"			obj[0].checked = (ewr_ConvertToBool(obj[0].value) === ewr_ConvertToBool(value_array[0]));"+"\r\n"+"		} else {"+"\r\n"+"			$(obj).val(value_array);"+"\r\n"+"		}"+"\r\n"+"	} else if (ewr_IsAutoSuggest(obj) && value_array.length == 1) {"+"\r\n"+"		var o = ewr_GetAutoSuggest(obj);"+"\r\n"+"		for (var i = 0, len = o._options.length; i < len; i++) {"+"\r\n"+"			if (o._options[i].val == value_array[0]) {"+"\r\n"+"				obj.value = o._options[i].val;"+"\r\n"+"				o.input.value = o._options[i].lbl;"+"\r\n"+"				break;"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"	} else if (obj.type) {"+"\r\n"+"		obj.value = value_array.join(\",\");"+"\r\n"+"	}"+"\r\n"+""+"\r\n"+"	// Auto-select if only one option"+"\r\n"+"	function isAutoSelect(el) {"+"\r\n"+"		if (!$(el).data(\"autoselect\")) // Is data-autoselect=\"false\""+"\r\n"+"			return false;"+"\r\n"+"		var form = ewr_GetForm(el);"+"\r\n"+"		if (form) {"+"\r\n"+"			if (/s(ea)?rch$/.test(form.id)) // Search forms"+"\r\n"+"				return false;"+"\r\n"+"			var nid = el.id.replace(/^([xy])(\\d*)_/, \"x_\");"+"\r\n"+"			if (nid in ewrForms[form.id].Lists && ewrForms[form.id].Lists[nid].ParentFields.length == 0) // No parent fields"+"\r\n"+"				return false;"+"\r\n"+"			return true;"+"\r\n"+"		}"+"\r\n"+"		return false;"+"\r\n"+"	} "+"\r\n"+"	if (obj.options) { // Selection List"+"\r\n"+"		if (obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected && isAutoSelect(obj)) {"+"\r\n"+"			obj.options[1].selected = true;"+"\r\n"+"		} else if (obj.type == \"select-multiple\" && obj.options.length == 1 && !obj.options[0].selected && isAutoSelect(obj)) {"+"\r\n"+"			obj.options[0].selected = true;"+"\r\n"+"		}"+"\r\n"+"	} else if (obj.length) { // Radio/Checkbox list"+"\r\n"+"		if (obj.length == 2 && isAutoSelect(obj[1]))"+"\r\n"+"			obj[1].checked = true;"+"\r\n"+"	} else if (ewr_IsAutoSuggest(obj)) {"+"\r\n"+"		var o = ewr_GetAutoSuggest(obj);"+"\r\n"+"		if (o._options.length == 1 && isAutoSelect(obj)) {"+"\r\n"+"			obj.value = o._options[0].val;"+"\r\n"+"			o.input.value = o._options[0].lbl;"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Auto-Suggest"+"\r\n"+"//function ewr_AutoSuggest(elValue, frm, forceSelection, maxEntries) {"+"\r\n"+"//	var nid = elValue.replace(/^[xy](\\d*|\\$rowindex\\$)_/, \"x_\");"+"\r\n"+"//	var rowindex = RegExp.$1;"+"\r\n"+"//	var oEmpty = {ac:{}}; // Empty Auto-Suggest object"+"\r\n"+"//	if (rowindex == \"$rowindex$\")"+"\r\n"+"//		return oEmpty;"+"\r\n"+"//	var form = frm.GetForm(); "+"\r\n"+"//	var elInput = ewr_GetElement(\"sx_\" + elValue, form);"+"\r\n"+"//	if (!elInput)"+"\r\n"+"//		return oEmpty;"+"\r\n"+"//	var elContainer = ewr_GetElement(\"sc_\" + elValue, form);"+"\r\n"+"//	var elSQL = ewr_GetElement(\"q_\" + elValue, form);"+"\r\n"+"//	var elMessage = ewr_GetElement(\"em_\" + elValue, form);	"+"\r\n"+"//	var elParent = frm.Lists[nid].ParentFields.slice(); // Clone"+"\r\n"+"//	for (var i = 0, len = elParent.length; i < len; i++)"+"\r\n"+"//		elParent[i] = elParent[i].replace(/^x_/, \"x\" + rowindex + \"_\");"+"\r\n"+"//	this.input = elInput;"+"\r\n"+"//	this.element = ewr_GetElement(elValue, form);"+"\r\n"+"//	this._options = [];"+"\r\n"+"//	var self = this, $ = jQuery, $input = $(this.input), $element = $(this.element);"+"\r\n"+"//"+"\r\n"+"//	// Format display value (Note: Override this function if link field <> display field)"+"\r\n"+"//	this.formatResult = function(ar) {"+"\r\n"+"//		return ar[0];"+"\r\n"+"//	};"+"\r\n"+"//"+"\r\n"+"//	// Generate request"+"\r\n"+"//	this.generateRequest = function(sQuery) {"+"\r\n"+"//		var data = elSQL.value;"+"\r\n"+"//		if (elParent.length > 0) {"+"\r\n"+"//			for (var i = 0, len = elParent.length; i < len; i++) {"+"\r\n"+"//				var arp = ewr_GetOptValues(elParent[i], form);"+"\r\n"+"//				data += \"&v\" + (i+1) + \"=\" + encodeURIComponent(arp.join(\",\"));"+"\r\n"+"//			}"+"\r\n"+"//		}"+"\r\n"+"//		return \"type=autosuggest&name=\" + this.element.name + \"&q=\" + sQuery + \"&\" + data; "+"\r\n"+"//	};"+"\r\n"+"//"+"\r\n"+"//	// Set the selected item to the actual value field"+"\r\n"+"//	this.setValue = function(v) {"+"\r\n"+"//		v = v || $input.val();"+"\r\n"+"//		var ar = jQuery.grep($input.data(\"results\"), function(item) {"+"\r\n"+"//			return item[item.length - 1] == v;"+"\r\n"+"//		});"+"\r\n"+"//		if (ar.length == 0) { // No results"+"\r\n"+"//			if (forceSelection && v) { // Query not empty						"+"\r\n"+"//				$input.val(\"\").closest(\".control-group\").addClass(\"error\");"+"\r\n"+"//				$(elMessage).show();"+"\r\n"+"//				$element.val(\"\").change();"+"\r\n"+"//				return;"+"\r\n"+"//			}"+"\r\n"+"//		} else {"+"\r\n"+"//			var i = $input.data(\"typeahead\").$menu.find('.active').index();"+"\r\n"+"//			v = $input.data(\"results\")[i][0];"+"\r\n"+"//		}				"+"\r\n"+"//		$element.val(v).change();"+"\r\n"+"//	};"+"\r\n"+"//"+"\r\n"+"//	// Create Typeahead	"+"\r\n"+"//	$input.prop(\"autocomplete\", \"off\").typeahead({	"+"\r\n"+"//		minLength: 1,"+"\r\n"+"//		items: maxEntries,"+"\r\n"+"//"+"\r\n"+"//		// Matcher"+"\r\n"+"//		matcher: function(item) {"+"\r\n"+"//	      return true;"+"\r\n"+"//	    },"+"\r\n"+"//"+"\r\n"+"//		// Sorter"+"\r\n"+"//		sorter: function (items) {"+"\r\n"+"//			return items;"+"\r\n"+"//		},"+"\r\n"+"//"+"\r\n"+"//		// Source"+"\r\n"+"//		source: function(query, process) {"+"\r\n"+"//			$.post(EWR_LOOKUP_FILE_NAME, self.generateRequest(query), function(data) {"+"\r\n"+"//				$input.data(\"results\", data || []);"+"\r\n"+"//				var ar = $.map($input.data(\"results\"), function(item) {"+"\r\n"+"//					return item[item.length] = self.formatResult(item);"+"\r\n"+"//				});"+"\r\n"+"//				if (ar.length == 0)"+"\r\n"+"//					$input.data(\"typeahead\").$menu.html(\"\");"+"\r\n"+"//				process(ar);"+"\r\n"+"//			}, \"json\");		"+"\r\n"+"//		},"+"\r\n"+"//"+"\r\n"+"//		// Updater"+"\r\n"+"//		updater: function(item) {"+"\r\n"+"//			self.setValue(item);"+"\r\n"+"//			return item;"+"\r\n"+"//		}		"+"\r\n"+"//	}).blur(function(e) {"+"\r\n"+"//		if ($input.data(\"typeahead\").shown)"+"\r\n"+"//			return;"+"\r\n"+"//		self.setValue();"+"\r\n"+"//	}).focus(function(e) {"+"\r\n"+"//		$input.closest(\".control-group\").removeClass(\"error\");"+"\r\n"+"//		$(elMessage).hide();"+"\r\n"+"//	});"+"\r\n"+"//	this.ac = $input.data(\"typeahead\");	"+"\r\n"+"//}"+"\r\n"+""+"\r\n"+"// Auto-Suggest"+"\r\n"+"function ewr_AutoSuggest(elValue, frm, forceSelection) {"+"\r\n"+"	var nid = elValue.replace(/^[xy](\\d*|\\$rowindex\\$)_/, \"x_\");"+"\r\n"+"	var rowindex = RegExp.$1;"+"\r\n"+"	var oEmpty = {typeahead:{}}; // Empty Auto-Suggest object"+"\r\n"+"	if (rowindex == \"$rowindex$\")"+"\r\n"+"		return oEmpty;"+"\r\n"+"	var form = frm.GetForm(); "+"\r\n"+"	var elInput = ewr_GetElement(\"sx_\" + elValue, form);"+"\r\n"+"	if (!elInput)"+"\r\n"+"		return oEmpty;"+"\r\n"+"	var elContainer = ewr_GetElement(\"sc_\" + elValue, form);"+"\r\n"+"	var elSQL = ewr_GetElement(\"q_\" + elValue, form);"+"\r\n"+"	var elParent = frm.Lists[nid].ParentFields.slice(); // Clone"+"\r\n"+"	for (var i = 0, len = elParent.length; i < len; i++)"+"\r\n"+"		elParent[i] = elParent[i].replace(/^x_/, \"x\" + rowindex + \"_\");"+"\r\n"+"	this.input = elInput;"+"\r\n"+"	this.element = ewr_GetElement(elValue, form);"+"\r\n"+"	this.highlight = true;"+"\r\n"+"	this.hint = true;"+"\r\n"+"	this.minLength = 1;"+"\r\n"+"	this.limit = EWR_AUTO_SUGGEST_MAX_ENTRIES;"+"\r\n"+"	this.templates = null; // Custom Templates"+"\r\n"+"	this._options = [];"+"\r\n"+"	var self = this, $ = jQuery, $input = $(this.input), $element = $(this.element);"+"\r\n"+"	this.$input = $input;"+"\r\n"+""+"\r\n"+"	// Format display value in textbox"+"\r\n"+"	this.formatResult = function(ar) {"+"\r\n"+"		var dv = ar[1];"+"\r\n"+"		if (dv) {"+"\r\n"+"			for (var i = 2; i <= 4; i++)"+"\r\n"+"				dv += (ar[i]) ? ewr_ValueSeparator(i - 1, elValue) + ar[i] : \"\";"+"\r\n"+"			return dv;"+"\r\n"+"		}"+"\r\n"+"		return ar[0];"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Set the selected item to the actual value field"+"\r\n"+"	this.setValue = function(v) {"+"\r\n"+"		v = v || $input.val();"+"\r\n"+"		var ar = $input.data(\"results\") ? $.map($input.data(\"results\"), function(item, i) { "+"\r\n"+"			if (item[\"value\"] == v) // Value exists"+"\r\n"+"				return i; // Return the index"+"\r\n"+"		}) : [];"+"\r\n"+"		if (ar.length == 0) { // No results"+"\r\n"+"			if (this._options && this._options.length && this._options[this._options.length - 1].lbl == v) // Value added by Add Option dialog"+"\r\n"+"				return;"+"\r\n"+"			if (forceSelection && v) { // Query not empty"+"\r\n"+"				$input.typeahead(\"val\", \"\").attr(\"placeholder\", ewLanguage.Phrase(\"ValueNotExist\"))"+"\r\n"+"					.parent().append('<span class=\"glyphicon glyphicon-warning-sign form-control-feedback\"></span>')"+"\r\n"+"					.closest(\".form-group,[id^='el_']\").addClass(\"has-error has-feedback\");"+"\r\n"+"				$element.val(\"\").change();"+"\r\n"+"				return;"+"\r\n"+"			}"+"\r\n"+"		} else {"+"\r\n"+"			if (!/srch$/.test(form.id) || forceSelection) { // Force selection or not search form"+"\r\n"+"				var i = ar[0]; // Get the index"+"\r\n"+"				if (i > -1)"+"\r\n"+"					v = $input.data(\"results\")[i][0];"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"		$element.val(v).change(); // Set field value"+"\r\n"+"	};"+"\r\n"+""+"\r\n"+"	// Generate request"+"\r\n"+"	this.generateRequest = function() {"+"\r\n"+"		var data = elSQL.value;"+"\r\n"+"		if (elParent.length > 0) {"+"\r\n"+"			for (var i = 0, len = elParent.length; i < len; i++) {"+"\r\n"+"				var arp = ewr_GetOptValues(elParent[i], form);"+"\r\n"+"				data += \"&v\" + (i+1) + \"=\" + encodeURIComponent(arp.join(\",\"));"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"		return \"type=autosuggest&name=\" + this.element.name + \"&\" + data;"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Add events"+"\r\n"+"	$input.on(\"typeahead:selected\", function(e, d) {"+"\r\n"+"		self.setValue(d.text);"+"\r\n"+"	}).blur(function(e) {"+"\r\n"+"		var ta = $input.data(\"ttTypeahead\");"+"\r\n"+"		if (ta && ta.dropdown.isOpen) { // If dropdown is opened"+"\r\n"+"			var i = $input.data(\"ttTypeahead\").dropdown._getCursor().index();"+"\r\n"+"			if (i > -1) { // A suggestion is highlighted"+"\r\n"+"				var val = $input.data(\"results\")[i][1];"+"\r\n"+"				$input.typeahead(\"val\", val);		"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"		self.setValue();"+"\r\n"+"	}).focus(function(e) {"+"\r\n"+"		$input.attr(\"placeholder\", $element.attr(\"placeholder\"))"+"\r\n"+"			.closest(\".form-group,[id^='el_']\").removeClass(\"has-error has-feedback\")"+"\r\n"+"			.find(\".form-control-feedback\").remove();"+"\r\n"+"	});"+"\r\n"+""+"\r\n"+"	$element.data(\"autosuggest\", this);"+"\r\n"+"	"+"\r\n"+"	// Create Bloodhound and Typeahead"+"\r\n"+"	$(function() {"+"\r\n"+"		// Bloodhound"+"\r\n"+"		var o = {"+"\r\n"+"			datumTokenizer: function(d) {"+"\r\n"+"				return Bloodhound.tokenizers.whitespace(d.value);"+"\r\n"+"			},"+"\r\n"+"			queryTokenizer: Bloodhound.tokenizers.whitespace,"+"\r\n"+"			limit: self.limit,"+"\r\n"+"			remote: {"+"\r\n"+"				url: EWR_LOOKUP_FILE_NAME,"+"\r\n"+"				replace: function(url, query) {"+"\r\n"+"					this.ajax.data = self.generateRequest();"+"\r\n"+"					return url + \"?q=\" + encodeURIComponent(query) + \"&rnd=\" + ewr_Random();"+"\r\n"+"				},"+"\r\n"+"				ajax: { type: \"POST\", data: self.generateRequest() },"+"\r\n"+"				filter: function(data) {"+"\r\n"+"					$input.data(\"results\", data || []);"+"\r\n"+"					var ar = $.map($input.data(\"results\"), function(item) {"+"\r\n"+"						var val = item[\"value\"] = self.formatResult(item); // Format the item and save as property"+"\r\n"+"						return { lf: item[0], df1: item[1], df2: item[2], df3: item[3], df4: item[4], value: val }; // Return as object"+"\r\n"+"					});"+"\r\n"+"					return ar;"+"\r\n"+"				}"+"\r\n"+"			}"+"\r\n"+"		};"+"\r\n"+"		// Trigger \"bloodhound\" event"+"\r\n"+"		$element.trigger(\"bloodhound\", [o]);"+"\r\n"+"		// Create Bloodhound"+"\r\n"+"		self.engine = new Bloodhound(o);"+"\r\n"+"		self.engine.initialize();"+"\r\n"+"		// Typeahead"+"\r\n"+"		var args = [{"+"\r\n"+"			highlight: self.highlight,"+"\r\n"+"			minLength: self.minLength,"+"\r\n"+"			hint: self.hint"+"\r\n"+"		},"+"\r\n"+"		{"+"\r\n"+"			name: frm.ID + \"-\" + elValue,"+"\r\n"+"			source: self.engine.ttAdapter(),"+"\r\n"+"			templates: self.templates"+"\r\n"+"		}];"+"\r\n"+"		// Trigger \"typeahead\" event"+"\r\n"+"		$element.trigger(\"typeahead\", [args]);"+"\r\n"+"		// Create Typeahead"+"\r\n"+"		$input.typeahead.apply($input, args);"+"\r\n"+"		$input.off(\"blur.tt\");"+"\r\n"+"		self.typeahead = $input.data(\"ttTypeahead\");"+"\r\n"+"		self.typeahead.$node.css(\"display\", \"\").addClass(\"ewAutoSuggest\");"+"\r\n"+"	});"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get first element (not necessarily form element)"+"\r\n"+"function ewr_GetElement(name, root) {"+"\r\n"+"	var $ = jQuery, root = $.isString(root) ? \"#\" + root : root,"+"\r\n"+"		selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";"+"\r\n"+"	return (root) ? $(root).find(selector)[0] : $(selector).first()[0];"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if same text"+"\r\n"+"function ewr_SameText(o1, o2) {"+"\r\n"+"	return (String(o1).toLowerCase() == String(o2).toLowerCase());"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if same string"+"\r\n"+"function ewr_SameStr(o1, o2) {"+"\r\n"+"	return (String(o1) == String(o2));"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if an element is in array"+"\r\n"+"function ewr_InArray(el, ar) {"+"\r\n"+"	if (!ar)"+"\r\n"+"		return -1;	"+"\r\n"+"	for (var i = 0, len = ar.length; i < len; i++) {"+"\r\n"+"		if (ewr_SameStr(ar[i], el))"+"\r\n"+"			return i;"+"\r\n"+"	}		"+"\r\n"+"	return -1;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Submit language form"+"\r\n"+"//###function ewr_SubmitLanguageForm(f) {"+"\r\n"+"//	if (!f || !f.language || !f.language.value)"+"\r\n"+"//		return;"+"\r\n"+"//	var url = window.location.href;"+"\r\n"+"//	if (window.location.search) {"+"\r\n"+"//		var query = window.location.search;"+"\r\n"+"//		var param = {};			"+"\r\n"+"//		query.replace(/(?:\\?|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {"+"\r\n"+"//			if ($1)"+"\r\n"+"//				param[$1] = $2;"+"\r\n"+"//		});"+"\r\n"+"//		param[\"language\"] = encodeURIComponent(f.language.value);"+"\r\n"+"//		var q = \"?\";"+"\r\n"+"//		for (var i in param)"+"\r\n"+"//			q += i + \"=\" + param[i] + \"&\";"+"\r\n"+"//		q = q.substr(0, q.length-1);"+"\r\n"+"//		var p = url.lastIndexOf(window.location.search);"+"\r\n"+"//		url = url.substr(0, p) + q;			"+"\r\n"+"//	} else {"+"\r\n"+"//		url += \"?language=\" + encodeURIComponent(f.language.value);"+"\r\n"+"//	}"+"\r\n"+"//	window.location = url;"+"\r\n"+"//}"+"\r\n"+""+"\r\n"+"// Set language"+"\r\n"+"function ewr_SetLanguage(el) {"+"\r\n"+"	var $ = jQuery, val = $(el).val();"+"\r\n"+"	if (!val)"+"\r\n"+"		return;"+"\r\n"+"	var url = window.location.href;"+"\r\n"+"	if (window.location.search) {"+"\r\n"+"		var query = window.location.search;"+"\r\n"+"		var param = {};			"+"\r\n"+"		query.replace(/(?:\\?|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {"+"\r\n"+"			if ($1)"+"\r\n"+"				param[$1] = $2;"+"\r\n"+"		});"+"\r\n"+"		param[\"language\"] = encodeURIComponent(val);"+"\r\n"+"		var q = \"?\";"+"\r\n"+"		for (var i in param)"+"\r\n"+"			q += i + \"=\" + param[i] + \"&\";"+"\r\n"+"		q = q.substr(0, q.length-1);"+"\r\n"+"		var p = url.lastIndexOf(window.location.search);"+"\r\n"+"		url = url.substr(0, p) + q;			"+"\r\n"+"	} else {"+"\r\n"+"		url += \"?language=\" + encodeURIComponent(val);"+"\r\n"+"	}"+"\r\n"+"	window.location = url;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get Ctrl key for multiple column sort"+"\r\n"+"function ewr_Sort(e, url, type) {"+"\r\n"+"	if (type == 2 && e.ctrlKey)"+"\r\n"+"		url += \"&ctrl=1\";"+"\r\n"+"	location = url;"+"\r\n"+"	return true;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if hidden textbox (Auto-Suggest)"+"\r\n"+"function ewr_IsAutoSuggest(el) {"+"\r\n"+"	var $ = jQuery, $el = $(el);"+"\r\n"+"	return (el && $el.is(\":text:hidden\") && $el.data(\"typeahead\"));	"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Get AutoSuggest instance"+"\r\n"+"function ewr_GetAutoSuggest(el) {"+"\r\n"+"	return ewrForms(el).AutoSuggests[el.id];"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Set focus"+"\r\n"+"function ewr_SetFocus(obj) {"+"\r\n"+"	if (!obj)"+"\r\n"+"		return;"+"\r\n"+"	var $ = jQuery, $obj = $(obj);"+"\r\n"+"	if (!obj.options && obj.length) { // Radio/Checkbox list 	"+"\r\n"+"		obj = $obj.filter(\"[value!='{value}']\")[0];"+"\r\n"+"	} else if (ewr_IsAutoSuggest(obj)) { // Auto-Suggest"+"\r\n"+"		obj = ewr_GetAutoSuggest(obj).input; "+"\r\n"+"	}	"+"\r\n"+"	var $cg = $obj.closest(\".form-group\").addClass(\"has-error\");"+"\r\n"+"	$obj.focus().select().one(\"click keypress\", function() {"+"\r\n"+"		$cg.removeClass(\"has-error\");"+"\r\n"+"	});"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"function ewr_OnError(frm, el, msg) {"+"\r\n"+"	alert(msg); "+"\r\n"+"	jQuery.later(100, this, \"ewr_SetFocus\", el); // Focus later to make sure editors are created"+"\r\n"+"	return false;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check if object has value"+"\r\n"+"function ewr_HasValue(obj) {"+"\r\n"+"	return ewr_GetOptValues(obj).join(\"\") != \"\";"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Encode html"+"\r\n"+"function ewr_HtmlEncode(text) {"+"\r\n"+"	var str = text;"+"\r\n"+"	str = str.replace(/&/g, '&amp');"+"\r\n"+"	str = str.replace(/\\\"/g, '&quot;');"+"\r\n"+"	str = str.replace(/</g, '&lt;');"+"\r\n"+"	str = str.replace(/>/g, '&gt;'); "+"\r\n"+"	return str;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Extended basic search clear form"+"\r\n"+"function ewr_ClearForm(form){"+"\r\n"+"	var $ = jQuery;"+"\r\n"+"	$(form).find(\"[id^=sv_],[id^=sv2_]\").each(function() {"+"\r\n"+"		if (this.type == \"checkbox\" || this.type == \"radio\") {"+"\r\n"+"			this.checked = false;"+"\r\n"+"		} else if (this.type == \"select-one\") {"+"\r\n"+"			this.selectedIndex = 0;"+"\r\n"+"		} else if (this.type == \"select-multiple\") {"+"\r\n"+"			$(this).find(\"option\").prop(\"selected\", false);"+"\r\n"+"		} else if (this.type == \"text\" || this.type == \"textarea\") {"+"\r\n"+"			this.value = \"\";"+"\r\n"+"			if (ewr_IsAutoSuggest(this))"+"\r\n"+"				ewr_GetAutoSuggest(this).input.value = \"\";"+"\r\n"+"		}"+"\r\n"+"	});"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Stop propagation"+"\r\n"+"function ewr_StopPropagation(e) {"+"\r\n"+"	if (e.stopPropagation) {"+"\r\n"+"		e.stopPropagation();"+"\r\n"+"	} else {"+"\r\n"+"		e.cancelBubble = true;"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Setup table"+"\r\n"+"//###function ewr_SetupTable(index, tbl, force) {"+"\r\n"+"//	var $ = jQuery, $tbl = $(tbl), $rows = $(tbl.rows);"+"\r\n"+"//	if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0)"+"\r\n"+"//		return;	"+"\r\n"+"//	var rows = $rows.map(function() {"+"\r\n"+"//		$(this.cells).removeClass(EWR_TABLE_LAST_ROW_CLASSNAME).last().addClass(EWR_TABLE_LAST_COL_CLASSNAME); // Cell of last column"+"\r\n"+"//		return this;"+"\r\n"+"//	}).get();"+"\r\n"+"//	if (rows.length) {"+"\r\n"+"//		var r = rows[rows.length - 1];"+"\r\n"+"//		$(r.cells).each(function() {"+"\r\n"+"//			$(this).addClass(EWR_TABLE_LAST_ROW_CLASSNAME);	"+"\r\n"+"//		});"+"\r\n"+"//	}"+"\r\n"+"//	ewr_SetupGrid(index, $tbl.closest(\".\" + EWR_GRID_CLASSNAME)[0], force);"+"\r\n"+"//	$tbl.data(\"isset\", true);"+"\r\n"+"//}"+"\r\n"+""+"\r\n"+"// Setup table"+"\r\n"+"function ewr_SetupTable(index, tbl, force) {"+"\r\n"+"	var $ = jQuery, $tbl = $(tbl), $rows = $(tbl.rows);"+"\r\n"+"	if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0)"+"\r\n"+"		return;"+"\r\n"+"	var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows"+"\r\n"+"	var rows = $rows.filter(\":not(.\" + EWR_ITEM_TEMPLATE_CLASSNAME + \"):not(:hidden)\").each(function() {"+"\r\n"+"		$(this.cells).removeClass(EWR_TABLE_LAST_ROW_CLASSNAME).last().addClass(EWR_TABLE_LAST_COL_CLASSNAME); // Cell of last column"+"\r\n"+"	}).get();"+"\r\n"+"	var div = $tbl.parentsUntil(\".ewGrid\", \".table-responsive\")[0];"+"\r\n"+"	if (rows.length) {"+"\r\n"+"		for (var i = 1; i <= n; i++) {"+"\r\n"+"			var r = rows[rows.length - i]; // Last rows"+"\r\n"+"			$(r.cells).each(function() {"+"\r\n"+"				if (this.rowSpan == i) // Cell of last row"+"\r\n"+"					$(this).addClass(EWR_TABLE_LAST_ROW_CLASSNAME)"+"\r\n"+"						.toggleClass(EWR_TABLE_BORDER_BOTTOM_CLASSNAME, !!div && div.offsetHeight > tbl.offsetHeight);"+"\r\n"+"			});"+"\r\n"+"		}"+"\r\n"+"	}"+"\r\n"+"//###	var form = $tbl.closest(\"form\")[0];"+"\r\n"+"//	var attach = form && $(form.elements).filter(\"input#a_list:not([value^=grid])\").length > 0;"+"\r\n"+"//	$(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)"+"\r\n"+"//		.filter(\":not(.\" + EWR_ITEM_TEMPLATE_CLASSNAME + \"):not(.\" + EWR_TABLE_PREVIEW_ROW_CLASSNAME + \"):not(:hidden)\")"+"\r\n"+"//		.each(function(i) {"+"\r\n"+"//			var $r = $(this);"+"\r\n"+"//			if (attach && !$r.data(\"isset\")) {"+"\r\n"+"//				if (EWR_InArray($r.data(\"rowtype\"), [EWR_ROWTYPE_ADD, EWR_ROWTYPE_EDIT]) > -1) // Add/Edit row"+"\r\n"+"//					$r.on(\"mouseover\", function() {this.edit = true;}).addClass(EWR_TABLE_EDIT_ROW_CLASSNAME);"+"\r\n"+"//				$r.on(\"mouseover\", EWR_MouseOver).on(\"mouseout\", EWR_MouseOut).on(\"click\", EWR_Click);"+"\r\n"+"//				$r.data(\"isset\", true);"+"\r\n"+"//			}"+"\r\n"+"//			var sw = i % (2 * n) < n;"+"\r\n"+"//			$r.toggleClass(EWR_TABLE_ROW_CLASSNAME, sw).toggleClass(EWR_TABLE_ALT_ROW_CLASSNAME, !sw);"+"\r\n"+"//		});"+"\r\n"+"	ewr_SetupGrid(index, $tbl.closest(\".\" + EWR_GRID_CLASSNAME)[0], force);"+"\r\n"+"	$tbl.data(\"isset\", true);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Setup grid //###"+"\r\n"+"//function ewr_SetupGrid(index, grid, force) {"+"\r\n"+"//	var $ = jQuery, $grid = $(grid);"+"\r\n"+"//	if (!grid || !force && $grid.data(\"isset\"))"+"\r\n"+"//		return;"+"\r\n"+"//	//var rowcnt = $grid.find(\"table.\" + EWR_TABLE_CLASSNAME + \" > tbody:first > tr\").length;"+"\r\n"+"//	var rowcnt = $grid.find(\"table.\" + EWR_TABLE_CLASSNAME + \" > thead:first > tr\").length;"+"\r\n"+"//	var $divupper = $grid.find(\"div.ewGridUpperPanel\");"+"\r\n"+"//	var $divmiddle = $grid.find(\"div.ewGridMiddlePanel\");"+"\r\n"+"//	var $divlower = $grid.find(\"div.ewGridLowerPanel\");"+"\r\n"+"//	var noborder = rowcnt == 0; "+"\r\n"+"//	if ($divupper[0] && $divlower[0]) {"+"\r\n"+"//		$divlower.toggleClass(\"hide\", rowcnt == 0);"+"\r\n"+"//		$divupper.toggleClass(\"ewNoBorderBottom\", noborder);"+"\r\n"+"//	} else if ($divupper[0] && !$divlower[0]) {"+"\r\n"+"//		$divupper.toggleClass(\"ewNoBorderBottom\", noborder);		"+"\r\n"+"//	} else if ($divlower[0] && !$divupper[0]) {"+"\r\n"+"//		$divlower.toggleClass(\"ewNoBorderTop\", noborder);"+"\r\n"+"//	}"+"\r\n"+"//	$grid.data(\"isset\", true);"+"\r\n"+"//}"+"\r\n"+""+"\r\n"+"// Setup grid"+"\r\n"+"function ewr_SetupGrid(index, grid, force) {"+"\r\n"+"	var $ = jQuery, $grid = $(grid);"+"\r\n"+"	if (!grid || !force && $grid.data(\"isset\"))"+"\r\n"+"		return;"+"\r\n"+"	$grid.find(\".ewGridUpperPanel, .ewGridLowerPanel\").each(function() {"+"\r\n"+"		var $this = $(this);		"+"\r\n"+"		if (!$this.text().trim()) $this.hide();"+"\r\n"+"	});"+"\r\n"+"	var	rowcnt = $grid.find(\"table.\" + EWR_TABLE_CLASSNAME + \" > tbody:first > tr\").length;"+"\r\n"+"	if (rowcnt == 0 && !$grid.find(\".ewGridUpperPanel, .ewGridLowerPanel\")[0])"+"\r\n"+"		$grid.hide();"+"\r\n"+"	$grid.data(\"isset\", true);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Popover Start Drag event"+"\r\n"+"function ewr_DragStart(ev, dd) {"+"\r\n"+"	var $ = jQuery, $this = $(this), $body = $(\"body\");"+"\r\n"+"	dd.limit = $body.offset();"+"\r\n"+"	dd.limit.bottom = dd.limit.top + $body.outerHeight() - $this.outerHeight();"+"\r\n"+"	dd.limit.right = dd.limit.left + $body.outerWidth() - $this.outerWidth();"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Popover Drag event"+"\r\n"+"function ewr_Drag(ev, dd){"+"\r\n"+"	var $ = jQuery, $this = $(this), $body = $(\"body\"),"+"\r\n"+"		ml = parseInt($this.css(\"margin-left\"), 10),"+"\r\n"+"		mt = parseInt($this.css(\"margin-top\"), 10);"+"\r\n"+"	var x = ($this.outerWidth() > $body.outerWidth()) ? Math.max(dd.limit.left - ml, dd.offsetX - ml) :"+"\r\n"+"		Math.min(dd.limit.right - ml, Math.max(dd.limit.left - ml, dd.offsetX - ml));"+"\r\n"+"	var y = ($this.outerHeight() > $body.outerHeight()) ? Math.max(dd.limit.top - mt, dd.offsetY - mt) :"+"\r\n"+"		Math.min(dd.limit.bottom - mt, Math.max(dd.limit.top - mt, dd.offsetY - mt));"+"\r\n"+"	$this.css({	top: y, left: x });"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Show dialog for email sending"+"\r\n"+"// Argument object members:"+"\r\n"+"// - lnk {string} email link id"+"\r\n"+"// - hdr {string} dialog header"+"\r\n"+"// - url {string} URL of the email script"+"\r\n"+"// - exportid - export id"+"\r\n"+"// - el - element"+"\r\n"+"function ewr_EmailDialogShow(oArg) {"+"\r\n"+"	var $ = jQuery, $dlg = ewrEmailDialog || $(\"#ewrEmailDialog\");"+"\r\n"+"	if (!$dlg)"+"\r\n"+"		return;"+"\r\n"+"	var $f = $dlg.find(\".modal-body form\").data(\"args\", oArg);"+"\r\n"+"	var frm = $f.data(\"form\"); "+"\r\n"+"	if (!frm) {"+"\r\n"+"		frm = new ewr_Form($f.attr(\"id\"));"+"\r\n"+"		frm.Validate = function() {"+"\r\n"+"			var elm, fobj = this.GetForm(); "+"\r\n"+"			elm = fobj.elements[\"sender\"];"+"\r\n"+"			if (elm && !ewr_HasValue(elm))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterSenderEmail\"));"+"\r\n"+"			if (elm && !ewr_CheckEmailList(elm.value, 1))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterProperSenderEmail\"));"+"\r\n"+"			elm = fobj.elements[\"recipient\"];"+"\r\n"+"			if (elm && !ewr_HasValue(elm))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterRecipientEmail\"));"+"\r\n"+"			if (elm && !ewr_CheckEmailList(elm.value, EWR_MAX_EMAIL_RECIPIENT))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterProperRecipientEmail\"));"+"\r\n"+"			elm = fobj.elements[\"cc\"];"+"\r\n"+"			if (elm && !ewr_CheckEmailList(elm.value, EWR_MAX_EMAIL_RECIPIENT))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterProperCcEmail\"));"+"\r\n"+"			elm = fobj.elements[\"bcc\"];"+"\r\n"+"			if (elm && !ewr_CheckEmailList(elm.value, EWR_MAX_EMAIL_RECIPIENT))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterProperBccEmail\"));"+"\r\n"+"			elm = fobj.elements[\"subject\"];"+"\r\n"+"			if (elm && !ewr_HasValue(elm))"+"\r\n"+"				return this.OnError(elm, ewLanguage.Phrase(\"EnterSubject\"));"+"\r\n"+"			return true;"+"\r\n"+"		};"+"\r\n"+"		frm.Submit = function() {"+"\r\n"+"			var fobj = this.GetForm(), $fobj = $(fobj), args = $fobj.data(\"args\");		"+"\r\n"+"			var exporttype = ewr_GetOptValues(\"contenttype\", fobj);"+"\r\n"+"			if (args.url && args.exportid && exporttype == \"html\") {"+"\r\n"+"				if (!this.Validate())"+"\r\n"+"					return false;				"+"\r\n"+"				$dlg.modal(\"hide\");"+"\r\n"+"				ewr_ExportCharts(args.el, args.url, args.exportid, fobj);"+"\r\n"+"			} else {	"+"\r\n"+"				var data = $fobj.serialize();"+"\r\n"+"				data += \"&token=\" + EWR_TOKEN; // Add token"+"\r\n"+"				$.post(fobj.action, data, function(result) {"+"\r\n"+"					ewr_ShowMessage(result);"+"\r\n"+"				});"+"\r\n"+"				$dlg.modal(\"hide\");				"+"\r\n"+"			}"+"\r\n"+"			return false;"+"\r\n"+"		};		"+"\r\n"+"		$f.data(\"form\", frm);"+"\r\n"+"	}"+"\r\n"+"	$dlg.modal(\"hide\").find(\".modal-title\").html(oArg.hdr);"+"\r\n"+"	$dlg.find(\".modal-footer .btn-primary\").unbind().click(function(e) {"+"\r\n"+"		e.preventDefault();"+"\r\n"+"		if (frm.Submit())"+"\r\n"+"			$dlg.modal(\"hide\");"+"\r\n"+"	});"+"\r\n"+"	ewrEmailDialog = $dlg.modal(\"show\");"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Ajax query"+"\r\n"+"// Prerequisite: Output encrypted SQL by Client Script or Startup Script, e.g."+"\r\n"+"//   var sql = \"<?php echo ewr_Encrypt(\"SELECT xxx FROM xxx WHERE xxx = '{query_value}'\") ?>\";"+"\r\n"+"//   - where \"{query_value}\" will be replaced by runtime value."+"\r\n"+"//   - s {string} Encrypted SQL"+"\r\n"+"//   - data {string|object} string to replace to replace \"{query_value}\" in SQL, or"+"\r\n"+"//     object (e.g. {\"q\": xxx, \"q1\": xxx, \"q2\": yyy}) to replace additional values \"{query_value_n}\" in SQL"+"\r\n"+"//   - callback {function} callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request"+"\r\n"+"// Note: Return value is string or array of string."+"\r\n"+"function ewr_Ajax(sql, data, callback) {"+"\r\n"+"	if (!sql)"+"\r\n"+"		return undefined;"+"\r\n"+"	var $ = jQuery, obj = { s: sql };"+"\r\n"+"	obj = $.extend(obj, ($.isObject(data)) ? data : { q: data });			"+"\r\n"+"	if ($.isFunction(callback)) { // Async"+"\r\n"+"		$.post(EWR_LOOKUP_FILE_NAME, obj, callback, \"json\");"+"\r\n"+"	} else { // Sync"+"\r\n"+"		var result = $.ajax({ async: false, type: \"POST\", data: obj }).responseText;"+"\r\n"+"		var aResults = $.parseJSON(result);	      "+"\r\n"+""+"\r\n"+"		// Check if single row or single value"+"\r\n"+"		if (aResults.length == 1) { // Single row"+"\r\n"+"			aResults = aResults[0];"+"\r\n"+"			if ($.isArray(aResults) && aResults.length == 1) { // Single column"+"\r\n"+"				return aResults[0]; // Return a value"+"\r\n"+"			} else {"+"\r\n"+"				return aResults; // Return a row"+"\r\n"+"			}	"+"\r\n"+"		}"+"\r\n"+"		return aResults;"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Show drill down"+"\r\n"+"function ewr_ShowDrillDown(e, obj, url, id, hdr) {"+"\r\n"+"	if (e ? e.ctrlKey : window._ctrlKey) {"+"\r\n"+"		ewr_Redirect(url.replace(\"?d=1&\", \"?d=2&\")); // Change d parameter to 2"+"\r\n"+"		return false;"+"\r\n"+"	}"+"\r\n"+"	var $ = jQuery, pos = ($.isString(obj)) ? \"top\" : \"bottom\", //  isString(obj) => chart"+"\r\n"+"		$obj = ($.isString(obj)) ? $(\"#\" + obj) : $(obj);"+"\r\n"+"	$obj.tooltip(\"hide\");  "+"\r\n"+"	var args = {\"obj\": $obj[0], \"id\": id, \"url\": url, \"hdr\": hdr};"+"\r\n"+"	$(document).trigger(\"drilldown\", [args]);"+"\r\n"+"	var ar = args.url.split(\"?\");"+"\r\n"+"	args.file = (ar[0]) ? ar[0] : \"\";"+"\r\n"+"	args.data = (ar[1]) ? ar[1] : \"\";"+"\r\n"+"	args.data += (args.data != \"\" ? \"&\" : \"\") + \"token=\" + EWR_TOKEN; // Add token"+"\r\n"+"	if (!$obj.data(\"bs.popover\")) {"+"\r\n"+"		$obj.popover({"+"\r\n"+"			html: true,"+"\r\n"+"			placement: pos,"+"\r\n"+"			trigger: \"manual\","+"\r\n"+"			template: '<div class=\"popover\"><h3 class=\"popover-title\" style=\"cursor: move;\"></h3>' +"+"\r\n"+"				'<div class=\"popover-content\"></div><div class=\"ewResizeHandle\"></div></div>',"+"\r\n"+"			content: '<div class=\"ewrLoading\"><div class=\"ewSpinner\"><div></div></div> ' +"+"\r\n"+"				ewLanguage.Phrase(\"Loading\").replace(\"%s\", \"\") + '</div>',"+"\r\n"+"			container: $(\"#ewrDrillDownPanel\")"+"\r\n"+"		}).on(\"show.bs.popover\", function(e) {"+"\r\n"+"			$obj.attr(\"data-original-title\", \"\");	"+"\r\n"+"		}).on(\"shown.bs.popover\", function(e) {			"+"\r\n"+"			if (!$obj.data(\"args\"))"+"\r\n"+"				return;"+"\r\n"+"			$.ajax({"+"\r\n"+"				cache: false,"+"\r\n"+"				dataType: \"html\","+"\r\n"+"				type: \"POST\","+"\r\n"+"				data: $obj.data(\"args\").data,"+"\r\n"+"				url: $obj.data(\"args\").file,"+"\r\n"+"				success: function(data) {"+"\r\n"+"					var $tip = $obj.data(\"bs.popover\").tip()"+"\r\n"+"						.drag(\"start\", ewr_DragStart)"+"\r\n"+"						.drag(ewr_Drag, { handle: \".popover-title\" });"+"\r\n"+"					if (args.hdr)"+"\r\n"+"						$tip.find(\".popover-title\").empty().show()"+"\r\n"+"							.append('<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' + args.hdr)"+"\r\n"+"							.find(\".close\").click(function() { $obj.popover(\"hide\"); });"+"\r\n"+"					var reb = /<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i;"+"\r\n"+"					if (data.match(reb)) // Use HTML in document body only"+"\r\n"+"						data = RegExp.$1;"+"\r\n"+"					var html = ewr_StripScript(data);"+"\r\n"+"					var $bd = $tip.find(\".popover-content\").html(html);"+"\r\n"+"					if (EWR_IS_MOBILE) { // If mobile, insert the container table only"+"\r\n"+"						var container = $bd.find(\"#ewContainer\")[0];"+"\r\n"+"						if (container)"+"\r\n"+"							$bd.empty().append(container);"+"\r\n"+"					}"+"\r\n"+"					$bd.find(\".ewTable\").each(ewr_SetupTable);"+"\r\n"+"					ewr_ExecScript(data, id);"+"\r\n"+"				},"+"\r\n"+"				error: function(o) {"+"\r\n"+"					if (o.responseText) {"+"\r\n"+"						var $tip = $el.data(\"bs.popover\").tip();"+"\r\n"+"						$tip.find(\".popover-content\").empty().append('<p class=\"text-error\">' + o.responseText + '</p>');"+"\r\n"+"					}"+"\r\n"+"				}"+"\r\n"+"			});"+"\r\n"+"		}).on(\"hidden.bs.popover\", function(e) {			"+"\r\n"+"			for (var i = 0; i < ewrDrillCharts.length; i++) { // Dispose charts"+"\r\n"+"				var cht = FusionCharts(ewrDrillCharts[i]);"+"\r\n"+"				cht.dispose();"+"\r\n"+"			}"+"\r\n"+"			ewrDrillCharts = [];"+"\r\n"+"			ewr_RemoveScript(id);		"+"\r\n"+"		});"+"\r\n"+"	}"+"\r\n"+"	$obj.data(\"args\", args).popover(\"show\");	"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Execute JavaScript in HTML loaded by Ajax"+"\r\n"+"function ewr_ExecScript(html, id) {"+"\r\n"+"	var ar, i = 0, re = /<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig;"+"\r\n"+"	while ((ar = re.exec(html)) != null) {"+"\r\n"+"		var text = RegExp.$2;"+"\r\n"+"		if (text != \"\" && !/ewr_Get(Css|Script)/i.test(text) &&"+"\r\n"+"			/(\\s+type\\s*=\\s*['\"]*(text|application)\\/(java|ecma)script['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(RegExp.$1))"+"\r\n"+"			ewr_AddScript(text, \"scr_\" + id + \"_\" + i++);"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Strip JavaScript in HTML loaded by Ajax"+"\r\n"+"function ewr_StripScript(html) {"+"\r\n"+"	var ar, re = /<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig;"+"\r\n"+"	var str = html;"+"\r\n"+"	while ((ar = re.exec(html)) != null) {"+"\r\n"+"		var text = RegExp.lastMatch;"+"\r\n"+"		if (/(\\s+type\\s*=\\s*['\"]*(text|application)\\/(java|ecma)script['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(RegExp.$1))"+"\r\n"+"			str = str.replace(text, \"\");"+"\r\n"+"	}"+"\r\n"+"	return str;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Add SCRIPT tag"+"\r\n"+"function ewr_AddScript(text, id) {"+"\r\n"+"	var scr = document.createElement(\"SCRIPT\");"+"\r\n"+"	if (id)"+"\r\n"+"		scr.id = id;"+"\r\n"+"	scr.type = \"text/javascript\";"+"\r\n"+"	scr.text = text;"+"\r\n"+"	return document.body.appendChild(scr);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Remove JavaScript added by Ajax"+"\r\n"+"function ewr_RemoveScript(id) {"+"\r\n"+"	if (id)"+"\r\n"+"		jQuery(\"script[id^='scr_\" + id + \"_']\").remove();"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Language class"+"\r\n"+"function ewr_Language(obj) {"+"\r\n"+"	this.obj = obj;"+"\r\n"+"	this.Phrase = function(id) {"+"\r\n"+"		return this.obj[id.toLowerCase()];"+"\r\n"+"	};"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Apply client side template to a DIV"+"\r\n"+"function ewr_ApplyTemplate(divId, tmplId, classId, exporttype, data) {"+"\r\n"+"	var $ = jQuery, $tmpl = $(\"#\" + tmplId);"+"\r\n"+"	if (!$.views || !$tmpl[0])"+"\r\n"+"		return;"+"\r\n"+"	// Add script tags"+"\r\n"+"	$('span[data-class^=tp],div[data-class^=tp]').html(function() {"+"\r\n"+"		var $this = $(this);"+"\r\n"+"		return '<scr' + 'ipt type=\"text/html\" class=\"' + classId + '\" id=\"' + $this.data('class') + '\">' + $this.html() + '</scr' + 'ipt>';"+"\r\n"+"	});"+"\r\n"+"	if (!$tmpl.attr(\"type\")) // Not script"+"\r\n"+"		$tmpl.attr(\"type\", \"text/html\");"+"\r\n"+"	var args = {data: data || {}, id: divId, template: tmplId, enabled: true};"+"\r\n"+"	$(document).trigger(\"rendertemplate\", [args]);"+"\r\n"+"	if (args.enabled)"+"\r\n"+"		$(\"#\" + divId).html($tmpl.render(args.data));"+"\r\n"+"	// Export custom"+"\r\n"+"	if (exporttype && exporttype != \"print\") {"+"\r\n"+"		$(function() {"+"\r\n"+"			var $meta = $(\"meta[http-equiv='Content-Type']\");"+"\r\n"+"			var html = \"<html><head>\";"+"\r\n"+"			if ($meta[0])"+"\r\n"+"				html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";"+"\r\n"+"			if (exporttype == \"pdf\") {"+"\r\n"+"				html += \"<link rel='stylesheet' type='text/css' href='\" + EWR_PDF_STYLESHEET_FILENAME + \"'>\";"+"\r\n"+"			} else {"+"\r\n"+"				html += \"<style>\" + $.ajax({async: false, type: \"GET\", url: EWR_PROJECT_STYLESHEET_FILENAME}).responseText + \"</style>\";"+"\r\n"+"			}"+"\r\n"+"			html += \"</\" + \"head><body>\";"+"\r\n"+"			$(\"span.ewChartTop\").each(function(){ html += $(this).html(); });"+"\r\n"+"			html += $(\"#\" + divId).find('div[id^=\"ct_\"]').html();"+"\r\n"+"			$(\"span.ewChartBottom\").each(function(){ html += $(this).html(); });"+"\r\n"+"			html += \"</body></html>\";"+"\r\n"+"			var url = window.location.href.split('?')[0];"+"\r\n"+"			if (exporttype == \"email\") {"+"\r\n"+"				var str = window.location.search.replace(/^\\?/, \"\") + \"&\" + $.param({customexport: exporttype, data: html, filename: classId});				"+"\r\n"+"				str += \"&token=\" + EWR_TOKEN; // Add token"+"\r\n"+"				$.post(url, str, function(data) {"+"\r\n"+"					ewr_ShowMessage(data);"+"\r\n"+"				});"+"\r\n"+"			} else {"+"\r\n"+"				$(\"<form>\").attr({method: \"post\", action: url})"+"\r\n"+"					.append($(\"<input type='hidden'>\").attr({name: \"customexport\", value: exporttype}), $(\"<input type='hidden'>\").attr({name: \"data\", value: html}), $(\"<input type='hidden'>\").attr({name: \"filename\", value: classId}))"+"\r\n"+"					.appendTo(\"body\").submit();"+"\r\n"+"			}"+"\r\n"+"			if (window.location != window.parent.location && window.parent.jQuery) // In iframe"+"\r\n"+"				window.parent.jQuery(\"body\").css(\"cursor\", \"default\");"+"\r\n"+"		})"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Render client side template and return the rendered HTML"+"\r\n"+"function ewr_RenderTemplate(tmplId) {"+"\r\n"+"	var $ = jQuery, $tmpl = $(\"#\" + tmplId);"+"\r\n"+"	if (!$.views || !$tmpl[0])"+"\r\n"+"		return;"+"\r\n"+"	if (!$tmpl.attr(\"type\")) // Not script"+"\r\n"+"		$tmpl.attr(\"type\", \"text/html\");"+"\r\n"+"	var args = {data: {}, template: tmplId};"+"\r\n"+"	$(document).trigger(\"rendertemplate\", [args])"+"\r\n"+"	return $tmpl.render(args.data);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Show message dialog"+"\r\n"+"function ewr_ShowMessage(msg) {"+"\r\n"+"	if (window.location != window.parent.location && parent.ewr_ShowMessage) // In iframe"+"\r\n"+"		return parent.ewr_ShowMessage(msg);"+"\r\n"+"	var $ = jQuery, $div = $(\"div.ewMessageDialog:first\");"+"\r\n"+"	var html = msg || ($div.length ? (EWR_IS_MOBILE ? $div.text() : $div.html()) : \"\");"+"\r\n"+"	if ($.trim(html) == \"\")"+"\r\n"+"		return;"+"\r\n"+"	if (EWR_IS_MOBILE) {"+"\r\n"+"		alert(html);"+"\r\n"+"	} else {"+"\r\n"+"		var $dlg = $(\"#ewrMsgBox\");"+"\r\n"+"		$dlg.find(\".modal-body\").html(html);"+"\r\n"+"		$dlg.modal(\"show\");"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Random number"+"\r\n"+"function ewr_Random() {"+"\r\n"+"	return Math.floor(Math.random() * 100001) + 100000;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Toggle search operator"+"\r\n"+"function ewr_ToggleSrchOpr(id, value) {"+"\r\n"+"	var el = this.form.elements[id];"+"\r\n"+"	if (!el)"+"\r\n"+"		return;"+"\r\n"+"	el.value = (el.value != value) ? value : \"=\";"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Validators"+"\r\n"+""+"\r\n"+"// Check US Date format (mm/dd/yyyy)"+"\r\n"+"function ewr_CheckUSDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"us\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check US Date format (mm/dd/yy)"+"\r\n"+"function ewr_CheckShortUSDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"usshort\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check Date format (yyyy/mm/dd)"+"\r\n"+"function ewr_CheckDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"std\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check Date format (yy/mm/dd)"+"\r\n"+"function ewr_CheckShortDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"stdshort\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check Euro Date format (dd/mm/yyyy)"+"\r\n"+"function ewr_CheckEuroDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"euro\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check Euro Date format (dd/mm/yy)"+"\r\n"+"function ewr_CheckShortEuroDate(object_value) {"+"\r\n"+"	return ewr_CheckDateEx(object_value, \"euroshort\", EWR_DATE_SEPARATOR);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check date format"+"\r\n"+"//  Format: std/stdshort/us/usshort/euro/euroshort"+"\r\n"+"function ewr_CheckDateEx(value, format, sep) {"+"\r\n"+"	if (value == null || value.length == \"\")"+"\r\n"+"		return true;"+"\r\n"+"	while (value.indexOf(\"  \") > -1)"+"\r\n"+"		value = value.replace(/  /g, \" \");"+"\r\n"+"	value = value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var arDT = value.split(\" \");"+"\r\n"+"	if (arDT.length > 0) {"+"\r\n"+"		var re, sYear, sMonth, sDay;"+"\r\n"+"		re = /^([0-9]{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2][0-9]|[3][0|1])$/;"+"\r\n"+"		if (ar = re.exec(arDT[0])) {"+"\r\n"+"			sYear = ar[1];"+"\r\n"+"			sMonth = ar[2];"+"\r\n"+"			sDay = ar[3];"+"\r\n"+"		} else {"+"\r\n"+"			var wrksep = \"\\\\\" + sep;"+"\r\n"+"			switch (format) {"+"\r\n"+"				case \"std\":"+"\r\n"+"					re = new RegExp(\"^(\\\\d{4})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");"+"\r\n"+"					break;"+"\r\n"+"				case \"stdshort\":"+"\r\n"+"					re = new RegExp(\"^(\\\\d{2})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");"+"\r\n"+"					break;"+"\r\n"+"				case \"us\":"+"\r\n"+"					re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{4})$\");"+"\r\n"+"					break;"+"\r\n"+"				case \"usshort\":"+"\r\n"+"					re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{2})$\");"+"\r\n"+"					break;"+"\r\n"+"				case \"euro\":"+"\r\n"+"					re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{4})$\");"+"\r\n"+"					break;"+"\r\n"+"				case \"euroshort\":"+"\r\n"+"					re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{2})$\");"+"\r\n"+"					break;"+"\r\n"+"			}"+"\r\n"+"			if (!re.test(arDT[0]))"+"\r\n"+"				return false;"+"\r\n"+"			var arD = arDT[0].split(sep);"+"\r\n"+"			switch (format) {"+"\r\n"+"				case \"std\":"+"\r\n"+"				case \"stdshort\":"+"\r\n"+"					sYear = ewr_UnformatYear(arD[0]);"+"\r\n"+"					sMonth = arD[1];"+"\r\n"+"					sDay = arD[2];"+"\r\n"+"					break;"+"\r\n"+"				case \"us\":"+"\r\n"+"				case \"usshort\":"+"\r\n"+"					sYear = ewr_UnformatYear(arD[2]);"+"\r\n"+"					sMonth = arD[0];"+"\r\n"+"					sDay = arD[1];"+"\r\n"+"					break;"+"\r\n"+"				case \"euro\":"+"\r\n"+"				case \"euroshort\":"+"\r\n"+"					sYear = ewr_UnformatYear(arD[2]);"+"\r\n"+"					sMonth = arD[1];"+"\r\n"+"					sDay = arD[0];"+"\r\n"+"					break;"+"\r\n"+"			}"+"\r\n"+"		}"+"\r\n"+"		if (!ewr_CheckDay(sYear, sMonth, sDay))"+"\r\n"+"			return false;"+"\r\n"+"	}"+"\r\n"+"	if (arDT.length > 1 && !ewr_CheckTime(arDT[1]))"+"\r\n"+"		return false;"+"\r\n"+"	return true;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Unformat 2 digit year to 4 digit year"+"\r\n"+"function ewr_UnformatYear(yr) {"+"\r\n"+"	if (yr.length == 2)"+"\r\n"+"		return (yr > EWR_UNFORMAT_YEAR) ? \"19\" + yr : \"20\" + yr;"+"\r\n"+"	return yr;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check day"+"\r\n"+"function ewr_CheckDay(checkYear, checkMonth, checkDay) {"+"\r\n"+"	checkYear = parseInt(checkYear, 10);"+"\r\n"+"	checkMonth = parseInt(checkMonth, 10);"+"\r\n"+"	checkDay = parseInt(checkDay, 10);"+"\r\n"+"	var maxDay = (ewr_InArray(checkMonth, [4, 6, 9, 11]) > -1) ? 30 : 31;"+"\r\n"+"	if (checkMonth == 2)"+"\r\n"+"		maxDay = (checkYear % 4 > 0 || checkYear % 100 == 0 && checkYear % 400 > 0) ? 28 : 29;"+"\r\n"+"	return ewr_CheckRange(checkDay, 1, maxDay);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check integer"+"\r\n"+"function ewr_CheckInteger(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	if (object_value.indexOf(EWR_DECIMAL_POINT) > -1)"+"\r\n"+"		return false;"+"\r\n"+"	return ewr_CheckNumber(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check number"+"\r\n"+"function ewr_CheckNumber(object_value) {"+"\r\n"+"	object_value = String(object_value);"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = new RegExp(\"^[+-]?(\\\\d{1,3}(\" + ((EWR_THOUSANDS_SEP) ? \"\\\\\" + EWR_THOUSANDS_SEP + \"?\" : \"\") + \"\\\\d{3})*(\\\\\" +"+"\r\n"+"		EWR_DECIMAL_POINT + \"\\\\d+)?|\\\\\" + EWR_DECIMAL_POINT + \"\\\\d+)$\");"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Convert to float"+"\r\n"+"function ewr_StrToFloat(object_value) {"+"\r\n"+"	object_value = String(object_value);"+"\r\n"+"	if (EWR_THOUSANDS_SEP != \"\") {"+"\r\n"+"		var re = new RegExp(\"\\\\\" + EWR_THOUSANDS_SEP, \"g\");"+"\r\n"+"		object_value = object_value.replace(re, \"\");"+"\r\n"+"	}"+"\r\n"+"	if (EWR_DECIMAL_POINT != \"\")"+"\r\n"+"		object_value = object_value.replace(EWR_DECIMAL_POINT, \".\");"+"\r\n"+"	return parseFloat(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Convert string (yyyy-mm-dd hh:mm:ss) to date object"+"\r\n"+"function ewr_StrToDate(object_value) {"+"\r\n"+"	var re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1]) (?:(0\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d))?$/;"+"\r\n"+"	var ar = object_value.replace(re, \"$1 $2 $3 $4 $5 $6\").split(\" \");"+"\r\n"+"	return new Date(ar[0], ar[1]-1, ar[2], ar[3], ar[4], ar[5]);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check range"+"\r\n"+"function ewr_CheckRange(object_value, min_value, max_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	var $ = jQuery;"+"\r\n"+"	if ($.isNumber(min_value) || $.isNumber(max_value)) { // Number"+"\r\n"+"		if (ewr_CheckNumber(object_value))"+"\r\n"+"			object_value = ewr_StrToFloat(object_value);"+"\r\n"+"	}"+"\r\n"+"	if (!$.isNull(min_value) && object_value < min_value)"+"\r\n"+"		return false;"+"\r\n"+"	if (!$.isNull(max_value) && object_value > max_value)"+"\r\n"+"		return false;"+"\r\n"+"	return true;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check time"+"\r\n"+"function ewr_CheckTime(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^(0\\d|1\\d|2[0-3]):[0-5]\\d:[0-5]\\d$/;"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check phone"+"\r\n"+"function ewr_CheckPhone(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/;"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check zip"+"\r\n"+"function ewr_CheckZip(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^\\d{5}$|^\\d{5}-\\d{4}$/;"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check credit card"+"\r\n"+"function ewr_CheckCreditCard(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	var creditcard_string = object_value.replace(/\\D/g, \"\");	"+"\r\n"+"	if (creditcard_string.length == 0)"+"\r\n"+"		return false;"+"\r\n"+"	var doubledigit = creditcard_string.length % 2 == 1 ? false : true;"+"\r\n"+"	var tempdigit, checkdigit = 0;"+"\r\n"+"	for (var i = 0, len = creditcard_string.length; i < len; i++) {"+"\r\n"+"		tempdigit = parseInt(creditcard_string.charAt(i));		"+"\r\n"+"		if (doubledigit) {"+"\r\n"+"			tempdigit *= 2;"+"\r\n"+"			checkdigit += (tempdigit % 10);			"+"\r\n"+"			if (tempdigit / 10 >= 1.0)"+"\r\n"+"				checkdigit++;			"+"\r\n"+"			doubledigit = false;"+"\r\n"+"		}	else {"+"\r\n"+"			checkdigit += tempdigit;"+"\r\n"+"			doubledigit = true;"+"\r\n"+"		}"+"\r\n"+"	}		"+"\r\n"+"	return (checkdigit % 10 == 0);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check social security number"+"\r\n"+"function ewr_CheckSSC(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/;"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check emails"+"\r\n"+"function ewr_CheckEmailList(object_value, email_cnt) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	var arEmails = object_value.replace(/,/g, \";\").split(\";\");"+"\r\n"+"	for (var i = 0, len = arEmails.length; i < len; i++) {"+"\r\n"+"		if (email_cnt > 0 && len > email_cnt)"+"\r\n"+"			return false;"+"\r\n"+"		if (!ewr_CheckEmail(arEmails[i]))"+"\r\n"+"			return false;"+"\r\n"+"	}"+"\r\n"+"	return true;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check email"+"\r\n"+"function ewr_CheckEmail(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,6}$/i;"+"\r\n"+"	return re.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}"+"\r\n"+"function ewr_CheckGUID(object_value) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	object_value = object_value.replace(/^\\s*|\\s*$/g, \"\");"+"\r\n"+"	var re = /^\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}$/;"+"\r\n"+"	var re2 = /^\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}$/;"+"\r\n"+"	return re.test(object_value) || re2.test(object_value);"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Check by regular expression"+"\r\n"+"function ewr_CheckByRegEx(object_value, pattern) {"+"\r\n"+"	if (!object_value || object_value.length == 0)"+"\r\n"+"		return true;"+"\r\n"+"	return (object_value.match(pattern)) ? true : false;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Redirect by HTTP GET or POST"+"\r\n"+"function ewr_Redirect(url, f, method) {"+"\r\n"+"	if (!method || method.toLowerCase() == \"post\") { // Default"+"\r\n"+"		var $ = jQuery, param = {}, $form = (f) ? $(f) : $(\"<form></form>\").appendTo(\"body\");"+"\r\n"+"		$form.attr({ action: url.split(\"?\")[0], method: \"post\" });"+"\r\n"+"		url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"token=\" + EWR_TOKEN;"+"\r\n"+"		url.replace(/(?:\\?|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {"+"\r\n"+"			if ($1)"+"\r\n"+"				$('<input type=\"hidden\">').attr({ name: $1, value: $2 }).appendTo($form);"+"\r\n"+"		});"+"\r\n"+"		$form.submit();"+"\r\n"+"	} else {"+"\r\n"+"		window.location = url;"+"\r\n"+"	}"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Create calendar"+"\r\n"+"function ewr_CreateCalendar(index, el) {"+"\r\n"+"	var $ = jQuery, $el = $(el),"+"\r\n"+"		format = $el.data(\"format\"),"+"\r\n"+"		$btn = $('<button type=\"button\"><span class=\"glyphicon glyphicon-calendar\"></span></button>')"+"\r\n"+"		.addClass(\"btn btn-default btn-sm\").css({ \"font-size\": $el.css(\"font-size\"), \"height\": $el.outerHeight() });"+"\r\n"+"	if (!Calendar._DN)"+"\r\n"+"		$.getScript(EWR_RELATIVE_PATH + \"jscalendar/lang/calendar-en.js\");"+"\r\n"+"	$el.data(\"calendar\", Calendar.setup({"+"\r\n"+"		inputField: el, // input field"+"\r\n"+"		showsTime: / %H:%M(:%S)?$/.test(format), // shows time"+"\r\n"+"		ifFormat: format, // date format"+"\r\n"+"		button: $btn[0], // button"+"\r\n"+"		cache: true // reuse the same calendar object, where possible"+"\r\n"+"	})).wrap('<div class=\"input-group\"></div>').after($('<span class=\"input-group-btn\"></span>').append($btn));"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"/**"+"\r\n"+"* Parse a UA string. Called at instantiation to populate jQuery.ua"+"\r\n"+"* Based on http://yuilibrary.com/yui/docs/api/files/yui_js_yui-ua.js.html"+"\r\n"+"*"+"\r\n"+"* @param {String} [subUA=navigator.userAgent] UA string to parse"+"\r\n"+"* @return {Object} The UA object"+"\r\n"+"*/"+"\r\n"+""+"\r\n"+"function ewr_UserAgent(subUA) {"+"\r\n"+"    var numberify = function (s) {"+"\r\n"+"        var c = 0;"+"\r\n"+"        return parseFloat(s.replace(/\\./g, function () {"+"\r\n"+"            return (c++ === 1) ? '' : '.';"+"\r\n"+"        }));"+"\r\n"+"    },"+"\r\n"+"	win = window,"+"\r\n"+"	nav = win && win.navigator,"+"\r\n"+"	o = {"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Internet Explorer version number or 0.  Example: 6"+"\r\n"+"            * @property ie"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		ie: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Opera version number or 0.  Example: 9.2"+"\r\n"+"            * @property opera"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		opera: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Gecko engine revision number.  Will evaluate to 1 if Gecko"+"\r\n"+"            * is detected but the revision could not be found. Other browsers"+"\r\n"+"            * will be 0.  Example: 1.8"+"\r\n"+"            * <pre>"+"\r\n"+"            * Firefox 1.0.0.4: 1.7.8   <-- Reports 1.7"+"\r\n"+"            * Firefox 1.5.0.9: 1.8.0.9 <-- 1.8"+"\r\n"+"            * Firefox 2.0.0.3: 1.8.1.3 <-- 1.81"+"\r\n"+"            * Firefox 3.0   <-- 1.9"+"\r\n"+"            * Firefox 3.5   <-- 1.91"+"\r\n"+"            * </pre>"+"\r\n"+"            * @property gecko"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		gecko: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * AppleWebKit version.  KHTML browsers that are not WebKit browsers"+"\r\n"+"            * will evaluate to 1, other browsers 0.  Example: 418.9"+"\r\n"+"            * <pre>"+"\r\n"+"            * Safari 1.3.2 (312.6): 312.8.1 <-- Reports 312.8 -- currently the"+"\r\n"+"            *                                   latest available for Mac OSX 10.3."+"\r\n"+"            * Safari 2.0.2:         416     <-- hasOwnProperty introduced"+"\r\n"+"            * Safari 2.0.4:         418     <-- preventDefault fixed"+"\r\n"+"            * Safari 2.0.4 (419.3): 418.9.1 <-- One version of Safari may run"+"\r\n"+"            *                                   different versions of webkit"+"\r\n"+"            * Safari 2.0.4 (419.3): 419     <-- Tiger installations that have been"+"\r\n"+"            *                                   updated, but not updated"+"\r\n"+"            *                                   to the latest patch."+"\r\n"+"            * Webkit 212 nightly:   522+    <-- Safari 3.0 precursor (with native"+"\r\n"+"            * SVG and many major issues fixed)."+"\r\n"+"            * Safari 3.0.4 (523.12) 523.12  <-- First Tiger release - automatic"+"\r\n"+"            * update from 2.x via the 10.4.11 OS patch."+"\r\n"+"            * Webkit nightly 1/2008:525+    <-- Supports DOMContentLoaded event."+"\r\n"+"            *                                   yahoo.com user agent hack removed."+"\r\n"+"            * </pre>"+"\r\n"+"            * http://en.wikipedia.org/wiki/Safari_version_history"+"\r\n"+"            * @property webkit"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		webkit: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Safari will be detected as webkit, but this property will also"+"\r\n"+"            * be populated with the Safari version number"+"\r\n"+"            * @property safari"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		safari: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Chrome will be detected as webkit, but this property will also"+"\r\n"+"            * be populated with the Chrome version number"+"\r\n"+"            * @property chrome"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		chrome: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * The mobile property will be set to a string containing any relevant"+"\r\n"+"            * user agent information when a modern mobile browser is detected."+"\r\n"+"            * Currently limited to Safari on the iPhone/iPod Touch, Nokia N-series"+"\r\n"+"            * devices with the WebKit-based browser, and Opera Mini."+"\r\n"+"            * @property mobile"+"\r\n"+"            * @type string"+"\r\n"+"            * @default null"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		mobile: null,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Adobe AIR version number or 0.  Only populated if webkit is detected."+"\r\n"+"            * Example: 1.0"+"\r\n"+"            * @property air"+"\r\n"+"            * @type float"+"\r\n"+"            */"+"\r\n"+"		air: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * PhantomJS version number or 0.  Only populated if webkit is detected."+"\r\n"+"            * Example: 1.0"+"\r\n"+"            * @property phantomjs"+"\r\n"+"            * @type float"+"\r\n"+"            */"+"\r\n"+"		phantomjs: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Apple iPad's OS version"+"\r\n"+"            * @property ipad"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		ipad: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Apple iPhone's OS version"+"\r\n"+"            * @property iphone"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		iphone: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Apples iPod's OS version"+"\r\n"+"            * @property ipod"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		ipod: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * General truthy check for iPad, iPhone or iPod"+"\r\n"+"            * @property ios"+"\r\n"+"            * @type Boolean"+"\r\n"+"            * @default null"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		ios: null,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Googles Android OS version"+"\r\n"+"            * @property android"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		android: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Kindle Silk"+"\r\n"+"            * @property silk"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		silk: 0,"+"\r\n"+"		/**"+"\r\n"+"            * Detects Ubuntu version"+"\r\n"+"            * @property ubuntu"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		ubuntu: 0,"+"\r\n"+"		/**"+"\r\n"+"            * Detects Kindle Silk Acceleration"+"\r\n"+"            * @property accel"+"\r\n"+"            * @type Boolean"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		accel: false,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Detects Palms WebOS version"+"\r\n"+"            * @property webos"+"\r\n"+"            * @type float"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		webos: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Google Caja version number or 0."+"\r\n"+"            * @property caja"+"\r\n"+"            * @type float"+"\r\n"+"            */"+"\r\n"+"		caja: nav && nav.cajaVersion,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * Set to true if the page appears to be in SSL"+"\r\n"+"            * @property secure"+"\r\n"+"            * @type boolean"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		secure: false,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * The operating system."+"\r\n"+"            *"+"\r\n"+"            * Possible values are `windows`, `macintosh`, `android`, `symbos`, `linux`, `rhino` and `ios`."+"\r\n"+"            *"+"\r\n"+"            * @property os"+"\r\n"+"            * @type string"+"\r\n"+"            * @default null"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		os: null,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"            * The Nodejs Version"+"\r\n"+"            * @property nodejs"+"\r\n"+"            * @type float"+"\r\n"+"            * @default 0"+"\r\n"+"            * @static"+"\r\n"+"            */"+"\r\n"+"		nodejs: 0,"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"        * Window8/IE10 Application host environment"+"\r\n"+"        * @property winjs"+"\r\n"+"        * @type Boolean"+"\r\n"+"        * @static"+"\r\n"+"        */"+"\r\n"+"		winjs: !!((typeof Windows !== \"undefined\") && Windows.System),"+"\r\n"+""+"\r\n"+"		/**"+"\r\n"+"        * Are touch/msPointer events available on this device"+"\r\n"+"        * @property touchEnabled"+"\r\n"+"        * @type Boolean"+"\r\n"+"        * @static"+"\r\n"+"        */"+"\r\n"+"		touchEnabled: false"+"\r\n"+"	},"+"\r\n"+"	ua = subUA || nav && nav.userAgent,"+"\r\n"+"	loc = win && win.location,"+"\r\n"+"	href = loc && loc.href,"+"\r\n"+"	m;"+"\r\n"+""+"\r\n"+"    /**"+"\r\n"+"	* The User Agent string that was parsed"+"\r\n"+"	* @property userAgent"+"\r\n"+"	* @type String"+"\r\n"+"	* @static"+"\r\n"+"	*/"+"\r\n"+"    o.userAgent = ua;"+"\r\n"+"    o.secure = href && (href.toLowerCase().indexOf('https') === 0);"+"\r\n"+"    if (ua) {"+"\r\n"+"        if ((/windows|win32/i).test(ua)) {"+"\r\n"+"            o.os = 'windows';"+"\r\n"+"        } else if ((/macintosh|mac_powerpc/i).test(ua)) {"+"\r\n"+"            o.os = 'macintosh';"+"\r\n"+"        } else if ((/android/i).test(ua)) {"+"\r\n"+"            o.os = 'android';"+"\r\n"+"        } else if ((/symbos/i).test(ua)) {"+"\r\n"+"            o.os = 'symbos';"+"\r\n"+"        } else if ((/linux/i).test(ua)) {"+"\r\n"+"            o.os = 'linux';"+"\r\n"+"        } else if ((/rhino/i).test(ua)) {"+"\r\n"+"            o.os = 'rhino';"+"\r\n"+"        }"+"\r\n"+""+"\r\n"+"        // Modern KHTML browsers should qualify as Safari X-Grade"+"\r\n"+"        if ((/KHTML/).test(ua)) {"+"\r\n"+"            o.webkit = 1;"+"\r\n"+"        }"+"\r\n"+"        if ((/IEMobile|XBLWP7/).test(ua)) {"+"\r\n"+"            o.mobile = 'windows';"+"\r\n"+"        }"+"\r\n"+"        if ((/Fennec/).test(ua)) {"+"\r\n"+"            o.mobile = 'gecko';"+"\r\n"+"        }"+"\r\n"+""+"\r\n"+"        // Modern WebKit browsers are at least X-Grade"+"\r\n"+"        m = ua.match(/AppleWebKit\\/([^\\s]*)/);"+"\r\n"+"        if (m && m[1]) {"+"\r\n"+"            o.webkit = numberify(m[1]);"+"\r\n"+"            o.safari = o.webkit;"+"\r\n"+"            if (/PhantomJS/.test(ua)) {"+"\r\n"+"                m = ua.match(/PhantomJS\\/([^\\s]*)/);"+"\r\n"+"                if (m && m[1]) {"+"\r\n"+"                    o.phantomjs = numberify(m[1]);"+"\r\n"+"                }"+"\r\n"+"            }"+"\r\n"+""+"\r\n"+"            // Mobile browser check"+"\r\n"+"            if (/ Mobile\\//.test(ua) || (/iPad|iPod|iPhone/).test(ua)) {"+"\r\n"+"                o.mobile = 'Apple'; // iPhone or iPod Touch"+"\r\n"+"                m = ua.match(/OS ([^\\s]*)/);"+"\r\n"+"                if (m && m[1]) {"+"\r\n"+"                    m = numberify(m[1].replace('_', '.'));"+"\r\n"+"                }"+"\r\n"+"                o.ios = m;"+"\r\n"+"                o.os = 'ios';"+"\r\n"+"                o.ipad = o.ipod = o.iphone = 0;"+"\r\n"+"                m = ua.match(/iPad|iPod|iPhone/);"+"\r\n"+"                if (m && m[0]) {"+"\r\n"+"                    o[m[0].toLowerCase()] = o.ios;"+"\r\n"+"                }"+"\r\n"+"            } else {"+"\r\n"+"                m = ua.match(/NokiaN[^\\/]*|webOS\\/\\d\\.\\d/);"+"\r\n"+"                if (m) {"+"\r\n"+""+"\r\n"+"                    // Nokia N-series, webOS, ex: NokiaN95"+"\r\n"+"                    o.mobile = m[0];"+"\r\n"+"                }"+"\r\n"+"                if (/webOS/.test(ua)) {"+"\r\n"+"                    o.mobile = 'WebOS';"+"\r\n"+"                    m = ua.match(/webOS\\/([^\\s]*);/);"+"\r\n"+"                    if (m && m[1]) {"+"\r\n"+"                        o.webos = numberify(m[1]);"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"                if (/ Android/.test(ua)) {"+"\r\n"+"                    o.mobile = 'Android';"+"\r\n"+"                    m = ua.match(/Android ([^\\s]*);/);"+"\r\n"+"                    if (m && m[1]) {"+"\r\n"+"                        o.android = numberify(m[1]);"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"                if (/Silk/.test(ua)) {"+"\r\n"+"                    m = ua.match(/Silk\\/([^\\s]*)/);"+"\r\n"+"                    if (m && m[1]) {"+"\r\n"+"                        o.silk = numberify(m[1]);"+"\r\n"+"                    }"+"\r\n"+"                    if (!o.android) {"+"\r\n"+"                        o.android = 2.34; //Hack for desktop mode in Kindle"+"\r\n"+"                        o.os = 'Android';"+"\r\n"+"                    }"+"\r\n"+"                    if (/Accelerated=true/.test(ua)) {"+"\r\n"+"                        o.accel = true;"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"            }"+"\r\n"+""+"\r\n"+"            m = ua.match(/OPR\\/(\\d+\\.\\d+)/);"+"\r\n"+""+"\r\n"+"            if (m && m[1]) {"+"\r\n"+"                // Opera 15+ with Blink (pretends to be both Chrome and Safari)"+"\r\n"+"                o.opera = numberify(m[1]);"+"\r\n"+"            } else {"+"\r\n"+"                m = ua.match(/(Chrome|CrMo|CriOS)\\/([^\\s]*)/);"+"\r\n"+"                if (m && m[1] && m[2]) {"+"\r\n"+"                    o.chrome = numberify(m[2]); // Chrome"+"\r\n"+"                    o.safari = 0; //Reset safari back to 0"+"\r\n"+"                    if (m[1] === 'CrMo') {"+"\r\n"+"                        o.mobile = 'chrome';"+"\r\n"+"                    }"+"\r\n"+"                } else {"+"\r\n"+"                    m = ua.match(/AdobeAIR\\/([^\\s]*)/);"+"\r\n"+"                    if (m) {"+"\r\n"+"                        o.air = m[0]; // Adobe AIR 1.0 or better"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"            }"+"\r\n"+"        }"+"\r\n"+""+"\r\n"+"        m = ua.match(/Ubuntu\\ (\\d+\\.\\d+)/);"+"\r\n"+"        if (m && m[1]) {"+"\r\n"+""+"\r\n"+"            o.os = 'linux';"+"\r\n"+"            o.ubuntu = numberify(m[1]);"+"\r\n"+""+"\r\n"+"            m = ua.match(/\\ WebKit\\/([^\\s]*)/);"+"\r\n"+"            if (m && m[1]) {"+"\r\n"+"                o.webkit = numberify(m[1]);"+"\r\n"+"            }"+"\r\n"+"            m = ua.match(/\\ Chromium\\/([^\\s]*)/);"+"\r\n"+"            if (m && m[1]) {"+"\r\n"+"                o.chrome = numberify(m[1]);"+"\r\n"+"            }"+"\r\n"+"            if (/ Mobile$/.test(ua)) {"+"\r\n"+"                o.mobile = 'Ubuntu';"+"\r\n"+"            }"+"\r\n"+"        }"+"\r\n"+""+"\r\n"+"        if (!o.webkit) { // not webkit"+"\r\n"+"            // @todo check Opera/8.01 (J2ME/MIDP; Opera Mini/2.0.4509/1316; fi; U; ssr)"+"\r\n"+"            if (/Opera/.test(ua)) {"+"\r\n"+"                m = ua.match(/Opera[\\s\\/]([^\\s]*)/);"+"\r\n"+"                if (m && m[1]) {"+"\r\n"+"                    o.opera = numberify(m[1]);"+"\r\n"+"                }"+"\r\n"+"                m = ua.match(/Version\\/([^\\s]*)/);"+"\r\n"+"                if (m && m[1]) {"+"\r\n"+"                    o.opera = numberify(m[1]); // opera 10+"+"\r\n"+"                }"+"\r\n"+"                if (/Opera Mobi/.test(ua)) {"+"\r\n"+"                    o.mobile = 'opera';"+"\r\n"+"                    m = ua.replace('Opera Mobi', '').match(/Opera ([^\\s]*)/);"+"\r\n"+"                    if (m && m[1]) {"+"\r\n"+"                        o.opera = numberify(m[1]);"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"                m = ua.match(/Opera Mini[^;]*/);"+"\r\n"+"                if (m) {"+"\r\n"+"                    o.mobile = m[0]; // ex: Opera Mini/2.0.4509/1316"+"\r\n"+"                }"+"\r\n"+"            } else { // not opera or webkit"+"\r\n"+"                m = ua.match(/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/);"+"\r\n"+""+"\r\n"+"                if (m && (m[1] || m[2])) {"+"\r\n"+"                    o.ie = numberify(m[1] || m[2]);"+"\r\n"+"                } else { // not opera, webkit, or ie"+"\r\n"+"                    m = ua.match(/Gecko\\/([^\\s]*)/);"+"\r\n"+"                    if (m) {"+"\r\n"+"                        o.gecko = 1; // Gecko detected, look for revision"+"\r\n"+"                        m = ua.match(/rv:([^\\s\\)]*)/);"+"\r\n"+"                        if (m && m[1]) {"+"\r\n"+"                            o.gecko = numberify(m[1]);"+"\r\n"+"                            if (/Mobile|Tablet/.test(ua)) {"+"\r\n"+"                                o.mobile = \"ffos\";"+"\r\n"+"                            }"+"\r\n"+"                        }"+"\r\n"+"                    }"+"\r\n"+"                }"+"\r\n"+"            }"+"\r\n"+"        }"+"\r\n"+"    }"+"\r\n"+""+"\r\n"+"    //Check for known properties to tell if touch events are enabled on this device or if"+"\r\n"+"    //the number of MSPointer touchpoints on this device is greater than 0."+"\r\n"+""+"\r\n"+"    if (win && nav && !(o.chrome && o.chrome < 6)) {"+"\r\n"+"        o.touchEnabled = ((\"ontouchstart\" in win) || ((\"msMaxTouchPoints\" in nav) && (nav.msMaxTouchPoints > 0)));"+"\r\n"+"    }"+"\r\n"+""+"\r\n"+"    //It was a parsed UA, do not assign the global value."+"\r\n"+"    if (!subUA) {"+"\r\n"+"        if (typeof process === 'object') {"+"\r\n"+"            if (process.versions && process.versions.node) {"+"\r\n"+""+"\r\n"+"                //NodeJS"+"\r\n"+"                o.os = process.platform;"+"\r\n"+"                o.nodejs = numberify(process.versions.node);"+"\r\n"+"            }"+"\r\n"+"        }"+"\r\n"+"    }"+"\r\n"+"    return o;"+"\r\n"+"}"+"\r\n"+""+"\r\n"+"// Extend jQuery"+"\r\n"+"function ewr_Extend(jQuery) {"+"\r\n"+"	jQuery.extend({"+"\r\n"+"		isBoolean: function(o) {"+"\r\n"+"			return typeof o === 'boolean';"+"\r\n"+"		},"+"\r\n"+"		isNull: function(o) {"+"\r\n"+"			return o === null;"+"\r\n"+"		},"+"\r\n"+"		isNumber: function(o) {"+"\r\n"+"			return typeof o === 'number' && isFinite(o);"+"\r\n"+"		},"+"\r\n"+"		isObject: function(o) {"+"\r\n"+"			return (o && (typeof o === 'object' || this.isFunction(o))) || false;"+"\r\n"+"		},"+"\r\n"+"		isString: function(o) {"+"\r\n"+"			return typeof o === 'string';"+"\r\n"+"		},"+"\r\n"+"		isUndefined: function(o) {"+"\r\n"+"			return typeof o === 'undefined';"+"\r\n"+"		},"+"\r\n"+"		isValue: function(o) {"+"\r\n"+"			return (this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o));"+"\r\n"+"		},"+"\r\n"+"		isDate: function(o) {"+"\r\n"+"			return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);"+"\r\n"+"		},"+"\r\n"+"		later: function(when, o, fn, data, periodic) {"+"\r\n"+"			when = when || 0;"+"\r\n"+"			o = o || {};"+"\r\n"+"			var m = fn, d = data, f, r;"+"\r\n"+"			if (this.isString(fn))"+"\r\n"+"				m = o[fn];"+"\r\n"+"			if (!m)"+"\r\n"+"				return;"+"\r\n"+"			if (!this.isUndefined(data) && !this.isArray(d))"+"\r\n"+"				d = [data];"+"\r\n"+"			f = function() {"+"\r\n"+"				m.apply(o, d || []);"+"\r\n"+"			};"+"\r\n"+"			r = (periodic) ? setInterval(f, when) : setTimeout(f, when);"+"\r\n"+"			return {"+"\r\n"+"				interval: periodic,"+"\r\n"+"				cancel: function() {"+"\r\n"+"					if (this.interval) {"+"\r\n"+"						clearInterval(r);"+"\r\n"+"					} else {"+"\r\n"+"						clearTimeout(r);"+"\r\n"+"					}"+"\r\n"+"				}"+"\r\n"+"			};"+"\r\n"+"		},"+"\r\n"+"		ua: ewr_UserAgent()"+"\r\n"+"	});"+"\r\n"+"	"+"\r\n"+"	/*! "+"\r\n"+"	 * jquery.event.drag - v 2.2"+"\r\n"+"	 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com"+"\r\n"+"	 * Open Source MIT License - http://threedubmedia.com/code/license"+"\r\n"+"	 */"+"\r\n"+"	(function( $ ){"+"\r\n"+"	"+"\r\n"+"	// Add the jquery instance method"+"\r\n"+"	$.fn.drag = function( str, arg, opts ){"+"\r\n"+"	"+"\r\n"+"		// Figure out the event type"+"\r\n"+"		var type = typeof str == \"string\" ? str : \"\","+"\r\n"+"	"+"\r\n"+"		// Figure out the event handler..."+"\r\n"+"		fn = jQuery.isFunction( str ) ? str : jQuery.isFunction( arg ) ? arg : null;"+"\r\n"+"	"+"\r\n"+"		// Fix the event type"+"\r\n"+"		if ( type.indexOf(\"drag\") !== 0 ) "+"\r\n"+"			type = \"drag\"+ type;"+"\r\n"+"	"+"\r\n"+"		// Were options passed"+"\r\n"+"		opts = ( str == fn ? arg : opts ) || {};"+"\r\n"+"	"+"\r\n"+"		// Trigger or bind event handler"+"\r\n"+"		return fn ? this.bind( type, opts, fn ) : this.trigger( type );"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Local refs (increase compression)"+"\r\n"+"	var $event = $.event, "+"\r\n"+"	$special = $event.special,"+"\r\n"+"	"+"\r\n"+"	// Configure the drag special event "+"\r\n"+"	drag = $special.drag = {"+"\r\n"+"	"+"\r\n"+"		// These are the default settings"+"\r\n"+"		defaults: {"+"\r\n"+"			which: 1, // Mouse button pressed to start drag sequence"+"\r\n"+"			distance: 0, // Distance dragged before dragstart"+"\r\n"+"			not: ':input', // Selector to suppress dragging on target elements"+"\r\n"+"			handle: null, // Selector to match handle target elements"+"\r\n"+"			relative: false, //  true to use \"position\", false to use \"offset\""+"\r\n"+"			drop: true, //  false to suppress drop events, true or selector to allow"+"\r\n"+"			click: false //  false to suppress click events after dragend (no proxy)"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// The key name for stored drag data"+"\r\n"+"		datakey: \"dragdata\","+"\r\n"+"	"+"\r\n"+"		// Prevent bubbling for better performance"+"\r\n"+"		noBubble: true,"+"\r\n"+"	"+"\r\n"+"		// Count bound related events"+"\r\n"+"		add: function( obj ){ "+"\r\n"+"	"+"\r\n"+"			// Read the interaction data"+"\r\n"+"			var data = $.data( this, drag.datakey ),"+"\r\n"+"	"+"\r\n"+"			// Read any passed options "+"\r\n"+"			opts = obj.data || {};"+"\r\n"+"	"+"\r\n"+"			// Count another realted event"+"\r\n"+"			data.related += 1;"+"\r\n"+"	"+"\r\n"+"			// Extend data options bound with this event"+"\r\n"+"			// Don't iterate \"opts\" in case it is a node "+"\r\n"+"	"+"\r\n"+"			$.each( drag.defaults, function( key, def ){"+"\r\n"+"				if ( opts[ key ] !== undefined )"+"\r\n"+"					data[ key ] = opts[ key ];"+"\r\n"+"			});"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Forget unbound related events"+"\r\n"+"		remove: function(){"+"\r\n"+"			$.data( this, drag.datakey ).related -= 1;"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Configure interaction, capture settings"+"\r\n"+"		setup: function(){"+"\r\n"+"	"+"\r\n"+"			// Check for related events"+"\r\n"+"			if ( $.data( this, drag.datakey ) ) "+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// Initialize the drag data with copied defaults"+"\r\n"+"			var data = $.extend({ related:0 }, drag.defaults );"+"\r\n"+"	"+"\r\n"+"			// Store the interaction data"+"\r\n"+"			$.data( this, drag.datakey, data );"+"\r\n"+"	"+"\r\n"+"			// Bind the mousedown event, which starts drag interactions"+"\r\n"+"			$event.add( this, \"touchstart mousedown\", drag.init, data );"+"\r\n"+"	"+"\r\n"+"			// Prevent image dragging in IE..."+"\r\n"+"			if ( this.attachEvent ) "+"\r\n"+"				this.attachEvent(\"ondragstart\", drag.dontstart ); "+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Destroy configured interaction"+"\r\n"+"		teardown: function(){"+"\r\n"+"			var data = $.data( this, drag.datakey ) || {};"+"\r\n"+"	"+"\r\n"+"			// Check for related events"+"\r\n"+"			if ( data.related ) "+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// Remove the stored data"+"\r\n"+"			$.removeData( this, drag.datakey );"+"\r\n"+"	"+"\r\n"+"			// Remove the mousedown event"+"\r\n"+"			$event.remove( this, \"touchstart mousedown\", drag.init );"+"\r\n"+"	"+"\r\n"+"			// Enable text selection"+"\r\n"+"			drag.textselect( true ); "+"\r\n"+"	"+"\r\n"+"			// Un-prevent image dragging in IE..."+"\r\n"+"			if ( this.detachEvent ) "+"\r\n"+"				this.detachEvent(\"ondragstart\", drag.dontstart ); "+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Initialize the interaction"+"\r\n"+"		init: function( event ){ "+"\r\n"+"	"+"\r\n"+"			// Sorry, only one touch at a time"+"\r\n"+"			if ( drag.touched ) "+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// The drag/drop interaction data"+"\r\n"+"			var dd = event.data, results;"+"\r\n"+"	"+"\r\n"+"			// Check the which directive"+"\r\n"+"			if ( event.which != 0 && dd.which > 0 && event.which != dd.which ) "+"\r\n"+"				return; "+"\r\n"+"	"+"\r\n"+"			// Check for suppressed selector"+"\r\n"+"			if ( $( event.target ).is( dd.not ) ) "+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// Check for handle selector"+"\r\n"+"			if ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length ) "+"\r\n"+"				return;"+"\r\n"+"			drag.touched = event.type == 'touchstart' ? this : null;"+"\r\n"+"			dd.propagates = 1;"+"\r\n"+"			dd.mousedown = this;"+"\r\n"+"			dd.interactions = [ drag.interaction( this, dd ) ];"+"\r\n"+"			dd.target = event.target;"+"\r\n"+"			dd.pageX = event.pageX;"+"\r\n"+"			dd.pageY = event.pageY;"+"\r\n"+"			dd.dragging = null;"+"\r\n"+"	"+"\r\n"+"			// Handle draginit event... "+"\r\n"+"			results = drag.hijack( event, \"draginit\", dd );"+"\r\n"+"	"+"\r\n"+"			// Early cancel"+"\r\n"+"			if ( !dd.propagates )"+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// Flatten the result set"+"\r\n"+"			results = drag.flatten( results );"+"\r\n"+"	"+"\r\n"+"			// Insert new interaction elements"+"\r\n"+"			if ( results && results.length ){"+"\r\n"+"				dd.interactions = [];"+"\r\n"+"				$.each( results, function(){"+"\r\n"+"					dd.interactions.push( drag.interaction( this, dd ) );"+"\r\n"+"				});"+"\r\n"+"			}"+"\r\n"+"	"+"\r\n"+"			// Remember how many interactions are propagating"+"\r\n"+"			dd.propagates = dd.interactions.length;"+"\r\n"+"	"+"\r\n"+"			// Locate and init the drop targets"+"\r\n"+"			if ( dd.drop !== false && $special.drop ) "+"\r\n"+"				$special.drop.handler( event, dd );"+"\r\n"+"	"+"\r\n"+"			// Disable text selection"+"\r\n"+"			drag.textselect( false ); "+"\r\n"+"	"+"\r\n"+"			// Bind additional events..."+"\r\n"+"			if ( drag.touched )"+"\r\n"+"				$event.add( drag.touched, \"touchmove touchend\", drag.handler, dd );"+"\r\n"+"			else "+"\r\n"+"				$event.add( document, \"mousemove mouseup\", drag.handler, dd );"+"\r\n"+"	"+"\r\n"+"			// Helps prevent text selection or scrolling"+"\r\n"+"			if ( !drag.touched || dd.live )"+"\r\n"+"				return false;"+"\r\n"+"		},	"+"\r\n"+"	"+"\r\n"+"		// Returns an interaction object"+"\r\n"+"		interaction: function( elem, dd ){"+"\r\n"+"			var offset = $( elem )[ dd.relative ? \"position\" : \"offset\" ]() || { top:0, left:0 };"+"\r\n"+"			return {"+"\r\n"+"				drag: elem, "+"\r\n"+"				callback: new drag.callback(), "+"\r\n"+"				droppable: [],"+"\r\n"+"				offset: offset"+"\r\n"+"			};"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Handle drag-releatd DOM events"+"\r\n"+"		handler: function( event ){ "+"\r\n"+"	"+"\r\n"+"			// Read the data before hijacking anything"+"\r\n"+"			var dd = event.data;	"+"\r\n"+"	"+"\r\n"+"			// Handle various events"+"\r\n"+"			switch ( event.type ){"+"\r\n"+"	"+"\r\n"+"				// Mousemove, check distance, start dragging"+"\r\n"+"				case !dd.dragging && 'touchmove': "+"\r\n"+"					event.preventDefault();"+"\r\n"+"				case !dd.dragging && 'mousemove':"+"\r\n"+"	"+"\r\n"+"					//  drag tolerance, x?+ y?= distance?"+"\r\n"+"					if ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) ) "+"\r\n"+"						break; // Distance tolerance not reached"+"\r\n"+"					event.target = dd.target; // Force target from \"mousedown\" event (fix distance issue)"+"\r\n"+"					drag.hijack( event, \"dragstart\", dd ); // Trigger \"dragstart\""+"\r\n"+"					if ( dd.propagates ) // \"dragstart\" not rejected"+"\r\n"+"						dd.dragging = true; // Activate interaction"+"\r\n"+"	"+"\r\n"+"				// Mousemove, dragging"+"\r\n"+"				case 'touchmove':"+"\r\n"+"					event.preventDefault();"+"\r\n"+"				case 'mousemove':"+"\r\n"+"					if ( dd.dragging ){"+"\r\n"+"	"+"\r\n"+"						// Trigger \"drag\"		"+"\r\n"+"						drag.hijack( event, \"drag\", dd );"+"\r\n"+"						if ( dd.propagates ){"+"\r\n"+"	"+"\r\n"+"							// Manage drop events"+"\r\n"+"							if ( dd.drop !== false && $special.drop )"+"\r\n"+"								$special.drop.handler( event, dd ); // \"dropstart\", \"dropend\"							"+"\r\n"+"							break; // \"drag\" not rejected, stop		"+"\r\n"+"						}"+"\r\n"+"						event.type = \"mouseup\"; // Helps \"drop\" handler behave"+"\r\n"+"					}"+"\r\n"+"	"+"\r\n"+"				// Mouseup, stop dragging"+"\r\n"+"				case 'touchend': "+"\r\n"+"				case 'mouseup': "+"\r\n"+"				default:"+"\r\n"+"					if ( drag.touched )"+"\r\n"+"						$event.remove( drag.touched, \"touchmove touchend\", drag.handler ); // Remove touch events"+"\r\n"+"					else "+"\r\n"+"						$event.remove( document, \"mousemove mouseup\", drag.handler ); // Remove page events	"+"\r\n"+"					if ( dd.dragging ){"+"\r\n"+"						if ( dd.drop !== false && $special.drop )"+"\r\n"+"							$special.drop.handler( event, dd ); // \"drop\""+"\r\n"+"						drag.hijack( event, \"dragend\", dd ); // Trigger \"dragend\"	"+"\r\n"+"					}"+"\r\n"+"					drag.textselect( true ); // Enable text selection"+"\r\n"+"	"+"\r\n"+"					// If suppressing click events..."+"\r\n"+"					if ( dd.click === false && dd.dragging )"+"\r\n"+"						$.data( dd.mousedown, \"suppress.click\", new Date().getTime() + 5 );"+"\r\n"+"					dd.dragging = drag.touched = false; // Deactivate element	"+"\r\n"+"					break;"+"\r\n"+"			}"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Re-use event object for custom events"+"\r\n"+"		hijack: function( event, type, dd, x, elem ){"+"\r\n"+"	"+"\r\n"+"			// Not configured"+"\r\n"+"			if ( !dd ) "+"\r\n"+"				return;"+"\r\n"+"	"+"\r\n"+"			// Remember the original event and type"+"\r\n"+"			var orig = { event:event.originalEvent, type:event.type },"+"\r\n"+"	"+"\r\n"+"			// Is the event drag related or drog related?"+"\r\n"+"			mode = type.indexOf(\"drop\") ? \"drag\" : \"drop\","+"\r\n"+"	"+"\r\n"+"			// Iteration vars"+"\r\n"+"			result, i = x || 0, ia, $elems, callback,"+"\r\n"+"			len = !isNaN( x ) ? x : dd.interactions.length;"+"\r\n"+"	"+"\r\n"+"			// Modify the event type"+"\r\n"+"			event.type = type;"+"\r\n"+"	"+"\r\n"+"			// Remove the original event"+"\r\n"+"			event.originalEvent = null;"+"\r\n"+"	"+"\r\n"+"			// Initialize the results"+"\r\n"+"			dd.results = [];"+"\r\n"+"	"+"\r\n"+"			// Handle each interacted element"+"\r\n"+"			do if ( ia = dd.interactions[ i ] ){"+"\r\n"+"	"+"\r\n"+"				// Validate the interaction"+"\r\n"+"				if ( type !== \"dragend\" && ia.cancelled )"+"\r\n"+"					continue;"+"\r\n"+"	"+"\r\n"+"				// Set the dragdrop properties on the event object"+"\r\n"+"				callback = drag.properties( event, dd, ia );"+"\r\n"+"	"+"\r\n"+"				// Prepare for more results"+"\r\n"+"				ia.results = [];"+"\r\n"+"	"+"\r\n"+"				// Handle each element"+"\r\n"+"				$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){"+"\r\n"+"	"+"\r\n"+"					// Identify drag or drop targets individually"+"\r\n"+"					callback.target = subject;"+"\r\n"+"	"+"\r\n"+"					// Force propagtion of the custom event"+"\r\n"+"					event.isPropagationStopped = function(){ return false; };"+"\r\n"+"	"+"\r\n"+"					// Handle the event	"+"\r\n"+"					result = subject ? $event.dispatch.call( subject, event, callback ) : null;"+"\r\n"+"	"+"\r\n"+"					// Stop the drag interaction for this element"+"\r\n"+"					if ( result === false ){"+"\r\n"+"						if ( mode == \"drag\" ){"+"\r\n"+"							ia.cancelled = true;"+"\r\n"+"							dd.propagates -= 1;"+"\r\n"+"						}"+"\r\n"+"						if ( type == \"drop\" ){"+"\r\n"+"							ia[ mode ][p] = null;"+"\r\n"+"						}"+"\r\n"+"					}"+"\r\n"+"	"+"\r\n"+"					// Assign any dropinit elements"+"\r\n"+"					else if ( type == \"dropinit\" )"+"\r\n"+"						ia.droppable.push( drag.element( result ) || subject );"+"\r\n"+"	"+"\r\n"+"					// Accept a returned proxy element "+"\r\n"+"					if ( type == \"dragstart\" )"+"\r\n"+"						ia.proxy = $( drag.element( result ) || ia.drag )[0];"+"\r\n"+"	"+"\r\n"+"					// Remember this result	"+"\r\n"+"					ia.results.push( result );"+"\r\n"+"	"+"\r\n"+"					// Forget the event result, for recycling"+"\r\n"+"					delete event.result;"+"\r\n"+"	"+"\r\n"+"					// Break on cancelled handler"+"\r\n"+"					if ( type !== \"dropinit\" )"+"\r\n"+"						return result;"+"\r\n"+"				});	"+"\r\n"+"	"+"\r\n"+"				// Flatten the results	"+"\r\n"+"				dd.results[ i ] = drag.flatten( ia.results );	"+"\r\n"+"	"+"\r\n"+"				// Accept a set of valid drop targets"+"\r\n"+"				if ( type == \"dropinit\" )"+"\r\n"+"					ia.droppable = drag.flatten( ia.droppable );"+"\r\n"+"	"+"\r\n"+"				// Locate drop targets"+"\r\n"+"				if ( type == \"dragstart\" && !ia.cancelled )"+"\r\n"+"					callback.update(); "+"\r\n"+"			}"+"\r\n"+"			while ( ++i < len )"+"\r\n"+"	"+"\r\n"+"			// Restore the original event & type"+"\r\n"+"			event.type = orig.type;"+"\r\n"+"			event.originalEvent = orig.event;"+"\r\n"+"	"+"\r\n"+"			// Return all handler results"+"\r\n"+"			return drag.flatten( dd.results );"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Extend the callback object with drag/drop properties..."+"\r\n"+"		properties: function( event, dd, ia ){		"+"\r\n"+"			var obj = ia.callback;"+"\r\n"+"	"+"\r\n"+"			// Elements"+"\r\n"+"			obj.drag = ia.drag;"+"\r\n"+"			obj.proxy = ia.proxy || ia.drag;"+"\r\n"+"	"+"\r\n"+"			// Starting mouse position"+"\r\n"+"			obj.startX = dd.pageX;"+"\r\n"+"			obj.startY = dd.pageY;"+"\r\n"+"	"+"\r\n"+"			// Current distance dragged"+"\r\n"+"			obj.deltaX = event.pageX - dd.pageX;"+"\r\n"+"			obj.deltaY = event.pageY - dd.pageY;"+"\r\n"+"	"+"\r\n"+"			// Original element position"+"\r\n"+"			obj.originalX = ia.offset.left;"+"\r\n"+"			obj.originalY = ia.offset.top;"+"\r\n"+"	"+"\r\n"+"			// Adjusted element position"+"\r\n"+"			obj.offsetX = obj.originalX + obj.deltaX; "+"\r\n"+"			obj.offsetY = obj.originalY + obj.deltaY;"+"\r\n"+"	"+"\r\n"+"			// Assign the drop targets information"+"\r\n"+"			obj.drop = drag.flatten( ( ia.drop || [] ).slice() );"+"\r\n"+"			obj.available = drag.flatten( ( ia.droppable || [] ).slice() );"+"\r\n"+"			return obj;	"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Determine is the argument is an element or jquery instance"+"\r\n"+"		element: function( arg ){"+"\r\n"+"			if ( arg && ( arg.jquery || arg.nodeType == 1 ) )"+"\r\n"+"				return arg;"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Flatten nested jquery objects and arrays into a single dimension array"+"\r\n"+"		flatten: function( arr ){"+"\r\n"+"			return $.map( arr, function( member ){"+"\r\n"+"				return member && member.jquery ? $.makeArray( member ) : "+"\r\n"+"					member && member.length ? drag.flatten( member ) : member;"+"\r\n"+"			});"+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Toggles text selection attributes ON (true) or OFF (false)"+"\r\n"+"		textselect: function( bool ){ "+"\r\n"+"			$( document )[ bool ? \"unbind\" : \"bind\" ](\"selectstart\", drag.dontstart )"+"\r\n"+"				.css(\"MozUserSelect\", bool ? \"\" : \"none\" );"+"\r\n"+"	"+"\r\n"+"			// .attr(\"unselectable\", bool ? \"off\" : \"on\" )"+"\r\n"+"			document.unselectable = bool ? \"off\" : \"on\"; "+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Suppress \"selectstart\" and \"ondragstart\" events"+"\r\n"+"		dontstart: function(){ "+"\r\n"+"			return false; "+"\r\n"+"		},"+"\r\n"+"	"+"\r\n"+"		// Callback instance contructor"+"\r\n"+"		callback: function(){}"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Callback methods"+"\r\n"+"	drag.callback.prototype = {"+"\r\n"+"		update: function(){"+"\r\n"+"			if ( $special.drop && this.available.length )"+"\r\n"+"				$.each( this.available, function( i ){"+"\r\n"+"					$special.drop.locate( this, i );"+"\r\n"+"				});"+"\r\n"+"		}"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Patch $.event.$dispatch to allow suppressing clicks"+"\r\n"+"	var $dispatch = $event.dispatch;"+"\r\n"+"	$event.dispatch = function( event ){"+"\r\n"+"		if ( $.data( this, \"suppress.\"+ event.type ) - new Date().getTime() > 0 ){"+"\r\n"+"			$.removeData( this, \"suppress.\"+ event.type );"+"\r\n"+"			return;"+"\r\n"+"		}"+"\r\n"+"		return $dispatch.apply( this, arguments );"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Event fix hooks for touch events..."+"\r\n"+"	var touchHooks = "+"\r\n"+"	$event.fixHooks.touchstart = "+"\r\n"+"	$event.fixHooks.touchmove = "+"\r\n"+"	$event.fixHooks.touchend ="+"\r\n"+"	$event.fixHooks.touchcancel = {"+"\r\n"+"		props: \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),"+"\r\n"+"		filter: function( event, orig ) {"+"\r\n"+"			if ( orig ){"+"\r\n"+"				var touched = ( orig.touches && orig.touches[0] )"+"\r\n"+"					|| ( orig.changedTouches && orig.changedTouches[0] )"+"\r\n"+"					|| null; "+"\r\n"+"	"+"\r\n"+"				//  iOS webkit: touchstart, touchmove, touchend"+"\r\n"+"				if ( touched ) "+"\r\n"+"					$.each( touchHooks.props, function( i, prop ){"+"\r\n"+"						event[ prop ] = touched[ prop ];"+"\r\n"+"					});"+"\r\n"+"			}"+"\r\n"+"			return event;"+"\r\n"+"		}"+"\r\n"+"	};"+"\r\n"+"	"+"\r\n"+"	// Share the same special event configuration with related events..."+"\r\n"+"	$special.draginit = $special.dragstart = $special.dragend = drag;"+"\r\n"+"	})( jQuery );"+"\r\n"+"}"+"\r\n"+"ewr_Extend(jQuery);"+"\r\n"+""+"\r\n"+"// Dropdown based on Bootstrap"+"\r\n"+"+function ($) {"+"\r\n"+"  'use strict';"+"\r\n"+""+"\r\n"+"  // DROPDOWN CLASS DEFINITION"+"\r\n"+"  // ========================="+"\r\n"+""+"\r\n"+"  var backdrop = '.dropdown-backdrop'"+"\r\n"+"  //var toggle = '#ewMobileMenu .ewDropdown'"+"\r\n"+"  var toggle = '.ewDropdown'"+"\r\n"+"  var Dropdown = function (element) {"+"\r\n"+"    $(element).on('click.bs.dropdown', this.toggle)"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+"  Dropdown.prototype.toggle = function (e) {"+"\r\n"+"    var $this = $(this)"+"\r\n"+""+"\r\n"+"    if ($this.is('.disabled, :disabled')) return"+"\r\n"+""+"\r\n"+"    var $parent  = getParent($this)"+"\r\n"+"    var isActive = $parent.hasClass('open')"+"\r\n"+""+"\r\n"+"    clearMenus(e)"+"\r\n"+""+"\r\n"+"    if (!isActive) {"+"\r\n"+"		if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {"+"\r\n"+"			// if mobile we use a backdrop because click events don't delegate"+"\r\n"+"			$('<div class=\"dropdown-backdrop\"/>').insertAfter($(this)).on('click', clearMenus)"+"\r\n"+"		}"+"\r\n"+"		"+"\r\n"+"		var relatedTarget = { relatedTarget: this }"+"\r\n"+"		$parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))"+"\r\n"+"		"+"\r\n"+"		if (e.isDefaultPrevented()) return"+"\r\n"+"		"+"\r\n"+"		$this.trigger('focus')"+"\r\n"+"		"+"\r\n"+"		$parent"+"\r\n"+"			.toggleClass('open')"+"\r\n"+"			.trigger('shown.bs.dropdown', relatedTarget)"+"\r\n"+"		"+"\r\n"+"		// adjust padding-left of the dropdown menu"+"\r\n"+"		var $next = $this.next();"+"\r\n"+"		if ($next.is('ul.dropdown-menu'))"+"\r\n"+"			$next.find(\"> li > a\").css(\"padding-left\", (parseInt($this.css(\"padding-left\"), 10) + 10) + \"px\") // add 10px"+"\r\n"+"    }"+"\r\n"+""+"\r\n"+"    return false"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+"  Dropdown.prototype.keydown = function (e) {"+"\r\n"+"    if (!/(38|40|27)/.test(e.keyCode)) return"+"\r\n"+""+"\r\n"+"    var $this = $(this)"+"\r\n"+""+"\r\n"+"    e.preventDefault()"+"\r\n"+"    e.stopPropagation()"+"\r\n"+""+"\r\n"+"    if ($this.is('.disabled, :disabled')) return"+"\r\n"+""+"\r\n"+"    var $parent  = getParent($this)"+"\r\n"+"    var isActive = $parent.hasClass('open')"+"\r\n"+""+"\r\n"+"    if (!isActive || (isActive && e.keyCode == 27)) {"+"\r\n"+"      if (e.which == 27) $parent.find(toggle).trigger('focus')"+"\r\n"+"      return $this.trigger('click')"+"\r\n"+"    }"+"\r\n"+""+"\r\n"+"    var desc = ' li:not(.divider):visible a'"+"\r\n"+"    var $items = $parent.find('[role=\"menu\"]' + desc + ', [role=\"listbox\"]' + desc)"+"\r\n"+""+"\r\n"+"    if (!$items.length) return"+"\r\n"+""+"\r\n"+"    var index = $items.index($items.filter(':focus'))"+"\r\n"+""+"\r\n"+"    if (e.keyCode == 38 && index > 0)                 index--                        // up"+"\r\n"+"    if (e.keyCode == 40 && index < $items.length - 1) index++                        // down"+"\r\n"+"    if (!~index)                                      index = 0"+"\r\n"+""+"\r\n"+"    $items.eq(index).trigger('focus')"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+"  function clearMenus(e) {"+"\r\n"+"    if (e && e.which === 3) return"+"\r\n"+"    $(backdrop).remove()"+"\r\n"+"    $(toggle, $(e.currentTarget).is(toggle) ? $(e.currentTarget).parent() : document).each(function () {"+"\r\n"+"		var $parent = getParent($(this))"+"\r\n"+"		var relatedTarget = { relatedTarget: this }"+"\r\n"+"		if (!$parent.hasClass('open')) return"+"\r\n"+"		$parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))"+"\r\n"+"		if (e.isDefaultPrevented()) return"+"\r\n"+"		$parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)"+"\r\n"+"    })"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+"  function getParent($this) {"+"\r\n"+"    var selector = $this.attr('data-target')"+"\r\n"+""+"\r\n"+"    if (!selector) {"+"\r\n"+"      selector = $this.attr('href')"+"\r\n"+"      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7"+"\r\n"+"    }"+"\r\n"+""+"\r\n"+"    var $parent = selector && $(selector)"+"\r\n"+""+"\r\n"+"    return $parent && $parent.length ? $parent : $this.parent()"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+""+"\r\n"+"  // DROPDOWN PLUGIN DEFINITION"+"\r\n"+"  // =========================="+"\r\n"+""+"\r\n"+"  var old = $.fn.dropdown"+"\r\n"+""+"\r\n"+"  $.fn.dropdown = function (option) {"+"\r\n"+"    return this.each(function () {"+"\r\n"+"      var $this = $(this)"+"\r\n"+"      var data  = $this.data('bs.dropdown')"+"\r\n"+""+"\r\n"+"      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))"+"\r\n"+"      if (typeof option == 'string') data[option].call($this)"+"\r\n"+"    })"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+"  $.fn.dropdown.Constructor = Dropdown"+"\r\n"+""+"\r\n"+""+"\r\n"+"  // DROPDOWN NO CONFLICT"+"\r\n"+"  // ===================="+"\r\n"+""+"\r\n"+"  $.fn.dropdown.noConflict = function () {"+"\r\n"+"    $.fn.dropdown = old"+"\r\n"+"    return this"+"\r\n"+"  }"+"\r\n"+""+"\r\n"+""+"\r\n"+"  // APPLY TO STANDARD DROPDOWN ELEMENTS"+"\r\n"+"  // ==================================="+"\r\n"+""+"\r\n"+"  $(document)"+"\r\n"+"    .on('click.bs.dropdown.data-api', clearMenus)"+"\r\n"+"    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })"+"\r\n"+"    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)"+"\r\n"+"    .on('keydown.bs.dropdown.data-api', toggle + ', [role=\"menu\"], [role=\"listbox\"]', Dropdown.prototype.keydown)"+"\r\n"+""+"\r\n"+"}(jQuery);"+"\r\n"+""+"\r\n"+"";
ewAr[2] = ""+"\r\n"+"";
ewAr[3] = ""+"\r\n"+"//"+"\r\n"+"// JavaScript for PHP Report Maker 8"+"\r\n"+"// (C)2007-2014 e.World Technology Ltd."+"\r\n"+"//"+"\r\n"+"// Dates and Numbers based on YUI 3: http://yuilibrary.com/yui/docs/datatype/"+"\r\n"+"//"+"\r\n"+""+"\r\n"+"/**"+"\r\n"+" * Pad a number with leading spaces, zeroes or something else"+"\r\n"+" * @method xPad"+"\r\n"+" * @param x {Number}	The number to be padded"+"\r\n"+" * @param pad {String}  The character to pad the number with"+"\r\n"+" * @param r {Number}	(optional) The base of the pad, eg, 10 implies to two digits, 100 implies to 3 digits."+"\r\n"+" * @private"+"\r\n"+" */"+"\r\n"+"var xPad=function (x, pad, r)"+"\r\n"+"{"+"\r\n"+"	if(typeof r === \"undefined\")"+"\r\n"+"	{"+"\r\n"+"		r=10;"+"\r\n"+"	}"+"\r\n"+"	pad = pad + \"\"; "+"\r\n"+"	for( ; parseInt(x, 10)<r && r>1; r/=10) {"+"\r\n"+"		x = pad + x;"+"\r\n"+"	}"+"\r\n"+"	return x.toString();"+"\r\n"+"};"+"\r\n"+""+"\r\n"+"//"+"\r\n"+"// Date"+"\r\n"+"//"+"\r\n"+"var ewDate = Dt = {"+"\r\n"+"	formats: {"+"\r\n"+"		a: function (d, l) { return l.a[d.getDay()]; },"+"\r\n"+"		A: function (d, l) { return l.A[d.getDay()]; },"+"\r\n"+"		b: function (d, l) { return l.b[d.getMonth()]; },"+"\r\n"+"		B: function (d, l) { return l.B[d.getMonth()]; },"+"\r\n"+"		C: function (d) { return xPad(parseInt(d.getFullYear()/100, 10), 0); },"+"\r\n"+"		d: [\"getDate\", \"0\"],"+"\r\n"+"		e: [\"getDate\", \" \"],"+"\r\n"+"		g: function (d) { return xPad(parseInt(Dt.formats.G(d)%100, 10), 0); },"+"\r\n"+"		G: function (d) {"+"\r\n"+"				var y = d.getFullYear();"+"\r\n"+"				var V = parseInt(Dt.formats.V(d), 10);"+"\r\n"+"				var W = parseInt(Dt.formats.W(d), 10);"+"\r\n"+"	"+"\r\n"+"				if(W > V) {"+"\r\n"+"					y++;"+"\r\n"+"				} else if(W===0 && V>=52) {"+"\r\n"+"					y--;"+"\r\n"+"				}"+"\r\n"+"	"+"\r\n"+"				return y;"+"\r\n"+"			},"+"\r\n"+"		H: [\"getHours\", \"0\"],"+"\r\n"+"		I: function (d) { var I=d.getHours()%12; return xPad(I===0?12:I, 0); },"+"\r\n"+"		j: function (d) {"+"\r\n"+"				var gmd_1 = new Date(\"\" + d.getFullYear() + \"/1/1 GMT\");"+"\r\n"+"				var gmdate = new Date(\"\" + d.getFullYear() + \"/\" + (d.getMonth()+1) + \"/\" + d.getDate() + \" GMT\");"+"\r\n"+"				var ms = gmdate - gmd_1;"+"\r\n"+"				var doy = parseInt(ms/60000/60/24, 10)+1;"+"\r\n"+"				return xPad(doy, 0, 100);"+"\r\n"+"			},"+"\r\n"+"		k: [\"getHours\", \" \"],"+"\r\n"+"		l: function (d) { var I=d.getHours()%12; return xPad(I===0?12:I, \" \"); },"+"\r\n"+"		m: function (d) { return xPad(d.getMonth()+1, 0); },"+"\r\n"+"		M: [\"getMinutes\", \"0\"],"+"\r\n"+"		p: function (d, l) { return l.p[d.getHours() >= 12 ? 1 : 0 ]; },"+"\r\n"+"		P: function (d, l) { return l.P[d.getHours() >= 12 ? 1 : 0 ]; },"+"\r\n"+"		s: function (d, l) { return parseInt(d.getTime()/1000, 10); },"+"\r\n"+"		S: [\"getSeconds\", \"0\"],"+"\r\n"+"		u: function (d) { var dow = d.getDay(); return dow===0?7:dow; },"+"\r\n"+"		U: function (d) {"+"\r\n"+"				var doy = parseInt(Dt.formats.j(d), 10);"+"\r\n"+"				var rdow = 6-d.getDay();"+"\r\n"+"				var woy = parseInt((doy+rdow)/7, 10);"+"\r\n"+"				return xPad(woy, 0);"+"\r\n"+"			},"+"\r\n"+"		V: function (d) {"+"\r\n"+"				var woy = parseInt(Dt.formats.W(d), 10);"+"\r\n"+"				var dow1_1 = (new Date(\"\" + d.getFullYear() + \"/1/1\")).getDay();"+"\r\n"+"				// First week is 01 and not 00 as in the case of %U and %W,"+"\r\n"+"				// so we add 1 to the final result except if day 1 of the year"+"\r\n"+"				// is a Monday (then %W returns 01)."+"\r\n"+"				// We also need to subtract 1 if the day 1 of the year is "+"\r\n"+"				// Friday-Sunday, so the resulting equation becomes:"+"\r\n"+"				var idow = woy + (dow1_1 > 4 || dow1_1 <= 1 ? 0 : 1);"+"\r\n"+"				if(idow === 53 && (new Date(\"\" + d.getFullYear() + \"/12/31\")).getDay() < 4)"+"\r\n"+"				{"+"\r\n"+"					idow = 1;"+"\r\n"+"				}"+"\r\n"+"				else if(idow === 0)"+"\r\n"+"				{"+"\r\n"+"					idow = Dt.formats.V(new Date(\"\" + (d.getFullYear()-1) + \"/12/31\"));"+"\r\n"+"				}"+"\r\n"+"	"+"\r\n"+"				return xPad(idow, 0);"+"\r\n"+"			},"+"\r\n"+"		w: \"getDay\","+"\r\n"+"		W: function (d) {"+"\r\n"+"				var doy = parseInt(Dt.formats.j(d), 10);"+"\r\n"+"				var rdow = 7-Dt.formats.u(d);"+"\r\n"+"				var woy = parseInt((doy+rdow)/7, 10);"+"\r\n"+"				return xPad(woy, 0, 10);"+"\r\n"+"			},"+"\r\n"+"		y: function (d) { return xPad(d.getFullYear()%100, 0); },"+"\r\n"+"		Y: \"getFullYear\","+"\r\n"+"		z: function (d) {"+"\r\n"+"				var o = d.getTimezoneOffset();"+"\r\n"+"				var H = xPad(parseInt(Math.abs(o/60), 10), 0);"+"\r\n"+"				var M = xPad(Math.abs(o%60), 0);"+"\r\n"+"				return (o>0?\"-\":\"+\") + H + M;"+"\r\n"+"			},"+"\r\n"+"		Z: function (d) {"+"\r\n"+"			var tz = d.toString().replace(/^.*:\\d\\d( GMT[+-]\\d+)? \\(?([A-Za-z ]+)\\)?\\d*$/, \"$2\").replace(/[a-z ]/g, \"\");"+"\r\n"+"			if(tz.length > 4) {"+"\r\n"+"				tz = Dt.formats.z(d);"+"\r\n"+"			}"+"\r\n"+"			return tz;"+"\r\n"+"		},"+"\r\n"+"		\"%\": function (d) { return \"%\"; }"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	aggregates: {"+"\r\n"+"		c: \"locale\","+"\r\n"+"		D: \"%m/%d/%y\","+"\r\n"+"		F: \"%Y-%m-%d\","+"\r\n"+"		h: \"%b\","+"\r\n"+"		n: \"\\n\","+"\r\n"+"		r: \"%I:%M:%S %p\","+"\r\n"+"		R: \"%H:%M\","+"\r\n"+"		t: \"\\t\","+"\r\n"+"		T: \"%H:%M:%S\","+"\r\n"+"		x: \"locale\","+"\r\n"+"		X: \"locale\""+"\r\n"+"		//\"+\": \"%a %b %e %T %Z %Y\""+"\r\n"+"	},"+"\r\n"+"	"+"\r\n"+"	resources: { // *** Note: Customize ewDate.resources in client side events"+"\r\n"+"		a:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],"+"\r\n"+"		A:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],"+"\r\n"+"		b:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],"+"\r\n"+"		B:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],"+"\r\n"+"		c:\"%a, %b %d, %Y %l:%M:%S %p %Z\","+"\r\n"+"		p:[\"AM\",\"PM\"],"+"\r\n"+"		P:[\"am\",\"pm\"],"+"\r\n"+"		x:\"%m/%d/%y\","+"\r\n"+"		X:\"%l:%M:%S %p\""+"\r\n"+"	},	"+"\r\n"+""+"\r\n"+"	 /**"+"\r\n"+"	 * Takes a native JavaScript Date and formats it as a string for display to user."+"\r\n"+"	 *"+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method format"+"\r\n"+"	 * @param oDate {Date} Date."+"\r\n"+"	 * @param oConfig {Object} (Optional) Object literal of configuration values:"+"\r\n"+"	 *  <dl>"+"\r\n"+"	 *   <dt>format {HTML} (Optional)</dt>"+"\r\n"+"	 *   <dd>"+"\r\n"+"	 *   <p>"+"\r\n"+"	 *   Any strftime string is supported, such as \"%I:%M:%S %p\". strftime has several format specifiers defined by the Open group at "+"\r\n"+"	 *   <a href=\"http://www.opengroup.org/onlinepubs/007908799/xsh/strftime.html\">http://www.opengroup.org/onlinepubs/007908799/xsh/strftime.html</a>"+"\r\n"+"	 *   PHP added a few of its own, defined at <a href=\"http://www.php.net/strftime\">http://www.php.net/strftime</a>"+"\r\n"+"	 *   </p>"+"\r\n"+"	 *   <p>"+"\r\n"+"	 *   This javascript implementation supports all the PHP specifiers and a few more.  The full list is below."+"\r\n"+"	 *   </p>"+"\r\n"+"	 *   <p>"+"\r\n"+"	 *   If not specified, it defaults to the ISO 8601 standard date format: %Y-%m-%d."+"\r\n"+"	 *   </p>"+"\r\n"+"	 *   <dl>"+"\r\n"+"	 *	<dt>%a</dt> <dd>abbreviated weekday name according to the current locale</dd>"+"\r\n"+"	 *	<dt>%A</dt> <dd>full weekday name according to the current locale</dd>"+"\r\n"+"	 *	<dt>%b</dt> <dd>abbreviated month name according to the current locale</dd>"+"\r\n"+"	 *	<dt>%B</dt> <dd>full month name according to the current locale</dd>"+"\r\n"+"	 *	<dt>%c</dt> <dd>preferred date and time representation for the current locale</dd>"+"\r\n"+"	 *	<dt>%C</dt> <dd>century number (the year divided by 100 and truncated to an integer, range 00 to 99)</dd>"+"\r\n"+"	 *	<dt>%d</dt> <dd>day of the month as a decimal number (range 01 to 31)</dd>"+"\r\n"+"	 *	<dt>%D</dt> <dd>same as %m/%d/%y</dd>"+"\r\n"+"	 *	<dt>%e</dt> <dd>day of the month as a decimal number, a single digit is preceded by a space (range \" 1\" to \"31\")</dd>"+"\r\n"+"	 *	<dt>%F</dt> <dd>same as %Y-%m-%d (ISO 8601 date format)</dd>"+"\r\n"+"	 *	<dt>%g</dt> <dd>like %G, but without the century</dd>"+"\r\n"+"	 *	<dt>%G</dt> <dd>The 4-digit year corresponding to the ISO week number</dd>"+"\r\n"+"	 *	<dt>%h</dt> <dd>same as %b</dd>"+"\r\n"+"	 *	<dt>%H</dt> <dd>hour as a decimal number using a 24-hour clock (range 00 to 23)</dd>"+"\r\n"+"	 *	<dt>%I</dt> <dd>hour as a decimal number using a 12-hour clock (range 01 to 12)</dd>"+"\r\n"+"	 *	<dt>%j</dt> <dd>day of the year as a decimal number (range 001 to 366)</dd>"+"\r\n"+"	 *	<dt>%k</dt> <dd>hour as a decimal number using a 24-hour clock (range 0 to 23); single digits are preceded by a blank. (See also %H.)</dd>"+"\r\n"+"	 *	<dt>%l</dt> <dd>hour as a decimal number using a 12-hour clock (range 1 to 12); single digits are preceded by a blank. (See also %I.) </dd>"+"\r\n"+"	 *	<dt>%m</dt> <dd>month as a decimal number (range 01 to 12)</dd>"+"\r\n"+"	 *	<dt>%M</dt> <dd>minute as a decimal number</dd>"+"\r\n"+"	 *	<dt>%n</dt> <dd>newline character</dd>"+"\r\n"+"	 *	<dt>%p</dt> <dd>either \"AM\" or \"PM\" according to the given time value, or the corresponding strings for the current locale</dd>"+"\r\n"+"	 *	<dt>%P</dt> <dd>like %p, but lower case</dd>"+"\r\n"+"	 *	<dt>%r</dt> <dd>time in a.m. and p.m. notation equal to %I:%M:%S %p</dd>"+"\r\n"+"	 *	<dt>%R</dt> <dd>time in 24 hour notation equal to %H:%M</dd>"+"\r\n"+"	 *	<dt>%s</dt> <dd>number of seconds since the Epoch, ie, since 1970-01-01 00:00:00 UTC</dd>"+"\r\n"+"	 *	<dt>%S</dt> <dd>second as a decimal number</dd>"+"\r\n"+"	 *	<dt>%t</dt> <dd>tab character</dd>"+"\r\n"+"	 *	<dt>%T</dt> <dd>current time, equal to %H:%M:%S</dd>"+"\r\n"+"	 *	<dt>%u</dt> <dd>weekday as a decimal number [1,7], with 1 representing Monday</dd>"+"\r\n"+"	 *	<dt>%U</dt> <dd>week number of the current year as a decimal number, starting with the"+"\r\n"+"	 *			first Sunday as the first day of the first week</dd>"+"\r\n"+"	 *	<dt>%V</dt> <dd>The ISO 8601:1988 week number of the current year as a decimal number,"+"\r\n"+"	 *			range 01 to 53, where week 1 is the first week that has at least 4 days"+"\r\n"+"	 *			in the current year, and with Monday as the first day of the week.</dd>"+"\r\n"+"	 *	<dt>%w</dt> <dd>day of the week as a decimal, Sunday being 0</dd>"+"\r\n"+"	 *	<dt>%W</dt> <dd>week number of the current year as a decimal number, starting with the"+"\r\n"+"	 *			first Monday as the first day of the first week</dd>"+"\r\n"+"	 *	<dt>%x</dt> <dd>preferred date representation for the current locale without the time</dd>"+"\r\n"+"	 *	<dt>%X</dt> <dd>preferred time representation for the current locale without the date</dd>"+"\r\n"+"	 *	<dt>%y</dt> <dd>year as a decimal number without a century (range 00 to 99)</dd>"+"\r\n"+"	 *	<dt>%Y</dt> <dd>year as a decimal number including the century</dd>"+"\r\n"+"	 *	<dt>%z</dt> <dd>numerical time zone representation</dd>"+"\r\n"+"	 *	<dt>%Z</dt> <dd>time zone name or abbreviation</dd>"+"\r\n"+"	 *	<dt>%%</dt> <dd>a literal \"%\" character</dd>"+"\r\n"+"	 *   </dl>"+"\r\n"+"	 *  </dd>"+"\r\n"+"	 * </dl>"+"\r\n"+"	 * @return {HTML} Formatted date for display."+"\r\n"+"	 */"+"\r\n"+"	format : function (oDate, oConfig) {"+"\r\n"+"		oConfig = oConfig || {};"+"\r\n"+"		"+"\r\n"+"		if(!jQuery.isDate(oDate)) {"+"\r\n"+"			return jQuery.isValue(oDate) ? oDate : \"\";"+"\r\n"+"		}"+"\r\n"+""+"\r\n"+"		var format, resources, compatMode, sLocale, LOCALE;"+"\r\n"+""+"\r\n"+"        format = oConfig.format || \"%Y-%m-%d\";"+"\r\n"+""+"\r\n"+"        resources = Dt.resources; //***"+"\r\n"+""+"\r\n"+"		var replace_aggs = function (m0, m1) {"+"\r\n"+"			if (compatMode && m1 === \"r\") {"+"\r\n"+"			    return resources[m1];"+"\r\n"+"			}"+"\r\n"+"			var f = Dt.aggregates[m1];"+"\r\n"+"			return (f === \"locale\" ? resources[m1] : f);"+"\r\n"+"		};"+"\r\n"+""+"\r\n"+"		var replace_formats = function (m0, m1) {"+"\r\n"+"			var f = Dt.formats[m1];"+"\r\n"+"			switch($.type(f)) {"+"\r\n"+"				case \"string\":					// string => built in date function"+"\r\n"+"					return oDate[f]();"+"\r\n"+"				case \"function\":				// function => our own function"+"\r\n"+"					return f.call(oDate, oDate, resources);"+"\r\n"+"				case \"array\":					// built in function with padding"+"\r\n"+"					if($.type(f[0]) === \"string\") {"+"\r\n"+"						return xPad(oDate[f[0]](), f[1]);"+"\r\n"+"					} // no break; (fall through to default:)"+"\r\n"+"				default:"+"\r\n"+"					return m1;"+"\r\n"+"			}"+"\r\n"+"		};"+"\r\n"+""+"\r\n"+"		// First replace aggregates (run in a loop because an agg may be made up of other aggs)"+"\r\n"+"		while(format.match(/%[cDFhnrRtTxX]/)) {"+"\r\n"+"			format = format.replace(/%([cDFhnrRtTxX])/g, replace_aggs);"+"\r\n"+"		}"+"\r\n"+""+"\r\n"+"		// Now replace formats (do not run in a loop otherwise %%a will be replace with the value of %a)"+"\r\n"+"		var str = format.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, replace_formats);"+"\r\n"+""+"\r\n"+"		replace_aggs = replace_formats = undefined;"+"\r\n"+""+"\r\n"+"		return str;"+"\r\n"+"	},	"+"\r\n"+"	"+"\r\n"+"	/**"+"\r\n"+"	 * Checks whether a native JavaScript Date contains a valid value."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method isValidDate"+"\r\n"+"	 * @param oDate {Date} Date in the month for which the number of days is desired."+"\r\n"+"	 * @return {Boolean} True if the date argument contains a valid value."+"\r\n"+"	 */"+"\r\n"+"	 isValidDate : function (oDate) {"+"\r\n"+"		if(jQuery.isDate(oDate) && (isFinite(oDate)) && (oDate != \"Invalid Date\") && !isNaN(oDate) && (oDate != null)) {"+"\r\n"+"            return true;"+"\r\n"+"        }"+"\r\n"+"        else {"+"\r\n"+"            return false;"+"\r\n"+"        }"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Checks whether two dates correspond to the same date and time."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method areEqual"+"\r\n"+"	 * @param aDate {Date} The first date to compare."+"\r\n"+"	 * @param bDate {Date} The second date to compare."+"\r\n"+"	 * @return {Boolean} True if the two dates correspond to the same"+"\r\n"+"	 * date and time."+"\r\n"+"	 */	"+"\r\n"+"	areEqual : function (aDate, bDate) {"+"\r\n"+"		return (this.isValidDate(aDate) && this.isValidDate(bDate) && (aDate.getTime() == bDate.getTime()));	"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Checks whether the first date comes later than the second."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method isGreater"+"\r\n"+"	 * @param aDate {Date} The first date to compare."+"\r\n"+"	 * @param bDate {Date} The second date to compare."+"\r\n"+"	 * @return {Boolean} True if the first date is later than the second."+"\r\n"+"	 */	"+"\r\n"+"    isGreater : function (aDate, bDate) {"+"\r\n"+"    	return (this.isValidDate(aDate) && this.isValidDate(bDate) && (aDate.getTime() > bDate.getTime()));"+"\r\n"+"    },"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Checks whether the first date comes later than or is the same as"+"\r\n"+"	 * the second."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method isGreaterOrEqual"+"\r\n"+"	 * @param aDate {Date} The first date to compare."+"\r\n"+"	 * @param bDate {Date} The second date to compare."+"\r\n"+"	 * @return {Boolean} True if the first date is later than or "+"\r\n"+"	 * the same as the second."+"\r\n"+"	 */	"+"\r\n"+"    isGreaterOrEqual : function (aDate, bDate) {"+"\r\n"+"    	return (this.isValidDate(aDate) && this.isValidDate(bDate) && (aDate.getTime() >= bDate.getTime()));"+"\r\n"+"    },"+"\r\n"+""+"\r\n"+""+"\r\n"+"    /**"+"\r\n"+"	 * Checks whether the date is between two other given dates."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method isInRange"+"\r\n"+"	 * @param aDate {Date} The date to check"+"\r\n"+"	 * @param bDate {Date} Lower bound of the range."+"\r\n"+"	 * @param cDate {Date} Higher bound of the range."+"\r\n"+"	 * @return {Boolean} True if the date is between the two other given dates."+"\r\n"+"	 */	"+"\r\n"+"    isInRange : function (aDate, bDate, cDate) {"+"\r\n"+"    	return (this.isGreaterOrEqual(aDate, bDate) && this.isGreaterOrEqual(cDate, aDate));"+"\r\n"+"    },"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Adds a specified number of days to the given date."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method addDays"+"\r\n"+"	 * @param oDate {Date} The date to add days to."+"\r\n"+"	 * @param numDays {Number} The number of days to add (can be negative)"+"\r\n"+"	 * @return {Date} A new Date with the specified number of days"+"\r\n"+"	 * added to the original date."+"\r\n"+"	 */	"+"\r\n"+"	addDays : function (oDate, numDays) {"+"\r\n"+"		return new Date(oDate.getTime() + 86400000*numDays);"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Adds a specified number of months to the given date."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method addMonths"+"\r\n"+"	 * @param oDate {Date} The date to add months to."+"\r\n"+"	 * @param numMonths {Number} The number of months to add (can be negative)"+"\r\n"+"	 * @return {Date} A new Date with the specified number of months"+"\r\n"+"	 * added to the original date."+"\r\n"+"	 */	"+"\r\n"+"	addMonths : function (oDate, numMonths) {"+"\r\n"+"		var newYear = oDate.getFullYear();"+"\r\n"+"		var newMonth = oDate.getMonth() + numMonths;		"+"\r\n"+"		"+"\r\n"+"		newYear  = Math.floor(newYear + newMonth / 12);"+"\r\n"+"		newMonth = (newMonth % 12 + 12) % 12;"+"\r\n"+"		"+"\r\n"+"		var newDate = new Date (oDate.getTime());"+"\r\n"+"		newDate.setFullYear(newYear);"+"\r\n"+"		newDate.setMonth(newMonth);"+"\r\n"+"		"+"\r\n"+"		return newDate;"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Adds a specified number of years to the given date."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method addYears"+"\r\n"+"	 * @param oDate {Date} The date to add years to."+"\r\n"+"	 * @param numYears {Number} The number of years to add (can be negative)"+"\r\n"+"	 * @return {Date} A new Date with the specified number of years"+"\r\n"+"	 * added to the original date."+"\r\n"+"	 */	"+"\r\n"+"	addYears : function (oDate, numYears) {"+"\r\n"+"		var newYear = oDate.getFullYear() + numYears;"+"\r\n"+"		var newDate = new Date(oDate.getTime());"+"\r\n"+"		"+"\r\n"+"		newDate.setFullYear(newYear);"+"\r\n"+"		return newDate;"+"\r\n"+"	},"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Lists all dates in a given month."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method listOfDatesInMonth"+"\r\n"+"	 * @param oDate {Date} The date corresponding to the month for"+"\r\n"+"	 * which a list of dates is required."+"\r\n"+"	 * @return {Array} An `Array` of `Date`s from a given month."+"\r\n"+"	 */	"+"\r\n"+"    listOfDatesInMonth : function (oDate) {"+"\r\n"+"       if (!this.isValidDate(oDate)) {"+"\r\n"+"       	 return [];"+"\r\n"+"       }"+"\r\n"+""+"\r\n"+"       var daysInMonth = this.daysInMonth(oDate),"+"\r\n"+"           year        = oDate.getFullYear(),"+"\r\n"+"           month       = oDate.getMonth(),"+"\r\n"+"           output      = [];"+"\r\n"+""+"\r\n"+"       for (var day = 1; day <= daysInMonth; day++) {"+"\r\n"+"       	   output.push(new Date(year, month, day, 12, 0, 0));"+"\r\n"+"       }"+"\r\n"+""+"\r\n"+"       return output;"+"\r\n"+"    },"+"\r\n"+""+"\r\n"+"	/**"+"\r\n"+"	 * Takes a native JavaScript Date and returns the number of days"+"\r\n"+"	 * in the month that the given date belongs to."+"\r\n"+"	 * @for Date"+"\r\n"+"	 * @method daysInMonth"+"\r\n"+"	 * @param oDate {Date} Date in the month for which the number "+"\r\n"+"	 * of days is desired."+"\r\n"+"	 * @return {Number} A number (either 28, 29, 30 or 31) of days "+"\r\n"+"	 * in the given month."+"\r\n"+"	 */"+"\r\n"+"	 daysInMonth : function (oDate) {"+"\r\n"+"		if (!this.isValidDate(oDate)) {"+"\r\n"+"			return 0;"+"\r\n"+"		}"+"\r\n"+"		"+"\r\n"+"		var mon = oDate.getMonth();"+"\r\n"+"		var lengths = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];"+"\r\n"+""+"\r\n"+"		if (mon != 1) {"+"\r\n"+"			return lengths[mon];"+"\r\n"+"		}"+"\r\n"+"		else {"+"\r\n"+""+"\r\n"+"			var year = oDate.getFullYear();"+"\r\n"+"			if (year%400 === 0) {"+"\r\n"+"			       return 29;"+"\r\n"+"			}	"+"\r\n"+"			else if (year%100 === 0) {"+"\r\n"+"				   return 28;"+"\r\n"+"			}"+"\r\n"+"			else if (year%4 === 0) {"+"\r\n"+"			       return 29;"+"\r\n"+"			}"+"\r\n"+"			else {"+"\r\n"+"			       return 28;"+"\r\n"+"		    }"+"\r\n"+"	   } "+"\r\n"+"	},"+"\r\n"+"	"+"\r\n"+"	/**"+"\r\n"+"     * Converts data to type Date."+"\r\n"+"     *"+"\r\n"+"     * @method parse"+"\r\n"+"     * @param data {Date|Number|String} date object, timestamp (string or number), or string parsable by Date.parse"+"\r\n"+"     * @return {Date} a Date object or null if unable to parse"+"\r\n"+"     */"+"\r\n"+"    parse: function(data) {"+"\r\n"+"        var val = new Date(+data || data);"+"\r\n"+"        if (jQuery.isDate(val)) {"+"\r\n"+"            return val;"+"\r\n"+"        } else {"+"\r\n"+"            return null;"+"\r\n"+"        }"+"\r\n"+"    }"+"\r\n"+"};"+"\r\n"+""+"\r\n"+"//"+"\r\n"+"// Number"+"\r\n"+"//"+"\r\n"+"var ewNumber = {"+"\r\n"+""+"\r\n"+"     /**"+"\r\n"+"     * Takes a Number and formats to string for display to user."+"\r\n"+"     *"+"\r\n"+"     * @method format"+"\r\n"+"     * @param data {Number} Number."+"\r\n"+"     * @param config {Object} (Optional) Optional configuration values:"+"\r\n"+"     *  <dl>"+"\r\n"+"     *   <dt>prefix {HTML}</dd>"+"\r\n"+"     *   <dd>String prepended before each number, like a currency designator \"$\"</dd>"+"\r\n"+"     *   <dt>decimalPlaces {Number}</dd>"+"\r\n"+"     *   <dd>Number of decimal places to round. Must be a number 0 to 20.</dd>"+"\r\n"+"     *   <dt>decimalSeparator {HTML}</dd>"+"\r\n"+"     *   <dd>Decimal separator</dd>"+"\r\n"+"     *   <dt>thousandsSeparator {HTML}</dd>"+"\r\n"+"     *   <dd>Thousands separator</dd>"+"\r\n"+"     *   <dt>suffix {HTML}</dd>"+"\r\n"+"     *   <dd>String appended after each number, like \" items\" (note the space)</dd>"+"\r\n"+"     *  </dl>"+"\r\n"+"     * @return {HTML} Formatted number for display. Note, the following values"+"\r\n"+"     * return as \"\": null, undefined, NaN, \"\"."+"\r\n"+"     */"+"\r\n"+"    format: function(data, config) {"+"\r\n"+"        if(jQuery.isNumber(data)) {"+"\r\n"+"            config = config || {};"+"\r\n"+""+"\r\n"+"            var isNeg = (data < 0),"+"\r\n"+"                output = data + \"\","+"\r\n"+"                decPlaces = config.decimalPlaces,"+"\r\n"+"                decSep = config.decimalSeparator || \".\","+"\r\n"+"                thouSep = config.thousandsSeparator,"+"\r\n"+"                decIndex,"+"\r\n"+"                newOutput, count, i;"+"\r\n"+""+"\r\n"+"            // Decimal precision"+"\r\n"+"            if(jQuery.isNumber(decPlaces) && (decPlaces >= 0) && (decPlaces <= 20)) {"+"\r\n"+"                // Round to the correct decimal place"+"\r\n"+"                output = data.toFixed(decPlaces);"+"\r\n"+"            }"+"\r\n"+""+"\r\n"+"            // Decimal separator"+"\r\n"+"            if(decSep !== \".\"){"+"\r\n"+"                output = output.replace(\".\", decSep);"+"\r\n"+"            }"+"\r\n"+""+"\r\n"+"            // Add the thousands separator"+"\r\n"+"            if(thouSep) {"+"\r\n"+"                // Find the dot or where it would be"+"\r\n"+"                decIndex = output.lastIndexOf(decSep);"+"\r\n"+"                decIndex = (decIndex > -1) ? decIndex : output.length;"+"\r\n"+"                // Start with the dot and everything to the right"+"\r\n"+"                newOutput = output.substring(decIndex);"+"\r\n"+"                // Working left, every third time add a separator, every time add a digit"+"\r\n"+"                for (count = 0, i=decIndex; i>0; i--) {"+"\r\n"+"                    if ((count%3 === 0) && (i !== decIndex) && (!isNeg || (i > 1))) {"+"\r\n"+"                        newOutput = thouSep + newOutput;"+"\r\n"+"                    }"+"\r\n"+"                    newOutput = output.charAt(i-1) + newOutput;"+"\r\n"+"                    count++;"+"\r\n"+"                }"+"\r\n"+"                output = newOutput;"+"\r\n"+"            }"+"\r\n"+""+"\r\n"+"            // Prepend prefix"+"\r\n"+"            output = (config.prefix) ? config.prefix + output : output;"+"\r\n"+""+"\r\n"+"            // Append suffix"+"\r\n"+"            output = (config.suffix) ? output + config.suffix : output;"+"\r\n"+""+"\r\n"+"            return output;"+"\r\n"+"        }"+"\r\n"+"        // Not a Number, just return as string"+"\r\n"+"        else {"+"\r\n"+"            return (jQuery.isValue(data) && data.toString) ? data.toString() : \"\";"+"\r\n"+"        }"+"\r\n"+"    },"+"\r\n"+""+"\r\n"+"    /**"+"\r\n"+"     * Converts data to type Number."+"\r\n"+"     *"+"\r\n"+"     * @method parse"+"\r\n"+"     * @param data {String | Number | Boolean} Data to convert. The following"+"\r\n"+"     * values return as null: null, undefined, NaN, \"\"."+"\r\n"+"     * @return {Number} A number, or null."+"\r\n"+"     */"+"\r\n"+"    parse: function(data) {"+"\r\n"+"        var number = (data === null || data === \"\") ? data : +data;"+"\r\n"+"        if(jQuery.isNumber(number)) {"+"\r\n"+"            return number;"+"\r\n"+"        }"+"\r\n"+"        else {"+"\r\n"+"            return null;"+"\r\n"+"        }"+"\r\n"+"    }"+"\r\n"+"}"+"\r\n"+"";
ewAr[4] = ""+"\r\n"+"";
ewAr[5] = ""+"\r\n"+""+"\r\n"+"";

ewSB.Append(ewAr[1]);
 if (PROJ.GetV("UseDateNumberJs")) { 
ewSB.Append(ewAr[2]);
ewSB.Append(ewAr[3]);
ewSB.Append(ewAr[4]);
 } 
ewSB.Append(ewAr[5]);

return ewSB.ToString();
 } catch(e) {
  throw e;
 }
}
